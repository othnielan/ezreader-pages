import{a as Kt,b as qt}from"./chunk-AL4SCJKG.js";import{a as Xt,b as Jt}from"./chunk-TBOEKAKH.js";import{a as Qt}from"./chunk-XV6EHMWA.js";import{A as fe,D as he,F as $e,G as Ne,H as je,J as Pe,K as ve,L as we,M as Ut,N as mt,Q as Ge,T as Yt,V as ut,W as ot,c as pt,d as Q,e as Y,f as Gt,h as Ht,k as Wt,l as Te,q as Re,r as gt,w as ue}from"./chunk-HIDJ2X2I.js";import{a as ft}from"./chunk-KLIROE3D.js";import{$a as ee,$b as Be,Ab as Ee,B as nt,Fb as p,Fc as dt,Gb as a,Hb as s,Ib as C,Jb as I,Kb as A,Mb as w,Qb as h,Rb as d,Ta as Se,Vb as xe,Wa as c,Wb as Ce,Xb as be,Z as re,_ as at,_a as Lt,a as le,ac as J,b as _e,ba as Le,bc as T,d as S,dc as g,ec as F,fc as j,g as Bt,gb as N,gc as lt,ha as m,hb as st,ia as u,ic as Rt,ja as z,jc as G,k as et,ka as me,kc as H,lb as b,lc as W,nb as O,o as Oe,oc as $t,pc as Nt,qc as it,r as tt,rc as It,sc as jt,tc as ct,xa as ne}from"./chunk-UBSBWSUK.js";var Me=class r{textEditorsSubject=new et([]);activeEditorIdSubject=new et(null);textEditors$=this.textEditorsSubject.asObservable();activeEditorId$=this.activeEditorIdSubject.asObservable();idCounter=0;constructor(){}createTextEditor(t=100,e=100){let n=`text-editor-${++this.idCounter}`,i={id:n,x:t,y:e,width:200,height:100,rotation:0,text:""},o=this.textEditorsSubject.value;return this.textEditorsSubject.next([...o,i]),this.setActiveEditor(n),n}addTextEditor(t){let e=this.textEditorsSubject.value;this.textEditorsSubject.next([...e,t])}updateTextEditor(t,e){let i=this.textEditorsSubject.value.map(o=>o.id===t?le(le({},o),e):o);this.textEditorsSubject.next(i)}deleteTextEditor(t){let n=this.textEditorsSubject.value.filter(i=>i.id!==t);this.textEditorsSubject.next(n),this.activeEditorIdSubject.value===t&&this.setActiveEditor(null)}setActiveEditor(t){this.activeEditorIdSubject.next(t)}getActiveEditor(){return this.activeEditorIdSubject.value}getTextEditor(t){return this.textEditorsSubject.value.find(e=>e.id===t)}getAllTextEditors(){return this.textEditorsSubject.value}getAllActiveEditors(){return this.textEditorsSubject.value}clearAllTextEditors(){this.textEditorsSubject.next([]),this.setActiveEditor(null)}exportTextEditors(){return JSON.stringify(this.textEditorsSubject.value,null,2)}importTextEditors(t){try{let e=JSON.parse(t);return Array.isArray(e)?(this.textEditorsSubject.next(e),this.setActiveEditor(null),!0):!1}catch(e){return console.error("Failed to import text editors:",e),!1}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};function sn(r,t){r&1&&(a(0,"p"),g(1,"\uC774\uBBF8\uC9C0\uB97C \uB4DC\uB798\uADF8 & \uB4DC\uB86D\uD558\uAC70\uB098 \uD074\uB9AD\uD558\uC5EC \uC120\uD0DD\uD558\uC138\uC694"),s())}function ln(r,t){if(r&1&&(a(0,"p"),g(1),s()),r&2){let e=d(3);c(),j("\uC120\uD0DD\uB41C \uD30C\uC77C: ",e.selectedFile.name)}}function cn(r,t){if(r&1){let e=w();a(0,"div",17)(1,"div",18),h("click",function(){m(e);let i=Be(10);return u(i.click())})("dragover",function(i){m(e);let o=d(2);return u(o.onDragOver(i))})("dragleave",function(i){m(e);let o=d(2);return u(o.onDragLeave(i))})("drop",function(i){m(e);let o=d(2);return u(o.onDrop(i))}),a(2,"div",19)(3,"div",20),g(4,"\u{1F4F7}"),s(),b(5,sn,2,0,"p",21)(6,ln,2,1,"p",21),a(7,"small"),g(8,"\uC9C0\uC6D0 \uD615\uC2DD: JPG, PNG, GIF, WebP"),s()()(),a(9,"input",22,0),h("change",function(i){m(e);let o=d(2);return u(o.onFileSelected(i))}),s()()}if(r&2){let e=d(2);c(),T("dragover",e.isDragOver),c(4),p("ngIf",!e.selectedFile),c(),p("ngIf",e.selectedFile)}}function dn(r,t){if(r&1){let e=w();a(0,"div",17)(1,"div",23)(2,"label",24),g(3,"\uC774\uBBF8\uC9C0 URL:"),s(),a(4,"input",25),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.imageUrl,i)||(o.imageUrl=i),u(i)}),h("input",function(){m(e);let i=d(2);return u(i.onUrlChange())}),s()()()}if(r&2){let e=d(2);c(4),G("ngModel",e.imageUrl)}}function pn(r,t){if(r&1){let e=w();a(0,"div",26)(1,"h4"),g(2,"\uBBF8\uB9AC\uBCF4\uAE30"),s(),a(3,"div",27)(4,"img",28),h("load",function(i){m(e);let o=d(2);return u(o.onImageLoad(i))})("error",function(){m(e);let i=d(2);return u(i.onImageError())}),s()()()}if(r&2){let e=d(2);c(4),p("src",e.previewUrl,Se)("alt",(e.selectedFile==null?null:e.selectedFile.name)||"\uBBF8\uB9AC\uBCF4\uAE30")}}function gn(r,t){if(r&1){let e=w();a(0,"div",29)(1,"div",30)(2,"div",31)(3,"label",32),g(4,"\uB108\uBE44:"),s(),a(5,"input",33),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.imageSettings.width,i)||(o.imageSettings.width=i),u(i)}),h("input",function(i){m(e);let o=d(2);return u(o.onSizeChange("width",i))}),s(),a(6,"span"),g(7,"px"),s()(),a(8,"div",31)(9,"label",34),g(10,"\uB192\uC774:"),s(),a(11,"input",35),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.imageSettings.height,i)||(o.imageSettings.height=i),u(i)}),h("input",function(i){m(e);let o=d(2);return u(o.onSizeChange("height",i))}),s(),a(12,"span"),g(13,"px"),s()(),a(14,"button",36),h("click",function(){m(e);let i=d(2);return u(i.toggleAspectRatio())}),g(15),s()()()}if(r&2){let e=d(2);c(5),G("ngModel",e.imageSettings.width),c(6),G("ngModel",e.imageSettings.height),c(3),T("active",e.maintainAspectRatio),c(),j(" ",e.maintainAspectRatio?"\u{1F517}":"\u26D3\uFE0F\u200D\u{1F4A5}"," \uBE44\uC728 \uC720\uC9C0 ")}}function mn(r,t){if(r&1&&(a(0,"div",37),g(1),s()),r&2){let e=d(2);c(),j(" ",e.errorMessage," ")}}function un(r,t){if(r&1){let e=w();a(0,"div",2),h("click",function(i){m(e);let o=d();return u(o.onBackdropClick(i))}),a(1,"div",3),h("click",function(i){return m(e),u(i.stopPropagation())}),a(2,"div",4)(3,"h3"),g(4,"\uC774\uBBF8\uC9C0 \uCD94\uAC00"),s(),a(5,"button",5),h("click",function(){m(e);let i=d();return u(i.close())}),g(6,"\xD7"),s()(),a(7,"div",6)(8,"div",7)(9,"div",8)(10,"button",9),h("click",function(){m(e);let i=d();return u(i.setActiveTab("upload"))}),g(11," \uD30C\uC77C \uC5C5\uB85C\uB4DC "),s(),a(12,"button",9),h("click",function(){m(e);let i=d();return u(i.setActiveTab("url"))}),g(13," URL \uC785\uB825 "),s()()(),b(14,cn,11,4,"div",10)(15,dn,5,1,"div",10)(16,pn,5,2,"div",11)(17,gn,16,5,"div",12)(18,mn,2,1,"div",13),s(),a(19,"div",14)(20,"button",15),h("click",function(){m(e);let i=d();return u(i.close())}),g(21,"\uCDE8\uC18C"),s(),a(22,"button",16),h("click",function(){m(e);let i=d();return u(i.insertImage())}),g(23),s()()()()}if(r&2){let e=d();c(10),T("active",e.activeTab==="upload"),c(2),T("active",e.activeTab==="url"),c(2),p("ngIf",e.activeTab==="upload"),c(),p("ngIf",e.activeTab==="url"),c(),p("ngIf",e.previewUrl),c(),p("ngIf",e.previewUrl),c(),p("ngIf",e.errorMessage),c(4),p("disabled",!e.previewUrl||e.isLoading),c(),j(" ",e.isLoading?"\uCC98\uB9AC \uC911...":"\uC774\uBBF8\uC9C0 \uCD94\uAC00"," ")}}var ke=class r{isVisible=!1;imageInserted=new O;closed=new O;activeTab="upload";selectedFile=null;imageUrl="";previewUrl="";isDragOver=!1;isLoading=!1;errorMessage="";maintainAspectRatio=!0;originalAspectRatio=1;imageSettings={width:200,height:200};ngOnInit(){console.log("ImageInserterComponent initialized, isVisible:",this.isVisible)}ngOnChanges(){console.log("ImageInserterComponent ngOnChanges, isVisible:",this.isVisible)}setActiveTab(t){this.activeTab=t,this.clearPreview()}onFileSelected(t){let e=t.target;e.files&&e.files[0]&&this.handleFile(e.files[0])}onDragOver(t){t.preventDefault(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),this.isDragOver=!1}onDrop(t){t.preventDefault(),this.isDragOver=!1;let e=t.dataTransfer?.files;e&&e[0]&&this.handleFile(e[0])}handleFile(t){if(!t.type.startsWith("image/")){this.errorMessage="\uC774\uBBF8\uC9C0 \uD30C\uC77C\uB9CC \uC120\uD0DD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.";return}if(t.size>10*1024*1024){this.errorMessage="\uD30C\uC77C \uD06C\uAE30\uB294 10MB \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.";return}this.selectedFile=t,this.errorMessage="";let e=new FileReader;e.onload=n=>{this.previewUrl=n.target?.result},e.readAsDataURL(t)}onUrlChange(){this.errorMessage="",this.imageUrl.trim()?this.previewUrl=this.imageUrl.trim():this.previewUrl=""}onImageLoad(t){let e=t.target;this.originalAspectRatio=e.naturalWidth/e.naturalHeight;let n=400;e.naturalWidth>n||e.naturalHeight>n?e.naturalWidth>e.naturalHeight?(this.imageSettings.width=n,this.imageSettings.height=Math.round(n/this.originalAspectRatio)):(this.imageSettings.height=n,this.imageSettings.width=Math.round(n*this.originalAspectRatio)):(this.imageSettings.width=e.naturalWidth,this.imageSettings.height=e.naturalHeight)}onImageError(){this.errorMessage="\uC774\uBBF8\uC9C0\uB97C \uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. URL\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.",this.previewUrl=""}toggleAspectRatio(){this.maintainAspectRatio=!this.maintainAspectRatio}onSizeChange(t,e){this.maintainAspectRatio&&this.originalAspectRatio&&(t==="width"?this.imageSettings.height=Math.round(this.imageSettings.width/this.originalAspectRatio):this.imageSettings.width=Math.round(this.imageSettings.height*this.originalAspectRatio))}insertImage(){if(!this.previewUrl){this.errorMessage="\uC774\uBBF8\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.";return}this.isLoading=!0;let t={id:"img_"+Date.now(),x:100,y:100,width:this.imageSettings.width,height:this.imageSettings.height,src:this.previewUrl,alt:this.selectedFile?.name||"Inserted image",zIndex:1e3};this.imageInserted.emit(t),this.isLoading=!1,this.close()}close(){this.isVisible=!1,this.clearPreview(),this.closed.emit()}onBackdropClick(t){t.target===t.currentTarget&&this.close()}clearPreview(){this.selectedFile=null,this.imageUrl="",this.previewUrl="",this.errorMessage="",this.isLoading=!1,this.imageSettings={width:200,height:200}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-image-inserter"]],inputs:{isVisible:"isVisible"},outputs:{imageInserted:"imageInserted",closed:"closed"},features:[ne],decls:1,vars:1,consts:[["fileInput",""],["class","image-inserter-modal",3,"click",4,"ngIf"],[1,"image-inserter-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"tab-container"],[1,"tabs"],[1,"tab-btn",3,"click"],["class","tab-content",4,"ngIf"],["class","preview-section",4,"ngIf"],["class","settings-section",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"tab-content"],[1,"upload-area",3,"click","dragover","dragleave","drop"],[1,"upload-content"],[1,"upload-icon"],[4,"ngIf"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"url-input-section"],["for","imageUrl"],["type","url","id","imageUrl","placeholder","https://example.com/image.jpg",1,"url-input",3,"ngModelChange","input","ngModel"],[1,"preview-section"],[1,"image-preview"],[3,"load","error","src","alt"],[1,"settings-section"],[1,"size-controls"],[1,"size-group"],["for","imageWidth"],["type","number","id","imageWidth","min","10","max","800",1,"size-input",3,"ngModelChange","input","ngModel"],["for","imageHeight"],["type","number","id","imageHeight","min","10","max","800",1,"size-input",3,"ngModelChange","input","ngModel"],[1,"aspect-ratio-btn",3,"click"],[1,"error-message"]],template:function(e,n){e&1&&b(0,un,24,11,"div",1),e&2&&p("ngIf",n.isVisible)},dependencies:[Te,Y,Ge,ue,$e,fe,mt,Ut,he],styles:['@charset "UTF-8";.image-inserter-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:99999}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;max-width:600px;width:90%;max-height:90vh;overflow-y:auto}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e9ecef}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600;color:#333}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:4px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;color:#333}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{margin-bottom:20px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e9ecef}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{background:none;border:none;padding:12px 16px;cursor:pointer;font-size:14px;color:#6c757d;border-bottom:2px solid transparent;transition:all .2s}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{color:#007bff;border-bottom-color:#007bff}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active){color:#495057}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{border:2px dashed #dee2e6;border-radius:8px;padding:40px 20px;text-align:center;cursor:pointer;transition:all .3s ease;background:#f8f9fa}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]:hover, .image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area.dragover[_ngcontent-%COMP%]{border-color:#007bff;background-color:#e3f2fd}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:16px;color:#495057}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]   .upload-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:12px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .url-input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#495057}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .url-input-section[_ngcontent-%COMP%]   .url-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .url-input-section[_ngcontent-%COMP%]   .url-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]{margin-top:20px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:1rem;font-weight:600;color:#333}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:4px;padding:16px;text-align:center;background:#fff}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .preview-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border-radius:4px;box-shadow:0 2px 4px #0000001a}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid #e9ecef}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#495057;min-width:40px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-group[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid #ced4da;border-radius:4px;font-size:14px;text-align:center}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-group[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .aspect-ratio-btn[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #ced4da;padding:8px 12px;border-radius:4px;cursor:pointer;font-size:12px;color:#495057;transition:all .2s}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .aspect-ratio-btn.active[_ngcontent-%COMP%]{background:#007bff;border-color:#007bff;color:#fff}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .aspect-ratio-btn[_ngcontent-%COMP%]:hover:not(.active){background:#e9ecef}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:12px;padding:12px;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;color:#721c24;font-size:14px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px;border-top:1px solid #e9ecef}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;opacity:.65}@media (max-width: 768px){.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:95%;margin:10px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:16px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{padding:30px 15px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]   .size-controls[_ngcontent-%COMP%]   .size-group[_ngcontent-%COMP%]{justify-content:space-between}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:16px;flex-direction:column}.image-inserter-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}']})};var He=class r{constructor(t){this.cdr=t}textEditor;position={x:0,y:0};cssClass="";fontSizeChange=new O;fontFamilyChange=new O;boldToggle=new O;italicToggle=new O;underlineToggle=new O;textAlignChange=new O;colorChange=new O;ngOnInit(){console.log("PdfTextEditorToolbarComponent ngOnInit")}ngOnChanges(t){console.log("PdfTextEditorToolbarComponent ngOnChanges:",t),t.textEditor&&(console.log("textEditor changed:",t.textEditor.currentValue),this.cdr.detectChanges()),t.position&&console.log("position changed:",t.position.currentValue)}onFontSizeChange(t){let e=t.target,n=parseInt(e.value,10);this.fontSizeChange.emit({editor:this.textEditor,fontSize:n})}onFontFamilyChange(t){let n=t.target.value;this.fontFamilyChange.emit({editor:this.textEditor,fontFamily:n})}onBoldToggle(){this.boldToggle.emit(this.textEditor)}onItalicToggle(){this.italicToggle.emit(this.textEditor)}onUnderlineToggle(){this.underlineToggle.emit(this.textEditor)}onTextAlignChange(t){this.textAlignChange.emit({editor:this.textEditor,align:t})}onColorChange(t){let n=t.target.value;this.colorChange.emit({editor:this.textEditor,color:n})}static \u0275fac=function(e){return new(e||r)(ee(dt))};static \u0275cmp=N({type:r,selectors:[["app-pdf-text-adder-toolbar"]],inputs:{textEditor:"textEditor",position:"position",cssClass:"cssClass"},outputs:{fontSizeChange:"fontSizeChange",fontFamilyChange:"fontFamilyChange",boldToggle:"boldToggle",italicToggle:"italicToggle",underlineToggle:"underlineToggle",textAlignChange:"textAlignChange",colorChange:"colorChange"},standalone:!1,features:[ne],decls:50,vars:20,consts:[[1,"text-style-toolbar",3,"ngClass"],[1,"toolbar-group"],["type","number","min","8","max","72","step","1",3,"change","value"],[3,"change","value"],["value","Arial"],["value","Helvetica"],["value","Times New Roman"],["value","Courier New"],["value","Georgia"],["value","Verdana"],["value","NanumGothicLocal"],["value","'Pretendard Variable', 'Pretendard'"],["value","'Noto Sans KR'"],["value","'Pretendard Variable', 'Pretendard', 'Noto Sans KR', 'NanumGothicLocal', 'NanumGothic', '\uB098\uB214\uACE0\uB515', sans-serif"],["title","\uAD75\uAC8C",3,"click"],["title","\uAE30\uC6B8\uC784",3,"click"],["title","\uBC11\uC904",3,"click"],["title","\uC67C\uCABD \uC815\uB82C",3,"click"],["title","\uAC00\uC6B4\uB370 \uC815\uB82C",3,"click"],["title","\uC624\uB978\uCABD \uC815\uB82C",3,"click"],["type","color",3,"change","value"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"label"),g(3,"\uD06C\uAE30:"),s(),a(4,"input",2),h("change",function(o){return n.onFontSizeChange(o)}),s()(),a(5,"div",1)(6,"label"),g(7,"\uD3F0\uD2B8:"),s(),a(8,"select",3),h("change",function(o){return n.onFontFamilyChange(o)}),a(9,"option",4),g(10,"Arial"),s(),a(11,"option",5),g(12,"Helvetica"),s(),a(13,"option",6),g(14,"Times New Roman"),s(),a(15,"option",7),g(16,"Courier New"),s(),a(17,"option",8),g(18,"Georgia"),s(),a(19,"option",9),g(20,"Verdana"),s(),a(21,"option",10),g(22,"\uB098\uB214\uACE0\uB515"),s(),a(23,"option",11),g(24,"Pretendard"),s(),a(25,"option",12),g(26,"Noto Sans KR"),s(),a(27,"option",13),g(28,"\uAE30\uBCF8 \uD55C\uAE00\uD3F0\uD2B8"),s()()(),a(29,"div",1)(30,"button",14),h("click",function(){return n.onBoldToggle()}),a(31,"strong"),g(32,"B"),s()(),a(33,"button",15),h("click",function(){return n.onItalicToggle()}),a(34,"em"),g(35,"I"),s()(),a(36,"button",16),h("click",function(){return n.onUnderlineToggle()}),a(37,"u"),g(38,"U"),s()()(),a(39,"div",1)(40,"button",17),h("click",function(){return n.onTextAlignChange("left")}),g(41," \u2261 "),s(),a(42,"button",18),h("click",function(){return n.onTextAlignChange("center")}),g(43," \u2261 "),s(),a(44,"button",19),h("click",function(){return n.onTextAlignChange("right")}),g(45," \u2261 "),s()(),a(46,"div",1)(47,"label"),g(48,"\uC0C9\uC0C1:"),s(),a(49,"input",20),h("change",function(o){return n.onColorChange(o)}),s()()()),e&2&&(J("left",n.position.x,"px")("top",n.position.y,"px"),p("ngClass",n.cssClass),c(4),p("value",n.textEditor.fontSize),c(4),p("value",n.textEditor.fontFamily),c(22),T("active",n.textEditor.bold),c(3),T("active",n.textEditor.italic),c(3),T("active",n.textEditor.underline),c(4),T("active",n.textEditor.textAlign==="left"),c(2),T("active",n.textEditor.textAlign==="center"),c(2),T("active",n.textEditor.textAlign==="right"),c(5),p("value",n.textEditor.color))},dependencies:[pt,ve,we],styles:['@charset "UTF-8";.text-style-toolbar[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #ddd;border-radius:4px;padding:8px;display:flex;gap:12px;align-items:center;box-shadow:0 2px 8px #00000026;z-index:1001;font-size:12px;white-space:nowrap}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#666;white-space:nowrap}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:50px;padding:2px 4px;border:1px solid #ddd;border-radius:2px;font-size:12px}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #ddd;border-radius:2px;font-size:12px;min-width:80px;background:#fff}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:30px;height:24px;border:1px solid #ddd;border-radius:2px;cursor:pointer;padding:0}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid #ddd;background:#fff;border-radius:2px;cursor:pointer;font-size:12px;min-width:24px}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.text-style-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#007acc;color:#fff;border-color:#007acc}.text-style-toolbar.inline[_ngcontent-%COMP%]{position:relative;border-radius:4px 4px 0 0;box-shadow:0 -2px 8px #0000001a;padding:6px 8px;gap:8px;font-size:11px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{gap:3px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:45px;font-size:11px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:11px;min-width:70px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:24px;height:20px}.text-style-toolbar.inline[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 6px;font-size:10px;min-width:20px}.text-style-toolbar.floating[_ngcontent-%COMP%]{position:fixed;z-index:2000;box-shadow:0 4px 12px #0003}.text-style-toolbar.modifier[_ngcontent-%COMP%]{position:absolute;z-index:1500;box-shadow:0 4px 12px #0003}.text-style-toolbar.compact[_ngcontent-%COMP%]{padding:4px 6px;gap:6px;font-size:11px}.text-style-toolbar.compact[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{gap:2px}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][_ngcontent-%COMP%]{position:relative}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\c67c\\cabd][_ngcontent-%COMP%]{text-align:left}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\ac00\\c6b4\\b370][_ngcontent-%COMP%]{text-align:center}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\c624\\b978\\cabd][_ngcontent-%COMP%]{text-align:right}']})};var fn=["textEditor"],hn=["textarea"];function _n(r,t){if(r&1){let e=w();a(0,"div",16),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"nw"))}),s()}}function xn(r,t){if(r&1){let e=w();a(0,"div",17),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"ne"))}),s()}}function Cn(r,t){if(r&1){let e=w();a(0,"div",18),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"sw"))}),s()}}function bn(r,t){if(r&1){let e=w();a(0,"div",19),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"se"))}),s()}}function vn(r,t){if(r&1){let e=w();a(0,"div",20),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"n"))}),s()}}function wn(r,t){if(r&1){let e=w();a(0,"div",21),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"s"))}),s()}}function Pn(r,t){if(r&1){let e=w();a(0,"div",22),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"w"))}),s()}}function Mn(r,t){if(r&1){let e=w();a(0,"div",23),h("mousedown",function(i){m(e);let o=d();return u(o.startResize(i,"e"))}),s()}}function yn(r,t){if(r&1){let e=w();a(0,"app-pdf-text-adder-toolbar",24),h("fontSizeChange",function(i){m(e);let o=d();return u(o.onToolbarFontSizeChange(i))})("fontFamilyChange",function(i){m(e);let o=d();return u(o.onToolbarFontFamilyChange(i))})("boldToggle",function(i){m(e);let o=d();return u(o.onToolbarBoldToggle(i))})("italicToggle",function(i){m(e);let o=d();return u(o.onToolbarItalicToggle(i))})("underlineToggle",function(i){m(e);let o=d();return u(o.onToolbarUnderlineToggle(i))})("textAlignChange",function(i){m(e);let o=d();return u(o.onToolbarTextAlignChange(i))})("colorChange",function(i){m(e);let o=d();return u(o.onToolbarColorChange(i))}),s()}if(r&2){let e=d();p("textEditor",e.convertToTextEditor())("position",e.toolbarPosition)}}var ht=class r{config={id:"",x:100,y:100,width:200,height:100,rotation:0,text:"",font:{name:"Arial",size:14}};isVisible=!1;containerWidth=800;containerHeight=600;configChange=new O;close=new O;delete=new O;deactivate=new O;textEditor;textarea;toolbarPosition={x:0,y:0};showToolbar=!1;isDragging=!1;isResizing=!1;isRotating=!1;dragStart={x:0,y:0};resizeHandle="";initialRotation=0;initialAngle=0;resizeObserver;ngOnInit(){this.config.id||(this.config.id="text-editor-"+Date.now()),this.resizeObserver=new ResizeObserver(()=>{this.constrainPosition()})}ngOnChanges(t){if(t.config&&t.config.currentValue){let e=t.config.currentValue;e.isActive!==void 0&&(console.log(`\uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 ${e.id} \uD65C\uC131\uD654 \uC0C1\uD0DC \uBCC0\uACBD:`,e.isActive),e.isActive?this.showToolbarForEditor():this.showToolbar=!1)}}ngOnDestroy(){this.resizeObserver?.disconnect()}ngAfterViewInit(){this.textarea&&this.config.text&&setTimeout(()=>{this.autoResizeTextarea(this.textarea.nativeElement)},0)}onMouseDown(t){t.preventDefault(),t.stopPropagation();let e=t.target;e.tagName!=="TEXTAREA"&&(e.classList.contains("resize-handle")?this.startResize(t,e.dataset.handle||""):e.classList.contains("rotate-handle")?this.startRotate(t):this.startDrag(t))}startDrag(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!0,this.dragStart={x:t.clientX-this.config.x,y:t.clientY-this.config.y},document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}startResize(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.resizeHandle=e,this.dragStart={x:t.clientX,y:t.clientY},document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}startRotate(t){t.preventDefault(),t.stopPropagation(),this.isRotating=!0,this.initialRotation=this.config.rotation;let e=this.textEditor.nativeElement.getBoundingClientRect(),n=e.left+e.width/2,i=e.top+e.height/2;this.initialAngle=Math.atan2(t.clientY-i,t.clientX-n)*180/Math.PI,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),document.body.style.cursor="grabbing"}onMouseMove=t=>{this.isDragging?(this.config.x=t.clientX-this.dragStart.x,this.config.y=t.clientY-this.dragStart.y,this.constrainPosition()):this.isResizing?this.handleResize(t):this.isRotating&&this.handleRotate(t),this.configChange.emit(this.config),this.showToolbar&&this.updateToolbarPosition()};onMouseUp=()=>{this.isDragging=!1,this.isResizing=!1,this.isRotating=!1,this.resizeHandle="",document.body.style.cursor="",document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)};handleResize(t){let e=t.clientX-this.dragStart.x,n=t.clientY-this.dragStart.y;switch(this.resizeHandle){case"nw":this.config.x+=e,this.config.y+=n,this.config.width-=e,this.config.height-=n;break;case"ne":this.config.y+=n,this.config.width+=e,this.config.height-=n;break;case"sw":this.config.x+=e,this.config.width-=e,this.config.height+=n;break;case"se":this.config.width+=e,this.config.height+=n;break;case"n":this.config.y+=n,this.config.height-=n;break;case"s":this.config.height+=n;break;case"w":this.config.x+=e,this.config.width-=e;break;case"e":this.config.width+=e;break}this.config.width=Math.max(50,this.config.width),this.config.height=Math.max(30,this.config.height),this.dragStart={x:t.clientX,y:t.clientY},this.constrainPosition()}handleRotate(t){let e=this.textEditor.nativeElement.getBoundingClientRect(),n=e.left+e.width/2,i=e.top+e.height/2,l=Math.atan2(t.clientY-i,t.clientX-n)*180/Math.PI-this.initialAngle;this.config.rotation=(this.initialRotation+l)%360,this.config.rotation<0&&(this.config.rotation+=360)}constrainPosition(){this.config.x=Math.max(0,Math.min(this.containerWidth-this.config.width,this.config.x)),this.config.y=Math.max(0,Math.min(this.containerHeight-this.config.height,this.config.y))}onTextChange(t){let e=t.target,n=this.config.text;if(this.config.text=e.value,console.log("=== \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBCC0\uACBD \uAC10\uC9C0 ==="),console.log("\uC5D0\uB514\uD130 ID:",this.config.id),console.log("\uC774\uC804 \uD14D\uC2A4\uD2B8:",n),console.log("\uC0C8 \uD14D\uC2A4\uD2B8:",this.config.text),console.log("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:",this.config.originalText),this.config.originalText!==void 0){let i=this.config.isModified;this.config.isModified=this.config.text.trim()!==this.config.originalText.trim(),console.log("\uC218\uC815 \uC0C1\uD0DC \uBCC0\uACBD:",i,"\u2192",this.config.isModified),console.log("\uD14D\uC2A4\uD2B8 \uBE44\uAD50:",{current:`"${this.config.text.trim()}"`,original:`"${this.config.originalText.trim()}"`,equal:this.config.text.trim()===this.config.originalText.trim()}),i!==this.config.isModified&&(console.log(`\u{1F504} \uC5D0\uB514\uD130 ${this.config.id} \uC218\uC815 \uC0C1\uD0DC \uBCC0\uACBD: ${i} \u2192 ${this.config.isModified}`),this.config.isModified?console.log(`\u{1F4DD} \uC5D0\uB514\uD130 ${this.config.id}\uAC00 \uC218\uC815\uB428\uC73C\uB85C \uD45C\uC2DC\uB428 (\uC800\uC7A5 \uB300\uC0C1\uC5D0 \uD3EC\uD568\uB428)`):console.log(`\u{1F504} \uC5D0\uB514\uD130 ${this.config.id}\uAC00 \uC6D0\uBCF8\uC73C\uB85C \uB418\uB3CC\uC544\uAC10`))}this.autoResizeTextarea(e),console.log("\uC0C1\uC704 \uCEF4\uD3EC\uB10C\uD2B8\uB85C \uBCC0\uACBD\uC0AC\uD56D \uC804\uB2EC \uC911..."),this.configChange.emit(this.config),console.log("=== \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBCC0\uACBD \uCC98\uB9AC \uC644\uB8CC ===")}autoResizeTextarea(t){let e=t.style.height;t.style.height="auto";let n=this.config.font?.size||14,i=Math.max(n*1.5+16,30),o=t.scrollHeight,l=Math.max(o,i);this.config.height=l,t.style.height=l+"px",this.configChange.emit(this.config)}onTextareaMouseDown(t){t.stopPropagation()}onTextareaClick(t){t.stopPropagation();let e=t.target;if(this.config.isActive)e.focus(),this.showToolbarForEditor();else{let n=new CustomEvent("activate-text-editor",{detail:{editorId:this.config.id}});document.dispatchEvent(n)}}onClose(){this.close.emit()}onDelete(){this.delete.emit(this.config.id)}onDeactivate(){this.deactivate.emit(this.config.id)}focusTextarea(){this.textarea&&this.textarea.nativeElement.focus()}getTransform(){return`translate(${this.config.x}px, ${this.config.y}px) rotate(${this.config.rotation}deg)`}getTextareaStyle(){let t=this.config.font?.name||"Arial",e=this.config.font?.size||14,n=this.config.font?.color||"#000000",i=this.config.font?.weight||"normal",o=this.config.font?.style||"normal",l=this.config.font?.letterSpacing||0,f=this.config.font?.lineHeight||1.2;return{fontSize:`${e}px`,fontFamily:'"Pretendard Variable", "Pretendard", "Noto Sans KR", "NanumGothicLocal", "NanumGothic", "\uB098\uB214\uACE0\uB515", sans-serif',color:n,fontWeight:i,fontStyle:o,letterSpacing:`${l}px`,lineHeight:f,fontKerning:"auto",fontVariantLigatures:"common-ligatures",fontFeatureSettings:'"kern" 1',textSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",fontStretch:"semi-condensed",transform:"scaleX(0.97)",wordBreak:"keep-all",overflowWrap:"break-word",backgroundColor:"rgba(255, 255, 255, 0.9)",width:"100%",height:"100%",border:"none",outline:"none",resize:"none",overflow:"hidden",padding:"2px 4px",margin:"0",boxSizing:"border-box"}}isTextModified(){return this.config.originalText?this.config.text.trim()!==this.config.originalText.trim():!1}convertToTextEditor(){return{id:this.config.id,x:this.config.x,y:this.config.y,width:this.config.width,height:this.config.height,text:this.config.text,fontSize:this.config.font?.size||14,fontFamily:this.config.font?.name||"Arial",color:this.config.font?.color||"#000000",bold:this.config.font?.weight==="bold"||this.config.font?.weight==="700",italic:this.config.font?.style==="italic",underline:!1,textAlign:"left",zIndex:1e3}}showToolbarForEditor(){this.config.isActive&&(this.showToolbar=!0,this.updateToolbarPosition())}updateToolbarPosition(){let t=this.containerWidth||800,e=this.containerHeight||600,n=400,i=50,o=this.config.x,l=this.config.y;l=this.config.y-i-10,o+n>t-20&&(o=t-n-20),l<10&&(l=this.config.y+this.config.height+10),l+i>e-20&&(l=e-i-20),o<10&&(o=10),this.toolbarPosition={x:o,y:l}}onToolbarFontSizeChange(t){this.config.font?this.config.font.size=t.fontSize:this.config.font={name:"Arial",size:t.fontSize},this.configChange.emit(this.config)}onToolbarFontFamilyChange(t){this.config.font?this.config.font.name=t.fontFamily:this.config.font={name:t.fontFamily,size:14},this.configChange.emit(this.config)}onToolbarBoldToggle(t){this.config.font?this.config.font.weight=t.bold?"bold":"normal":this.config.font={name:"Arial",size:14,weight:t.bold?"bold":"normal"},this.configChange.emit(this.config)}onToolbarItalicToggle(t){this.config.font?this.config.font.style=t.italic?"italic":"normal":this.config.font={name:"Arial",size:14,style:t.italic?"italic":"normal"},this.configChange.emit(this.config)}onToolbarUnderlineToggle(t){console.log("Underline toggle not supported in TextEditorConfig")}onToolbarTextAlignChange(t){console.log("Text align change not supported in TextEditorConfig")}onToolbarColorChange(t){this.config.font?this.config.font.color=t.color:this.config.font={name:"Arial",size:14,color:t.color},this.configChange.emit(this.config)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-pdf-text-modifier"]],viewQuery:function(e,n){if(e&1&&(xe(fn,5),xe(hn,5)),e&2){let i;Ce(i=be())&&(n.textEditor=i.first),Ce(i=be())&&(n.textarea=i.first)}},inputs:{config:"config",isVisible:"isVisible",containerWidth:"containerWidth",containerHeight:"containerHeight"},outputs:{configChange:"configChange",close:"close",delete:"delete",deactivate:"deactivate"},standalone:!1,features:[ne],decls:17,vars:30,consts:[["textEditor",""],["textarea",""],[1,"text-editor-container"],["title","\uB4DC\uB798\uADF8\uD558\uC5EC \uC774\uB3D9",1,"drag-handle",3,"mousedown"],[1,"drag-indicator"],["placeholder","\uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uC138\uC694...",1,"text-input",3,"input","mousedown","click","ngStyle","value","readonly"],[1,"border"],["class","resize-handle nw","data-handle","nw",3,"mousedown",4,"ngIf"],["class","resize-handle ne","data-handle","ne",3,"mousedown",4,"ngIf"],["class","resize-handle sw","data-handle","sw",3,"mousedown",4,"ngIf"],["class","resize-handle se","data-handle","se",3,"mousedown",4,"ngIf"],["class","resize-handle n","data-handle","n",3,"mousedown",4,"ngIf"],["class","resize-handle s","data-handle","s",3,"mousedown",4,"ngIf"],["class","resize-handle w","data-handle","w",3,"mousedown",4,"ngIf"],["class","resize-handle e","data-handle","e",3,"mousedown",4,"ngIf"],["cssClass","modifier",3,"textEditor","position","fontSizeChange","fontFamilyChange","boldToggle","italicToggle","underlineToggle","textAlignChange","colorChange",4,"ngIf"],["data-handle","nw",1,"resize-handle","nw",3,"mousedown"],["data-handle","ne",1,"resize-handle","ne",3,"mousedown"],["data-handle","sw",1,"resize-handle","sw",3,"mousedown"],["data-handle","se",1,"resize-handle","se",3,"mousedown"],["data-handle","n",1,"resize-handle","n",3,"mousedown"],["data-handle","s",1,"resize-handle","s",3,"mousedown"],["data-handle","w",1,"resize-handle","w",3,"mousedown"],["data-handle","e",1,"resize-handle","e",3,"mousedown"],["cssClass","modifier",3,"fontSizeChange","fontFamilyChange","boldToggle","italicToggle","underlineToggle","textAlignChange","colorChange","textEditor","position"]],template:function(e,n){if(e&1){let i=w();a(0,"div",2,0)(2,"div",3),h("mousedown",function(l){return m(i),u(n.startDrag(l))}),a(3,"div",4),g(4,"\u22EE\u22EE"),s()(),a(5,"textarea",5,1),h("input",function(l){return m(i),u(n.onTextChange(l))})("mousedown",function(l){return m(i),u(n.onTextareaMouseDown(l))})("click",function(l){return m(i),u(n.onTextareaClick(l))}),s(),C(7,"div",6),b(8,_n,1,0,"div",7)(9,xn,1,0,"div",8)(10,Cn,1,0,"div",9)(11,bn,1,0,"div",10)(12,vn,1,0,"div",11)(13,wn,1,0,"div",12)(14,Pn,1,0,"div",13)(15,Mn,1,0,"div",14),s(),b(16,yn,1,2,"app-pdf-text-adder-toolbar",15)}e&2&&(J("display",n.isVisible?"block":"none")("transform",n.getTransform())("width",n.config.width,"px")("height",n.config.height,"px"),T("dragging",n.isDragging)("resizing",n.isResizing)("rotating",n.isRotating)("text-modified",n.isTextModified())("active-editor",n.config.isActive),c(5),p("ngStyle",n.getTextareaStyle())("value",n.config.text)("readonly",!n.config.isActive),c(3),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.config.isActive),c(),p("ngIf",n.showToolbar&&n.config.isActive))},dependencies:[Y,Gt,He],styles:[".text-editor-container[_ngcontent-%COMP%]{position:absolute;min-width:50px;min-height:30px;z-index:1000;-webkit-user-select:none;user-select:none;box-sizing:border-box}.text-editor-container[_ngcontent-%COMP%]:hover   .resize-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:hover   .rotate-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:hover   .control-panel[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:hover   .drag-handle[_ngcontent-%COMP%]{opacity:1}.text-editor-container.text-modified[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-color:#ffc107;box-shadow:0 0 4px #ffc10780}.text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .resize-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .rotate-handle[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .control-panel[_ngcontent-%COMP%], .text-editor-container[_ngcontent-%COMP%]:not(.active-editor):hover   .drag-handle[_ngcontent-%COMP%]{opacity:0}.drag-handle[_ngcontent-%COMP%]{position:absolute;top:50%;left:-25px;transform:translateY(-50%);width:15px;height:30px;background:#b2b2b2;border:1px solid #fff;border-radius:4px 0 0 4px;display:flex;align-items:center;justify-content:center;cursor:move;opacity:0;transition:opacity .2s ease;z-index:2;color:#fff;font-size:10px}.drag-handle[_ngcontent-%COMP%]   .drag-indicator[_ngcontent-%COMP%]{font-weight:700;line-height:1;transform:rotate(90deg)}.drag-handle[_ngcontent-%COMP%]:hover{background:#323232}.text-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border:none;outline:none;resize:none;background:transparent;z-index:1;cursor:text;overflow:hidden;word-wrap:break-word;white-space:pre-wrap}.text-input[readonly][_ngcontent-%COMP%]{cursor:pointer;background-color:#fffc;color:#333}.border[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;box-sizing:border-box;border:2px solid #007ACC}.resize-handle[_ngcontent-%COMP%]{position:absolute;background:#007acc;border:1px solid #fff;opacity:0;transition:opacity .2s ease;z-index:2}.resize-handle.nw[_ngcontent-%COMP%], .resize-handle.ne[_ngcontent-%COMP%], .resize-handle.sw[_ngcontent-%COMP%], .resize-handle.se[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.resize-handle.n[_ngcontent-%COMP%], .resize-handle.s[_ngcontent-%COMP%]{width:20px;height:6px;left:50%;transform:translate(-50%)}.resize-handle.w[_ngcontent-%COMP%], .resize-handle.e[_ngcontent-%COMP%]{width:6px;height:20px;top:50%;transform:translateY(-50%)}.resize-handle.nw[_ngcontent-%COMP%]{top:-4px;left:-4px;cursor:nw-resize}.resize-handle.ne[_ngcontent-%COMP%]{top:-4px;right:-4px;cursor:ne-resize}.resize-handle.sw[_ngcontent-%COMP%]{bottom:-4px;left:-4px;cursor:sw-resize}.resize-handle.se[_ngcontent-%COMP%]{bottom:-4px;right:-4px;cursor:se-resize}.resize-handle.n[_ngcontent-%COMP%]{top:-3px;cursor:n-resize}.resize-handle.s[_ngcontent-%COMP%]{bottom:-3px;cursor:s-resize}.resize-handle.w[_ngcontent-%COMP%]{left:-3px;cursor:w-resize}.resize-handle.e[_ngcontent-%COMP%]{right:-3px;cursor:e-resize}.rotate-handle[_ngcontent-%COMP%]{position:absolute;top:-30px;left:50%;transform:translate(-50%);width:24px;height:24px;background:#ffc107;border:1px solid #fff;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:grab;opacity:0;transition:opacity .2s ease;z-index:2;color:#212529}.rotate-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.rotate-handle[_ngcontent-%COMP%]:hover{background:#e0a800}.rotate-handle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.control-panel[_ngcontent-%COMP%]{position:absolute;bottom:-35px;right:-5px;background:#fffffff2;border:1px solid #ccc;border-radius:4px;padding:4px;opacity:0;transition:opacity .2s ease;z-index:3;box-shadow:0 2px 8px #00000026}.control-panel[_ngcontent-%COMP%]   .control-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:4px}.btn-close[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-deactivate[_ngcontent-%COMP%]{width:24px;height:24px;border:none;border-radius:2px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center}.btn-close[_ngcontent-%COMP%]:hover, .btn-delete[_ngcontent-%COMP%]:hover, .btn-deactivate[_ngcontent-%COMP%]:hover{opacity:.7}.btn-close[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-delete[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-deactivate[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.text-input[_ngcontent-%COMP%]{line-height:inherit;vertical-align:top;text-align:left;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.text-editor-container.dragging[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%], .text-editor-container.resizing[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%], .text-editor-container.rotating[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none}.text-editor-container.dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{opacity:.5;background:#414141;cursor:grabbing}.text-editor-container.rotating[_ngcontent-%COMP%]   .rotate-handle[_ngcontent-%COMP%]{opacity:1;background:#e0a800;cursor:grabbing}.text-editor-container.selected[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%], .text-editor-container.selected[_ngcontent-%COMP%]   .rotate-handle[_ngcontent-%COMP%], .text-editor-container.selected[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%], .text-editor-container.selected[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{opacity:1}"]})};var Sn=["pdfContainer"],Tn=(r,t)=>({"sidebar-open":r,"sidebar-closed":t});function kn(r,t){r&1&&(a(0,"div",31),g(1," PDF \uD30C\uC77C\uC744 \uBD88\uB7EC\uC624\uB294 \uC911... "),s())}function Dn(r,t){if(r&1){let e=w();a(0,"ngx-extended-pdf-viewer",32),h("pdfLoaded",function(i){m(e);let o=d();return u(o.onPdfLoaded(i))})("pdfLoadingFailed",function(i){m(e);let o=d();return u(o.onPdfLoadingFailed(i))})("pageChange",function(i){m(e);let o=d();return u(o.onPageChange(i))})("zoomChange",function(i){m(e);let o=d();return u(o.onZoomChange(i))}),s()}if(r&2){let e=d();p("src",e.displayPdfSrc)("zoom",e.zoomLevel)("page",e.currentPage)("showToolbar",!0)("showSidebarButton",!0)("sidebarVisible",e.isSidebarOpen)("activeSidebarView",1)("ngClass",Nt(10,Tn,e.isSidebarOpen,!e.isSidebarOpen))("showFindButton",!0)("showPagingButtons",!1)}}function zn(r,t){if(r&1){let e=w();I(0),a(1,"div",33),h("click",function(){let i=m(e).$implicit,o=d();return u(o.onSentenceOverlayClick(i))}),s(),A()}if(r&2){let e=t.$implicit;c(),J("position","absolute")("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px")("z-index",e.isActive?1e3:10)("background-color",e.isActive?"rgba(0, 122, 204, 0.2)":"rgba(255, 255, 255, 0.2)")("border",e.isActive?"2px solid #007ACC":"1px dashed rgba(200, 200, 200, 0.6)")("cursor","pointer"),T("active",e.isActive),p("title",e.isActive?"\uD65C\uC131\uD654\uB428 - \uD3B8\uC9D1 \uC911: "+e.text:"\uD074\uB9AD\uD558\uC5EC \uD3B8\uC9D1: "+e.text)}}function Fn(r,t){if(r&1){let e=w();a(0,"app-pdf-text-modifier",35),h("configChange",function(i){m(e);let o=d(2);return u(o.onTextEditorConfigChange(i))})("close",function(){let i=m(e).$implicit,o=d(2);return u(o.onTextEditorClose(i.id))})("delete",function(i){m(e);let o=d(2);return u(o.onTextEditorDelete(i))})("deactivate",function(){let i=m(e).$implicit,o=d(2);return u(o.onTextEditorDelete(i.id))}),s()}if(r&2){let e=t.$implicit,n=d(2);p("config",e)("isVisible",!0)("containerWidth",n.containerWidth)("containerHeight",n.containerHeight)}}function In(r,t){if(r&1&&(I(0),b(1,Fn,1,4,"app-pdf-text-modifier",34),it(2,"async"),A()),r&2){let e=d();c(),p("ngForOf",It(2,1,e.textEditors$))}}function An(r,t){if(r&1){let e=w();I(0),a(1,"app-pdf-text-modifier",35),h("configChange",function(i){m(e);let o=d();return u(o.onSentenceTextEditorConfigChange(i))})("close",function(){let i=m(e).$implicit,o=d();return u(o.onSentenceTextEditorClose(i.id))})("delete",function(i){m(e);let o=d();return u(o.onSentenceTextEditorDelete(i))})("deactivate",function(i){m(e);let o=d();return u(o.onSentenceTextEditorDeactivate(i))}),s(),A()}if(r&2){let e=t.$implicit,n=d();c(),p("config",e)("isVisible",e.isActive||e.isModified||!1)("containerWidth",n.containerWidth)("containerHeight",n.containerHeight)}}function Vn(r,t){if(r&1&&(z(),C(0,"rect")),r&2){let e=d().$implicit;Ee("x",e.x)("y",e.y)("width",e.width)("height",e.height)("fill",e.fill?e.color:"none")("stroke",e.color)("stroke-width",e.strokeWidth||2)("opacity",e.opacity||.7)}}function Bn(r,t){if(r&1&&(z(),C(0,"ellipse")),r&2){let e=d().$implicit;Ee("cx",e.x+e.width/2)("cy",e.y+e.height/2)("rx",e.width/2)("ry",e.height/2)("fill",e.fill?e.color:"none")("stroke",e.color)("stroke-width",e.strokeWidth||2)("opacity",e.opacity||.7)}}function Ln(r,t){if(r&1&&(z(),C(0,"line")),r&2){let e=d().$implicit;Ee("x1",e.x)("y1",e.y)("x2",e.x+e.width)("y2",e.y+e.height)("stroke",e.color)("stroke-width",e.strokeWidth||2)("opacity",e.opacity||.7)}}function Rn(r,t){if(r&1&&(z(),a(0,"g"),C(1,"line")(2,"polygon"),s()),r&2){let e=d().$implicit,n=d();c(),Ee("x1",e.x)("y1",e.y)("x2",e.x+e.width)("y2",e.y+e.height)("stroke",e.color)("stroke-width",e.strokeWidth||2)("opacity",e.opacity||.7),c(),Ee("points",n.getArrowPoints(e))("fill",e.color)("opacity",e.opacity||.7)}}function $n(r,t){if(r&1&&(z(),I(0),b(1,Vn,1,8,"rect",36)(2,Bn,1,8,"ellipse",36)(3,Ln,1,7,"line",36)(4,Rn,3,10,"g",36),A()),r&2){let e=t.$implicit;c(),p("ngIf",e.type==="rectangle"),c(),p("ngIf",e.type==="circle"),c(),p("ngIf",e.type==="line"),c(),p("ngIf",e.type==="arrow")}}function Nn(r,t){if(r&1&&(z(),C(0,"rect",42)),r&2){let e=d(3);Ee("x",e.currentDrawingShape.x)("y",e.currentDrawingShape.y)("width",e.currentDrawingShape.width)("height",e.currentDrawingShape.height)("stroke",e.selectedShape.color)}}function jn(r,t){if(r&1&&(z(),C(0,"ellipse",42)),r&2){let e=d(3);Ee("cx",e.currentDrawingShape.x+e.currentDrawingShape.width/2)("cy",e.currentDrawingShape.y+e.currentDrawingShape.height/2)("rx",e.Math.abs(e.currentDrawingShape.width/2))("ry",e.Math.abs(e.currentDrawingShape.height/2))("stroke",e.selectedShape.color)}}function Gn(r,t){if(r&1&&(z(),C(0,"line",43)),r&2){let e=d(3);Ee("x1",e.currentDrawingShape.x)("y1",e.currentDrawingShape.y)("x2",e.currentDrawingShape.x+e.currentDrawingShape.width)("y2",e.currentDrawingShape.y+e.currentDrawingShape.height)("stroke",e.selectedShape.color)}}function Hn(r,t){if(r&1&&(z(),a(0,"g"),b(1,Nn,1,5,"rect",40)(2,jn,1,5,"ellipse",40)(3,Gn,1,5,"line",41),s()),r&2){let e=d(2);c(),p("ngIf",(e.selectedShape==null?null:e.selectedShape.type)==="rectangle"),c(),p("ngIf",(e.selectedShape==null?null:e.selectedShape.type)==="circle"),c(),p("ngIf",(e.selectedShape==null?null:e.selectedShape.type)==="line")}}function Wn(r,t){if(r&1){let e=w();a(0,"div",44)(1,"div",45)(2,"div",46),g(3),s(),a(4,"div",47)(5,"span"),g(6),s(),a(7,"small"),g(8,"ESC \uD0A4\uB85C \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uC885\uB8CC"),s()(),a(9,"button",48),h("click",function(){m(e);let i=d(2);return u(i.exitDrawingMode())}),z(),a(10,"svg",49),C(11,"path",50),s()()()()}if(r&2){let e=d(2);c(2),J("color",e.selectedShape.color),c(),F(e.selectedShape.icon),c(3),j("",e.selectedShape.name,"\uC744(\uB97C) \uADF8\uB9AC\uB824\uBA74 \uB4DC\uB798\uADF8\uD558\uC138\uC694")}}function Un(r,t){if(r&1){let e=w();a(0,"div",37),h("mousedown",function(i){m(e);let o=d();return u(o.onShapeDrawStart(i))})("mousemove",function(i){m(e);let o=d();return u(o.onShapeDrawMove(i))})("mouseup",function(i){m(e);let o=d();return u(o.onShapeDrawEnd(i))})("mouseleave",function(i){m(e);let o=d();return u(o.onShapeDrawEnd(i))}),z(),a(1,"svg",38),b(2,Hn,4,3,"g",36),s(),b(3,Wn,12,4,"div",39),s()}if(r&2){let e=d();c(),J("width",e.containerWidth,"px")("height",e.containerHeight,"px"),c(),p("ngIf",e.currentDrawingShape),c(),p("ngIf",e.selectedShape)}}function Yn(r,t){if(r&1){let e=w();a(0,"div",51)(1,"img",52),h("dragstart",function(i){let o=m(e).$implicit,l=d();return u(l.onImageDragStart(i,o))})("dragend",function(i){let o=m(e).$implicit,l=d();return u(l.onImageDragEnd(i,o))}),s(),a(2,"div",53)(3,"button",54),h("click",function(){let i=m(e).$implicit,o=d();return u(o.deleteImage(i.id))}),g(4," \xD7 "),s()()()}if(r&2){let e=t.$implicit;J("position","absolute")("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px")("z-index",e.zIndex),c(),J("width",e.width,"px")("height",e.height,"px"),p("src",e.src,Se)("alt",e.alt)}}var We=class r{constructor(t,e,n,i,o){this.cdr=t;this.route=e;this.router=n;this.textEditorService=i;this.renderer=o;this.textEditors$=this.textEditorService.textEditors$,this.activeEditorId$=this.textEditorService.activeEditorId$}currentPage=1;zoomLevel=100;pdfSrc=null;fileName="";sentenceGroups=[];viewerInfoChange=new O;viewerScroll=new O;sentenceEditorsChange=new O;pdfContainer;scrollLeft=0;scrollTop=0;isSidebarOpen=!0;isHighlightMode=!1;isDrawingMode=!1;selectedShape=null;shapes=[];currentDrawingShape=null;isDrawing=!1;startX=0;startY=0;isImageInserterVisible=!1;insertedImages=[];defaultPdfSrc="https://vadimdez.github.io/ng2-pdf-viewer/assets/pdf-test.pdf";displayPdfSrc=null;textEditors$;activeEditorId$;containerWidth=800;containerHeight=600;sentenceTextEditors=[];activateTextEditorListener;get downloadFileName(){return this.fileName||"document.pdf"}isViewerReady=!1;goBack(){this.router.navigate(["/mobile"])}ngOnInit(){let t=window.history.state;t&&t.pdfData&&(this.pdfSrc=t.pdfData),t&&t.name&&(this.fileName=t.name),this.updatePdfSrc(),document.addEventListener("selectionchange",this.onSelectionChange.bind(this)),this.activateTextEditorListener=e=>{this.onActivateTextEditor(e)},document.addEventListener("activate-text-editor",this.activateTextEditorListener),document.addEventListener("keydown",this.onKeyDown.bind(this)),console.log("ViewerComponent initialized")}ngAfterViewInit(){this.updatePdfSrc(),this.updateContainerSize(),new MutationObserver((e,n)=>{let i=this.pdfContainer.nativeElement.querySelector("#viewerContainer");i&&(this.renderer.listen(i,"scroll",o=>this.onPdfScroll(o)),n.disconnect())}).observe(this.pdfContainer.nativeElement,{childList:!0,subtree:!0})}onPdfScroll(t){let e=t.target;this.scrollLeft=e.scrollLeft,this.scrollTop=e.scrollTop,this.viewerScroll.emit({scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}),this.deactivateActiveEditors(),this.sentenceGroups&&this.sentenceGroups.length>0&&this.createSentenceTextEditors()}updateContainerSize(){if(this.pdfContainer){let t=this.pdfContainer.nativeElement.getBoundingClientRect();this.containerWidth=t.width,this.containerHeight=t.height}}ngOnDestroy(){this.displayPdfSrc=null,this.activateTextEditorListener&&document.removeEventListener("activate-text-editor",this.activateTextEditorListener),document.removeEventListener("selectionchange",this.onSelectionChange.bind(this)),document.removeEventListener("keydown",this.onKeyDown.bind(this))}onSelectionChange(){if(!this.isHighlightMode){this.clearCustomHighlights();return}let t=window.getSelection();if(!t||t.rangeCount===0){this.clearCustomHighlights();return}let e=t.getRangeAt(0);if(e.collapsed){this.clearCustomHighlights();return}let n=document.querySelector("ngx-extended-pdf-viewer");!n||!n.contains(e.commonAncestorContainer)||this.createUnifiedHighlight(e)}clearCustomHighlights(){let t=document.querySelector(".textLayer");t&&t.querySelectorAll("span").forEach(n=>{n.style.backgroundColor="",n.style.borderRadius="",n.style.padding=""})}createUnifiedHighlight(t){this.clearCustomHighlights(),this.applyBackgroundToTextSpans(t)}applyBackgroundToTextSpans(t){try{let e=document.querySelector(".textLayer");if(!e)return;e.querySelectorAll("span").forEach(i=>{if(!i.textContent?.trim())return;document.createRange().selectNodeContents(i),t.intersectsNode(i)&&(i.style.backgroundColor="rgba(200, 220, 255, 0.6)",i.style.borderRadius="2px",i.style.padding="0 1px")})}catch(e){console.warn("\uD14D\uC2A4\uD2B8 span \uBC30\uACBD\uC0C9 \uC801\uC6A9 \uC2E4\uD328:",e)}}onActivateTextEditor(t){let{editorId:e}=t.detail,n=this.sentenceTextEditors.find(i=>i.id===e);n&&(n.isActive=!0,this.sentenceEditorsChange.emit([...this.sentenceTextEditors]),console.log("\uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uC7AC\uD65C\uC131\uD654:",e))}deactivateActiveEditors(){let t=!1;this.sentenceTextEditors.forEach(e=>{if(e.isActive){t=!0;let n=!!(e.originalText&&e.text.trim()!==e.originalText.trim());console.log(`PDF \uC6C0\uC9C1\uC784\uC73C\uB85C \uC5D0\uB514\uD130 ${e.id} \uBE44\uD65C\uC131\uD654 \uCC98\uB9AC:`,{originalText:e.originalText,currentText:e.text,isTextModified:n,previousIsModified:e.isModified}),e.isActive=!1,n?(e.isModified=!0,console.log(`\uC5D0\uB514\uD130 ${e.id}: PDF \uC6C0\uC9C1\uC784\uC73C\uB85C \uBE44\uD65C\uC131\uD654\uB428 (\uC218\uC815\uB41C \uB0B4\uC6A9 \uC720\uC9C0, \uC800\uC7A5 \uB300\uC0C1)`)):(e.isModified=!1,console.log(`\uC5D0\uB514\uD130 ${e.id}: PDF \uC6C0\uC9C1\uC784\uC73C\uB85C \uBE44\uD65C\uC131\uD654\uB428 (\uC218\uC815\uB418\uC9C0 \uC54A\uC544 \uC228\uAE40)`)),console.log(`PDF \uC6C0\uC9C1\uC784\uC73C\uB85C \uC5D0\uB514\uD130 ${e.id} \uBE44\uD65C\uC131\uD654: \uC218\uC815\uB428=${n}, \uD45C\uC2DC=${e.isModified}`)}}),t&&this.sentenceEditorsChange.emit([...this.sentenceTextEditors])}ngOnChanges(t){t.pdfSrc&&this.pdfSrc&&this.updatePdfSrc(),t.zoomLevel&&console.log("Zoom level changed to:",this.zoomLevel),t.sentenceGroups&&this.sentenceGroups&&this.createSentenceTextEditors(),t.isHighlightMode&&(this.isHighlightMode||this.clearCustomHighlights())}updatePdfSrc(){setTimeout(()=>{this.displayPdfSrc=this.pdfSrc||this.defaultPdfSrc,this.cdr.detectChanges()},100)}onPdfLoaded(t){let e=document.querySelector("#viewThumbnail");e&&(e.remove(),console.log("viewThumbnail \uC694\uC18C \uC0AD\uC81C (\uBB38\uC11C \uB85C\uB4DC \uC2DC\uC810)")),console.log("PDF loaded successfully:",t),this.isViewerReady=!0,setTimeout(()=>{this.adjustPdfViewerSize(),this.emitViewerInfo(),this.isSidebarOpen&&this.openSidebar(),this.sentenceGroups&&this.sentenceGroups.length>0&&setTimeout(()=>{this.createSentenceTextEditors()},200)},500)}adjustPdfViewerSize(){let t=document.querySelector("#viewerContainer");t&&(t.style.height="100%",t.style.width="100%");let e=document.querySelector("#viewer");e&&(e.style.padding="20px")}emitViewerInfo(){let t=document.querySelector(".page"),e=document.querySelector("#viewerContainer");if(t&&e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.zoomLevel/100,l=n.left-i.left,f=n.top-i.top;this.viewerInfoChange.emit({scale:o,offsetX:l,offsetY:f}),this.createSentenceTextEditors()}}createSentenceTextEditors(){if(!this.sentenceGroups||this.sentenceGroups.length===0){this.sentenceTextEditors=[],this.sentenceEditorsChange.emit([...this.sentenceTextEditors]);return}let t=new Map,e=new Map,n=new Map;this.sentenceTextEditors.forEach(l=>{l.isActive&&t.set(l.id,!0),l.isModified&&n.set(l.id,!0),l.originalText&&l.text!==l.originalText&&e.set(l.id,l.text)});let i=this.sentenceGroups.filter(l=>l.pageNumber===1);if(i.length===0){console.log("\uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uC5D0 \uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uBB38\uC7A5 \uADF8\uB8F9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),this.sentenceTextEditors=[],this.sentenceEditorsChange.emit([...this.sentenceTextEditors]);return}this.sentenceTextEditors=i.map((l,f)=>{let _=this.convertPdfToViewerCoordinates(l),x=l.items&&l.items.length>0?l.items[0]:null,P=x?.font||{name:"Arial",size:l.fontSize},M=x?.style?.color||"#000000",v=this.extractFontWeight(P.name),y=this.extractFontStyle(P.name),V=this.estimateLetterSpacing(P.name,P.size),k=this.estimateLineHeight(P.name,P.size),Z=this.mapPdfFontToWebFont(P.name),X=document.querySelector(".page"),U=P.size;if(X){let te=X.getBoundingClientRect().width/595.276,R=this.getFontScaleFactor(Z);U=P.size*te*R}let E=_.height;f===0&&(console.log("PDF \uC88C\uD45C:",l.position),console.log("\uBCC0\uD658\uB41C \uC88C\uD45C:",_),console.log("\uC6D0\uBCF8 \uD3F0\uD2B8 \uC815\uBCF4:",P),console.log("\uCD94\uCD9C\uB41C \uD3F0\uD2B8 \uC0C9\uC0C1:",M),console.log("\uCD94\uCD9C\uB41C \uD3F0\uD2B8 \uAD75\uAE30:",v),console.log("\uCD94\uCD9C\uB41C \uD3F0\uD2B8 \uC2A4\uD0C0\uC77C:",y),console.log("\uCD94\uC815\uB41C \uC790\uAC04 (\uC870\uAE08 \uB354 \uB113\uAC8C):",V),console.log("\uCD94\uC815\uB41C \uC904 \uAC04\uACA9:",k),console.log("\uC801\uC6A9\uB420 \uD3F0\uD2B8: Pretendard/Noto Sans KR (\uAC00\uB3C5\uC131 \uAC1C\uC120)"),console.log("\uC2A4\uCF00\uC77C\uB41C \uD3F0\uD2B8 \uD06C\uAE30:",U),console.log("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uC601\uC5ED \uB192\uC774:",E),console.log("\uC704\uCE58 \uC870\uC815: X +5px, Width +10px"),console.log("\uC6D0\uBCF8 \uC88C\uD45C:",_.x,"\u2192 \uC870\uC815\uB41C \uC88C\uD45C:",_.x+5),console.log("\uC6D0\uBCF8 \uD3ED:",_.width,"\u2192 \uC870\uC815\uB41C \uD3ED:",_.width+10));let D=`sentence-editor-${f}`,B=e.get(D);return{id:D,x:_.x-10,y:_.y,width:_.width+20,height:E,rotation:0,text:B||l.text,originalText:l.text,isActive:t.get(D)||!1,isModified:n.get(D)||!1,font:{name:Z,size:U,color:M,weight:v,style:y,letterSpacing:V,lineHeight:k},pdfCoords:{x:l.position.x,y:l.position.y,width:l.position.width,height:l.position.height}}}),console.log(`\uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uC5D0\uC11C \uC0DD\uC131\uB41C \uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130\uB4E4: ${this.sentenceTextEditors.length}\uAC1C`);let o=this.sentenceTextEditors.filter(l=>l.isActive).length;console.log(`\uD65C\uC131\uD654\uB41C \uC5D0\uB514\uD130 \uC218: ${o}\uAC1C`),this.sentenceEditorsChange.emit([...this.sentenceTextEditors])}convertPdfToViewerCoordinates(t){let n=document.querySelector(".page"),i=this.pdfContainer?.nativeElement;if(!n||!i){let k=this.zoomLevel/100,Z=841.89-t.position.y-t.position.height;return{x:t.position.x*k,y:Z*k,width:t.position.width*k,height:t.position.height*k}}let o=n.getBoundingClientRect(),l=i.getBoundingClientRect(),x=o.width/595.276,P=841.89-t.position.y-t.position.height,M=t.position.x*x,v=P*x,y=M+(o.left-l.left),V=v+(o.top-l.top);return{x:y,y:V,width:t.position.width*x,height:t.position.height*x}}convertViewerToPdfCoordinates(t,e,n,i){let f=document.querySelector(".page"),_=this.pdfContainer?.nativeElement;if(!f||!_){let E=this.zoomLevel/100;return{x:t/E,y:841.89-e/E-i/E,width:n/E,height:i/E}}let x=f.getBoundingClientRect(),P=_.getBoundingClientRect(),v=x.width/595.276,y=t-(x.left-P.left),V=e-(x.top-P.top),k=y/v,Z=841.89-V/v-i/v,X=n/v,U=i/v;return{x:k,y:Z,width:X,height:U,scale:v}}onPageChange(t){console.log("Page changed to:",t)}onPdfLoadingFailed(t){console.error("PDF loading failed:",t),this.displayPdfSrc!==this.defaultPdfSrc&&(this.displayPdfSrc=this.defaultPdfSrc,this.cdr.detectChanges())}onZoomChange(t){let e=typeof t=="string"?parseFloat(t):t;console.log("Zoom changed to:",e+"%"),this.deactivateActiveEditors(),setTimeout(()=>{this.emitViewerInfo(),this.createSentenceTextEditors()},100)}createTextEditor(t){let e=100,n=100;if(t&&this.pdfContainer){let i=this.pdfContainer.nativeElement.getBoundingClientRect();e=t.clientX-i.left,n=t.clientY-i.top}this.textEditorService.createTextEditor(e,n)}onTextEditorConfigChange(t){this.textEditorService.updateTextEditor(t.id,t)}onTextEditorClose(t){this.textEditorService.setActiveEditor(null)}onTextEditorDelete(t){this.textEditorService.deleteTextEditor(t)}onContainerClick(t){let e=t.target;if(!(e.closest("app-pdf-text-modifier")||e.closest(".sentence-overlay-area"))&&e===this.pdfContainer?.nativeElement){this.textEditorService.setActiveEditor(null);let n=!1;this.sentenceTextEditors.forEach(i=>{i.isActive&&(n=!0,i.isActive=!1)}),n&&this.sentenceEditorsChange.emit([...this.sentenceTextEditors])}}trackByEditorId(t,e){return e.id}trackBySentenceEditorId(t,e){return e.id}onSentenceTextEditorConfigChange(t){console.log("=== \uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBCC0\uACBD \uAC10\uC9C0 ==="),console.log("\uC5D0\uB514\uD130 ID:",t.id),console.log("\uD604\uC7AC \uD14D\uC2A4\uD2B8:",t.text),console.log("\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8:",t.originalText),console.log("\uC218\uC815 \uC5EC\uBD80:",t.isModified);let e=this.sentenceTextEditors.findIndex(n=>n.id===t.id);if(console.log("\uC5D0\uB514\uD130 \uC778\uB371\uC2A4:",e),e>=0){let n=this.sentenceTextEditors[e];console.log("\uC774\uC804 \uC124\uC815:",{text:n.text,originalText:n.originalText,isModified:n.isModified}),this.sentenceTextEditors[e]=t,console.log("\uC0C8 \uC124\uC815\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC"),console.log("\uC0C1\uC704 \uCEF4\uD3EC\uB10C\uD2B8\uB85C \uBCC0\uACBD\uC0AC\uD56D \uC804\uB2EC \uC911..."),this.sentenceEditorsChange.emit([...this.sentenceTextEditors]),console.log("\uBCC0\uACBD\uC0AC\uD56D \uC804\uB2EC \uC644\uB8CC")}else console.warn("\uD574\uB2F9 ID\uC758 \uC5D0\uB514\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C:",t.id);console.log("=== \uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBCC0\uACBD \uCC98\uB9AC \uC644\uB8CC ===")}onSentenceTextEditorClose(t){console.log("\uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130\uB294 \uB2EB\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t)}onSentenceTextEditorDelete(t){console.log("\uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130\uB294 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t)}onSentenceTextEditorDeactivate(t){let e=this.sentenceTextEditors.find(n=>n.id===t);if(e){let n=!!(e.originalText&&e.text.trim()!==e.originalText.trim());console.log(`\uC5D0\uB514\uD130 ${t} \uBE44\uD65C\uC131\uD654 \uCC98\uB9AC:`,{originalText:e.originalText,currentText:e.text,isTextModified:n,previousIsModified:e.isModified}),e.isActive=!1,n?(e.isModified=!0,console.log(`\uC5D0\uB514\uD130 ${t}: \uD14D\uC2A4\uD2B8\uAC00 \uC218\uC815\uB418\uC5B4 \uBE44\uD65C\uC131\uD654 \uC0C1\uD0DC\uB85C \uC720\uC9C0 (\uC800\uC7A5 \uB300\uC0C1)`)):(e.isModified=!1,console.log(`\uC5D0\uB514\uD130 ${t}: \uD14D\uC2A4\uD2B8\uAC00 \uC218\uC815\uB418\uC9C0 \uC54A\uC544 \uC644\uC804\uD788 \uC228\uAE40`)),this.sentenceEditorsChange.emit([...this.sentenceTextEditors]),console.log("\uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uBE44\uD65C\uC131\uD654:",t,"\uC218\uC815\uB428:",n,"\uD45C\uC2DC:",e.isModified)}}onSentenceOverlayClick(t){t.isActive||(this.sentenceTextEditors.forEach(e=>{if(e.isActive&&e.id!==t.id){let n=!!(e.originalText&&e.text.trim()!==e.originalText.trim());console.log(`\uC5D0\uB514\uD130 ${e.id} \uB2E4\uB978 \uC5D0\uB514\uD130 \uD65C\uC131\uD654\uB85C \uC778\uD55C \uCC98\uB9AC: \uC218\uC815\uB428=${n}, \uC774\uC804\uD65C\uC131=${e.isActive}`),e.isActive=!1,n?(e.isModified=!0,console.log(`\uC5D0\uB514\uD130 ${e.id}: \uB2E4\uB978 \uC5D0\uB514\uD130 \uD65C\uC131\uD654\uB85C \uC778\uD574 \uBE44\uD65C\uC131\uD654\uB428 (\uC218\uC815\uB41C \uB0B4\uC6A9 \uC720\uC9C0, \uC800\uC7A5 \uB300\uC0C1)`)):(e.isModified=!1,console.log(`\uC5D0\uB514\uD130 ${e.id}: \uB2E4\uB978 \uC5D0\uB514\uD130 \uD65C\uC131\uD654\uB85C \uC778\uD574 \uBE44\uD65C\uC131\uD654\uB428 (\uC218\uC815\uB418\uC9C0 \uC54A\uC544 \uC228\uAE40)`)),console.log(`\uC5D0\uB514\uD130 ${e.id} \uCC98\uB9AC \uC644\uB8CC: \uC218\uC815\uB428=${n}, \uD65C\uC131=${e.isActive}, \uD45C\uC2DC=${e.isModified}`)}}),t.isActive=!0,this.sentenceEditorsChange.emit([...this.sentenceTextEditors]),console.log(`\uBB38\uC7A5 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uD65C\uC131\uD654: ${t.id}`,t.text),setTimeout(()=>{let e=document.querySelector(`app-pdf-text-modifier[ng-reflect-config*="${t.id}"] textarea`);e&&e.focus()},100))}mapPdfFontToWebFont(t){let e={NanumGothic:'"Noto Sans KR", "IBM Plex Sans KR", NanumGothic, "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", sans-serif',NanumMyeongjo:'"Noto Serif KR", NanumMyeongjo, "\uBC14\uD0D5", "Batang", serif',NanumBarunGothic:'"IBM Plex Sans KR", "Noto Sans KR", NanumBarunGothic, "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", sans-serif',MalgunGothic:'"Noto Sans KR", "IBM Plex Sans KR", "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", sans-serif',Batang:'"Noto Serif KR", "\uBC14\uD0D5", "Batang", serif',Dotum:'"IBM Plex Sans KR", "Noto Sans KR", "\uB3CB\uC6C0", "Dotum", sans-serif',Gulim:'"IBM Plex Sans KR", "Noto Sans KR", "\uAD74\uB9BC", "Gulim", sans-serif',SourceHanSans:'"Source Han Sans KR", "Noto Sans KR", "IBM Plex Sans KR", sans-serif',SourceHanSerif:'"Noto Serif KR", serif',AppleSDGothicNeo:'"Noto Sans KR", "IBM Plex Sans KR", "\uB9D1\uC740 \uACE0\uB515", sans-serif',AppleMyungjo:'"Noto Serif KR", "\uBC14\uD0D5", serif',Arial:'"IBM Plex Sans KR", "Noto Sans KR", Arial, sans-serif',Times:'"Noto Serif KR", Times, "Times New Roman", serif',TimesNewRoman:'"Noto Serif KR", "Times New Roman", Times, serif',Helvetica:'"IBM Plex Sans KR", "Noto Sans KR", Helvetica, Arial, sans-serif',Courier:'Courier, "Courier New", monospace',CourierNew:'"Courier New", Courier, monospace',Default:'"Noto Sans KR", "IBM Plex Sans KR", Arial, "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", sans-serif'};if(e[t])return e[t];let n=t.toLowerCase();for(let[i,o]of Object.entries(e))if(i.toLowerCase().includes(n)||n.includes(i.toLowerCase()))return o;return/[가-힣]/.test(t)?'"Noto Sans KR", "IBM Plex Sans KR", "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", sans-serif':e.Default}extractFontWeight(t){let e=t.toLowerCase();return e.includes("bold")||e.includes("heavy")||e.includes("black")?"bold":e.includes("light")||e.includes("thin")?"lighter":e.includes("medium")?"500":e.includes("semibold")?"600":e.includes("extrabold")?"800":"normal"}extractFontStyle(t){let e=t.toLowerCase();return e.includes("italic")||e.includes("oblique")?"italic":"normal"}estimateLetterSpacing(t,e){return e<=12?e*-.02:e<=16?e*-.025:e<=20?e*-.03:e*-.035}getFontScaleFactor(t){return 1}estimateLineHeight(t,e){return 1.4}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen,this.cdr.detectChanges(),setTimeout(()=>{this.isSidebarOpen?this.openSidebar():this.closeSidebar()},100)}setDrawingMode(t){this.isDrawingMode=!0,this.selectedShape=t,console.log("Drawing mode enabled for shape:",t)}exitDrawingMode(){this.isDrawingMode=!1,this.selectedShape=null,this.currentDrawingShape=null,this.isDrawing=!1,console.log("Drawing mode disabled")}onShapeDrawStart(t){if(!this.isDrawingMode||!this.selectedShape)return;t.preventDefault(),t.stopPropagation();let e=t.target.getBoundingClientRect();this.startX=t.clientX-e.left,this.startY=t.clientY-e.top,this.isDrawing=!0,this.currentDrawingShape={type:this.selectedShape.type,x:this.startX,y:this.startY,width:0,height:0,color:this.selectedShape.color}}onShapeDrawMove(t){if(!this.isDrawing||!this.currentDrawingShape)return;let e=t.target.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top;this.currentDrawingShape.width=n-this.startX,this.currentDrawingShape.height=i-this.startY,(this.selectedShape.type==="rectangle"||this.selectedShape.type==="circle")&&(this.currentDrawingShape.width<0?(this.currentDrawingShape.x=this.startX+this.currentDrawingShape.width,this.currentDrawingShape.width=Math.abs(this.currentDrawingShape.width)):this.currentDrawingShape.x=this.startX,this.currentDrawingShape.height<0?(this.currentDrawingShape.y=this.startY+this.currentDrawingShape.height,this.currentDrawingShape.height=Math.abs(this.currentDrawingShape.height)):this.currentDrawingShape.y=this.startY)}onShapeDrawEnd(t){if(!this.isDrawing||!this.currentDrawingShape)return;let e=10;if(Math.abs(this.currentDrawingShape.width)<e||Math.abs(this.currentDrawingShape.height)<e){this.currentDrawingShape=null,this.isDrawing=!1;return}let n=_e(le({},this.currentDrawingShape),{id:Date.now().toString(),strokeWidth:2,fill:!1,opacity:.7});this.shapes.push(n),console.log("Shape created:",n),this.currentDrawingShape=null,this.isDrawing=!1}getArrowPoints(t){let e=t.x,n=t.y,i=t.x+t.width,o=t.y+t.height,l=15,f=Math.PI/6,_=Math.atan2(o-n,i-e),x=i-l*Math.cos(_-f),P=o-l*Math.sin(_-f),M=i-l*Math.cos(_+f),v=o-l*Math.sin(_+f);return`${i},${o} ${x},${P} ${M},${v}`}Math=Math;onKeyDown(t){t.key==="Escape"&&this.isDrawingMode&&(this.exitDrawingMode(),t.preventDefault())}openSidebar(){try{let t=document.querySelector("#viewThumbnail");t&&(t.remove(),console.log("viewThumbnail \uC694\uC18C \uC81C\uAC70 \uC644\uB8CC"));let e=document.querySelector("#sidebarContainer"),n=document.querySelector("#outerContainer");e&&n&&(e.style.display="block",e.classList.add("open"),n.classList.add("sidebarOpen"),console.log("\uC989\uC2DC CSS \uC801\uC6A9 \uC644\uB8CC")),setTimeout(()=>{let i=document.querySelector("#viewThumbnail");i&&!i.classList.contains("toggled")&&(i.click(),console.log("\uC378\uB124\uC77C \uBC84\uD2BC \uD074\uB9AD \uC644\uB8CC"))},500),setTimeout(()=>{if(window.PDFViewerApplication)try{let i=window.PDFViewerApplication;i.pdfSidebar&&(i.pdfSidebar.open(),i.pdfSidebar.switchView(1),console.log("PDFViewerApplication API \uD638\uCD9C \uC644\uB8CC"))}catch(i){console.log("PDF.js API \uD638\uCD9C \uC2E4\uD328:",i)}},1e3),setTimeout(()=>{let i=document.querySelector("#sidebarToggle");i&&!n?.classList.contains("sidebarOpen")&&(i.click(),console.log("\uC0AC\uC774\uB4DC\uBC14 \uD1A0\uAE00 \uBC84\uD2BC \uD074\uB9AD \uC644\uB8CC"))},1500)}catch(t){console.log("\uC0AC\uC774\uB4DC\uBC14 \uC790\uB3D9 \uC5F4\uAE30 \uC2E4\uD328:",t)}}closeSidebar(){try{let t=document.querySelector("#sidebarContainer"),e=document.querySelector("#outerContainer");t&&e&&(t.classList.remove("open"),e.classList.remove("sidebarOpen"),console.log("\uC0AC\uC774\uB4DC\uBC14 \uB2EB\uAE30 CSS \uC801\uC6A9 \uC644\uB8CC")),setTimeout(()=>{if(window.PDFViewerApplication)try{let n=window.PDFViewerApplication;n.pdfSidebar&&(n.pdfSidebar.close(),console.log("PDFViewerApplication \uC0AC\uC774\uB4DC\uBC14 \uB2EB\uAE30 \uC644\uB8CC"))}catch(n){console.log("PDF.js API \uC0AC\uC774\uB4DC\uBC14 \uB2EB\uAE30 \uC2E4\uD328:",n)}},100),setTimeout(()=>{let n=document.querySelector("#sidebarToggle");n&&e?.classList.contains("sidebarOpen")&&(n.click(),console.log("\uC0AC\uC774\uB4DC\uBC14 \uD1A0\uAE00 \uBC84\uD2BC \uD074\uB9AD\uC73C\uB85C \uB2EB\uAE30 \uC644\uB8CC"))},200)}catch(t){console.log("\uC0AC\uC774\uB4DC\uBC14 \uB2EB\uAE30 \uC2E4\uD328:",t)}}openImageInserter(){console.log("\uC774\uBBF8\uC9C0 \uC0BD\uC785 \uBAA8\uB2EC \uC5F4\uAE30"),this.isImageInserterVisible=!0,console.log("isImageInserterVisible:",this.isImageInserterVisible)}closeImageInserter(){this.isImageInserterVisible=!1}onImageInserted(t){this.insertedImages.push(t),console.log("\uC774\uBBF8\uC9C0 \uC0BD\uC785\uB428:",t),this.closeImageInserter()}deleteImage(t){this.insertedImages=this.insertedImages.filter(e=>e.id!==t)}updateImagePosition(t,e,n){let i=this.insertedImages.find(o=>o.id===t);i&&(i.x=e,i.y=n)}updateImageSize(t,e,n){let i=this.insertedImages.find(o=>o.id===t);i&&(i.width=e,i.height=n)}trackByImageId(t,e){return e.id}onImageDragStart(t,e){t.dataTransfer&&(t.dataTransfer.setData("text/plain",e.id),t.dataTransfer.effectAllowed="move")}onImageDragEnd(t,e){let n=this.pdfContainer.nativeElement.getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top;i>=0&&o>=0&&i<=n.width&&o<=n.height&&this.updateImagePosition(e.id,i,o)}static \u0275fac=function(e){return new(e||r)(ee(dt),ee(Yt),ee(ut),ee(Me),ee(Lt))};static \u0275cmp=N({type:r,selectors:[["app-viewer"]],viewQuery:function(e,n){if(e&1&&xe(Sn,5),e&2){let i;Ce(i=be())&&(n.pdfContainer=i.first)}},inputs:{currentPage:"currentPage",zoomLevel:"zoomLevel",pdfSrc:"pdfSrc",fileName:"fileName",sentenceGroups:"sentenceGroups"},outputs:{viewerInfoChange:"viewerInfoChange",viewerScroll:"viewerScroll",sentenceEditorsChange:"sentenceEditorsChange"},standalone:!1,features:[ne],decls:35,vars:21,consts:[["pdfContainer",""],[1,"viewer-header","mobile-header"],["title","\uB2EB\uAE30",1,"viewer-header-btn",3,"click"],["src","./images/ico-close@3x.png","alt","\uB2EB\uAE30"],[1,"viewer-header-actions"],["title","\uD3B8\uC9D1",1,"viewer-header-btn",3,"click"],["src","./images/btn-top-edit@3x.png","alt","\uD3B8\uC9D1"],["title","\uC774\uBBF8\uC9C0 \uCD94\uAC00",1,"viewer-header-btn",3,"click"],[2,"font-size","15px"],["title","AI \uC694\uC57D",1,"viewer-header-btn"],["src","./images/btn-top-ai@3x.png","alt","AI \uC694\uC57D"],["title","AI \uCC44\uD305",1,"viewer-header-btn"],["src","./images/btn-top-ai-sub1@3x.png","alt","AI \uCC44\uD305"],["title","\uC11C\uBA85",1,"viewer-header-btn"],["src","./images/btn-top-draw@3x.png","alt","\uC11C\uBA85"],["title","\uD655\uB300",1,"viewer-header-btn"],["src","./images/btn-top-find@3x.png","alt","\uD655\uB300"],["title","\uD398\uC774\uC9C0 \uBCF4\uAE30",1,"viewer-header-btn",3,"click"],["src","./images/btn-top-view@3x.png","alt","\uD398\uC774\uC9C0 \uBCF4\uAE30"],[1,"viewer-container",3,"click"],["class","loading-message",4,"ngIf"],["mobileFriendlyZoom","100%","useBrowserLocale","true","style","height: 100%; width: 100%; display: block;",3,"src","zoom","page","showToolbar","showSidebarButton","sidebarVisible","activeSidebarView","ngClass","showFindButton","showPagingButtons","pdfLoaded","pdfLoadingFailed","pageChange","zoomChange",4,"ngIf"],[1,"text-editor-host"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"shapes-container"],[1,"shapes-canvas"],[4,"ngFor","ngForOf"],["class","shape-drawing-overlay",3,"mousedown","mousemove","mouseup","mouseleave",4,"ngIf"],[1,"inserted-images-container"],["class","inserted-image",3,"position","left","top","width","height","z-index",4,"ngFor","ngForOf","ngForTrackBy"],[3,"imageInserted","closed","isVisible"],[1,"loading-message"],["mobileFriendlyZoom","100%","useBrowserLocale","true",2,"height","100%","width","100%","display","block",3,"pdfLoaded","pdfLoadingFailed","pageChange","zoomChange","src","zoom","page","showToolbar","showSidebarButton","sidebarVisible","activeSidebarView","ngClass","showFindButton","showPagingButtons"],[1,"sentence-overlay-area",3,"click","title"],[3,"config","isVisible","containerWidth","containerHeight","configChange","close","delete","deactivate",4,"ngFor","ngForOf"],[3,"configChange","close","delete","deactivate","config","isVisible","containerWidth","containerHeight"],[4,"ngIf"],[1,"shape-drawing-overlay",3,"mousedown","mousemove","mouseup","mouseleave"],[1,"drawing-preview-canvas"],["class","drawing-guide",4,"ngIf"],["fill","none","stroke-width","2","stroke-dasharray","5,5","opacity","0.8",4,"ngIf"],["stroke-width","2","stroke-dasharray","5,5","opacity","0.8",4,"ngIf"],["fill","none","stroke-width","2","stroke-dasharray","5,5","opacity","0.8"],["stroke-width","2","stroke-dasharray","5,5","opacity","0.8"],[1,"drawing-guide"],[1,"guide-content"],[1,"shape-icon"],[1,"guide-text"],["title","\uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uC885\uB8CC",1,"exit-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"inserted-image"],["draggable","true",1,"inserted-image-element",3,"dragstart","dragend","src","alt"],[1,"image-controls"],["title","\uC774\uBBF8\uC9C0 \uC0AD\uC81C",1,"image-control-btn","delete-btn",3,"click"]],template:function(e,n){if(e&1){let i=w();a(0,"div",1)(1,"button",2),h("click",function(){return m(i),u(n.goBack())}),C(2,"img",3),s(),a(3,"div",4)(4,"button",5),h("click",function(){return m(i),u(n.createTextEditor())}),C(5,"img",6),s(),a(6,"button",7),h("click",function(){return m(i),u(n.openImageInserter())}),a(7,"span",8),g(8,"\u{1F5BC}\uFE0F"),s()(),a(9,"button",9),C(10,"img",10),s(),a(11,"button",11),C(12,"img",12),s(),a(13,"button",13),C(14,"img",14),s(),a(15,"button",15),C(16,"img",16),s(),a(17,"button",17),h("click",function(){return m(i),u(n.toggleSidebar())}),C(18,"img",18),s()()(),a(19,"div",19,0),h("click",function(l){return m(i),u(n.onContainerClick(l))}),b(21,kn,2,0,"div",20)(22,Dn,1,13,"ngx-extended-pdf-viewer",21),a(23,"div",22),b(24,zn,2,21,"ng-container",23)(25,In,3,3,"ng-container",23),it(26,"async"),b(27,An,2,4,"ng-container",23),s(),a(28,"div",24),z(),a(29,"svg",25),b(30,$n,5,4,"ng-container",26),s()(),b(31,Un,4,6,"div",27),me(),a(32,"div",28),b(33,Yn,5,18,"div",29),s()(),a(34,"app-image-inserter",30),h("imageInserted",function(l){return m(i),u(n.onImageInserted(l))})("closed",function(){return m(i),u(n.closeImageInserter())}),s()}e&2&&(c(17),T("active",n.isSidebarOpen),c(4),p("ngIf",!n.displayPdfSrc),c(),p("ngIf",n.displayPdfSrc),c(2),p("ngForOf",n.sentenceTextEditors)("ngForTrackBy",n.trackBySentenceEditorId),c(),p("ngForOf",It(26,19,n.textEditors$))("ngForTrackBy",n.trackByEditorId),c(2),p("ngForOf",n.sentenceTextEditors)("ngForTrackBy",n.trackBySentenceEditorId),c(2),J("width",n.containerWidth,"px")("height",n.containerHeight,"px"),c(),p("ngForOf",n.shapes),c(),p("ngIf",n.isDrawingMode),c(2),p("ngForOf",n.insertedImages)("ngForTrackBy",n.trackByImageId),c(),p("isVisible",n.isImageInserterVisible))},dependencies:[pt,Q,Y,Kt,ke,ht,Ht],styles:['@charset "UTF-8";[_nghost-%COMP%]{flex:1;display:flex;height:100%;width:100%;min-height:0}.mobile-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;z-index:100;display:flex;align-items:center;justify-content:space-between;height:48px;background:#fff;border-bottom:1px solid #eee;padding:0 12px;font-size:18px;font-weight:500;box-shadow:0 2px 8px #0000000a}.viewer-header-btn[_ngcontent-%COMP%]{background:none;border:none;padding:6px;margin:0 2px;border-radius:6px;cursor:pointer;display:flex;align-items:center;transition:background .15s}.viewer-header-btn.active[_ngcontent-%COMP%]{background-color:#0000001f}.viewer-header-btn[_ngcontent-%COMP%]:hover{background-color:#00000014}.viewer-header-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:15px;object-fit:contain;display:block}.viewer-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;margin-left:auto}.viewer-container[_ngcontent-%COMP%]{flex:1;background:#f0f0f0;display:flex;flex-direction:column;overflow:hidden;height:100%;width:calc(100% - 80px);min-height:0;height:100vh;padding:0;margin:0 40px;background:#fff;box-sizing:border-box;position:relative}.viewer-container[_ngcontent-%COMP%]   app-text-editor[_ngcontent-%COMP%]{position:absolute;z-index:1000}.loading-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;width:100%;font-size:16px;color:#666;background:#f9f9f9}[_nghost-%COMP%]     ngx-extended-pdf-viewer{height:100%!important;width:100%!important;display:block!important;flex:1!important;min-height:0!important;width:100vw!important;height:100vh!important;display:block;background:#fff}[_nghost-%COMP%]     .zoom{zoom:1!important}[_nghost-%COMP%]     #outerContainer{height:100%!important;width:100%!important}[_nghost-%COMP%]     #mainContainer{position:absolute!important;inset:0!important;min-height:100%!important}[_nghost-%COMP%]     #viewerContainer{position:absolute!important;inset:0!important;overflow:auto!important;padding:0!important}[_nghost-%COMP%]     #viewer{padding:20px!important;min-height:100%!important}[_nghost-%COMP%]     .pdfViewer{padding:0!important}[_nghost-%COMP%]     .page{margin:10px auto!important;border:1px solid #ccc!important;box-shadow:0 4px 8px #0000001a!important;background:#fff!important}[_nghost-%COMP%]     .toolbar, [_nghost-%COMP%]     .secondaryToolbar, [_nghost-%COMP%]     .findbar, [_nghost-%COMP%]     #toolbarContainer, [_nghost-%COMP%]     #secondaryToolbarButton{display:none!important;height:0!important;min-height:0!important}[_nghost-%COMP%]     #sidebarContainer{display:block!important;width:200px!important;border-right:1px solid #ccc;background:#fff;box-shadow:2px 0 5px #0000001a}[_nghost-%COMP%]     .sidebar{display:block!important}[_nghost-%COMP%]     #thumbnailView{padding:10px}[_nghost-%COMP%]     .thumbnail{margin-bottom:10px;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:border-color .2s}[_nghost-%COMP%]     .thumbnail:hover{border-color:#007acc}[_nghost-%COMP%]     .thumbnail.selected{border-color:#007acc;box-shadow:0 0 5px #007acc4d}[_nghost-%COMP%]     #outerContainer.sidebarOpen #mainContainer{left:200px!important}[_nghost-%COMP%]     .back-btn{background:none;border:none;font-size:22px;margin-right:12px;cursor:pointer}[_nghost-%COMP%]     .viewer-title{flex:1;text-align:left;font-size:17px;font-weight:600;color:#222}[_nghost-%COMP%]       .pdfViewer .highlight{background:#c8dcffcc!important;color:#000!important;border-radius:0!important;box-shadow:none!important;padding:0!important;opacity:1!important}[_nghost-%COMP%]       .pdfViewer .highlight.selected{background:#ffd700e6!important;color:#000!important;border-radius:0!important;box-shadow:none!important;padding:0!important;opacity:1!important}[_nghost-%COMP%]       ::selection{background:#c8dcff99!important;color:inherit!important}[_nghost-%COMP%]       ::-moz-selection{background:#c8dcff99!important;color:inherit!important}[_nghost-%COMP%]       .textLayer .highlight{background:#c8dcff99!important;color:inherit!important;border-radius:2px!important;box-shadow:none!important;padding:0!important;opacity:1!important;mix-blend-mode:normal!important;isolation:auto!important}[_nghost-%COMP%]       .textLayer .highlight.selected{background:#c8dcffcc!important;color:inherit!important;border-radius:2px!important;box-shadow:none!important;padding:0!important;opacity:1!important;mix-blend-mode:normal!important;isolation:auto!important}[_nghost-%COMP%]     .custom-highlight{display:none!important}.text-editor-host[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:100}.text-editor-host[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.sentence-overlay-area[_ngcontent-%COMP%]{border-radius:4px;transition:all .2s ease;position:relative}.sentence-overlay-area[_ngcontent-%COMP%]:hover{background-color:#007acc4d!important;border-color:#007acc!important;border-style:solid!important;box-shadow:0 2px 8px #007acc4d;transform:scale(1.02)}.sentence-overlay-area[_ngcontent-%COMP%]:active{transform:scale(.98)}.sentence-overlay-area.active[_ngcontent-%COMP%]{box-shadow:0 4px 12px #007acc66}.sentence-overlay-area.active[_ngcontent-%COMP%]:hover{background-color:#007acc40!important;transform:scale(1.01)}@media (max-width: 600px){.viewer-header.mobile-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;z-index:100}.viewer-container[_ngcontent-%COMP%]{padding-top:48px;height:calc(100vh - 48px)}ngx-extended-pdf-viewer[_ngcontent-%COMP%]{height:calc(100vh - 48px)!important}}  .ng-pdf-viewer{position:relative;z-index:1}  #sidebarContainer{display:block!important;transition:transform .3s ease,opacity .3s ease!important}  #viewerContainer{transition:margin-left .3s ease,width .3s ease!important}  #outerContainer{position:relative!important;z-index:1!important}  .ng-pdf-viewer.sidebar-open #sidebarContainer{transform:translate(0)!important;visibility:visible!important;opacity:1!important}  .ng-pdf-viewer.sidebar-open #outerContainer{display:flex!important}  .ng-pdf-viewer.sidebar-open #outerContainer #sidebarContainer{flex:0 0 200px!important}  .ng-pdf-viewer.sidebar-open #outerContainer #viewerContainer{flex:1!important;margin-left:0!important;left:0!important;display:flex!important;justify-content:center!important;align-items:flex-start!important}  .ng-pdf-viewer.sidebar-open #outerContainer #viewer{max-width:calc(100% - 40px)!important;margin:0 auto!important}  .ng-pdf-viewer.sidebar-open #thumbnailView{display:block!important}  .ng-pdf-viewer.sidebar-open #sidebarToggle{background-color:#0000001f!important}  .ng-pdf-viewer.sidebar-open #viewThumbnail{background-color:#0000001f!important}  .ng-pdf-viewer.sidebar-closed #sidebarContainer{transform:translate(-200px)!important;visibility:hidden!important;opacity:0!important}  .ng-pdf-viewer.sidebar-closed #outerContainer #viewerContainer{margin-left:0!important;left:0!important;width:100%!important;display:flex!important;justify-content:center!important;align-items:flex-start!important}  .ng-pdf-viewer.sidebar-closed #outerContainer #viewer{max-width:calc(100% - 40px)!important;margin:0 auto!important}  .ng-pdf-viewer.sidebar-closed #sidebarToggle{background-color:transparent!important}.shapes-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:200;pointer-events:none}.shapes-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;pointer-events:none;z-index:201}.shape-drawing-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:500;cursor:crosshair;pointer-events:all}.drawing-preview-canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;pointer-events:none;z-index:501}.drawing-guide[_ngcontent-%COMP%]{position:fixed;top:80px;left:50%;transform:translate(-50%);z-index:502;background:#000c;color:#fff;padding:12px 16px;border-radius:8px;font-size:14px;box-shadow:0 4px 12px #0000004d;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.guide-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.guide-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.guide-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.guide-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;opacity:.8}.shape-icon[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.exit-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:4px;border-radius:4px;margin-left:8px;transition:background-color .2s}.exit-btn[_ngcontent-%COMP%]:hover{background-color:#fff3}.inserted-images-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:500}.inserted-image[_ngcontent-%COMP%]{pointer-events:all;position:absolute;cursor:move;transition:box-shadow .2s ease}.inserted-image[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026}.inserted-image[_ngcontent-%COMP%]:hover   .image-controls[_ngcontent-%COMP%]{opacity:1}.inserted-image-element[_ngcontent-%COMP%]{display:block;border-radius:4px;box-shadow:0 2px 8px #0000001a;transition:all .2s ease}.inserted-image-element[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.image-controls[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;opacity:0;transition:opacity .2s ease;display:flex;gap:4px}.image-control-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0003}.image-control-btn.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.image-control-btn.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:scale(1.1)}@media (max-width: 768px){.inserted-image[_ngcontent-%COMP%]   .image-controls[_ngcontent-%COMP%]{opacity:1;top:-12px;right:-12px}.inserted-image[_ngcontent-%COMP%]   .image-control-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:16px}}']})};var ye=class r{constructor(){}extractTextStreamAsJson(t){return S(this,null,function*(){try{console.log("\u{1F4C4} PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC2DC\uC791:",t.name);let e={fileName:t.name,fileSize:t.size,pageCount:0,extractionTimestamp:new Date().toISOString(),extractionMethod:"PDF.js + \uD5A5\uC0C1\uB41C \uBD84\uC11D",pages:[],metadata:{totalTextItems:0,totalWords:0,totalCharacters:0,uniqueFonts:[],hasImages:!1,hasVectorGraphics:!1}},n=yield t.arrayBuffer();if(typeof window.pdfjsLib<"u"){let i=window.pdfjsLib;i.GlobalWorkerOptions.workerSrc||(i.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js");let l=yield i.getDocument({data:n}).promise;e.pageCount=l.numPages,console.log(`\u{1F4CA} \uCD1D \uD398\uC774\uC9C0 \uC218: ${l.numPages}`);let f=new Set,_=0,x=0,P=0;for(let M=1;M<=l.numPages;M++){console.log(`\u{1F4C4} \uD398\uC774\uC9C0 ${M} \uCC98\uB9AC \uC911...`);let v=yield l.getPage(M),y=v.getViewport({scale:1}),k=(yield v.getTextContent()).items.map((E,D)=>{let B=E.transform,L={id:`page-${M}-item-${D}`,text:E.str,position:{x:Math.round(B[4]*100)/100,y:Math.round((y.height-B[5])*100)/100,width:Math.round(E.width*100)/100,height:Math.round(E.height*100)/100},font:{name:E.fontName||"Unknown",size:Math.round(Math.abs(B[0])*100)/100},transform:B,style:{direction:E.dir||"ltr",hasEndOfLine:E.hasEOL||!1},analysis:this.analyzeText(E.str)};return E.fontName&&f.add(E.fontName),L}).filter(E=>E.text.trim().length>0),Z=this.groupTextIntoSentences(k),X=this.calculatePageStatistics(k),U={pageNumber:M,width:Math.round(y.width),height:Math.round(y.height),textItems:k,sentences:Z,statistics:X};e.pages.push(U),_+=k.length,x+=X.wordCount,P+=X.charCount}return e.metadata={totalTextItems:_,totalWords:x,totalCharacters:P,uniqueFonts:Array.from(f),hasImages:yield this.checkForImages(l),hasVectorGraphics:yield this.checkForVectorGraphics(l)},console.log("\u2705 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC644\uB8CC"),console.log(`\u{1F4CA} \uD1B5\uACC4: ${_}\uAC1C \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C, ${x}\uAC1C \uB2E8\uC5B4, ${P}\uAC1C \uBB38\uC790`),e}throw new Error("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}catch(e){throw console.error("\u274C \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC624\uB958:",e),e}})}analyzeText(t){let e=t.trim().split(/\s+/).filter(i=>i.length>0).length,n=t.length;return{wordCount:e,charCount:n,containsEnglish:/[a-zA-Z]/.test(t),containsKorean:/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),containsNumbers:/[0-9]/.test(t),containsSpecialChars:/[!@#$%^&*(),.?":{}|<>]/.test(t)}}groupTextIntoSentences(t){let e=[],n={text:"",items:[],x:null,y:null,width:0,height:0};return t.forEach((i,o)=>{if(n.x===null&&(n.x=i.position.x,n.y=i.position.y),n.text+=i.text,n.items.push(i),n.width+=i.position.width,n.height=Math.max(n.height,i.position.height),(i.style.hasEndOfLine||i.text.includes(".")||i.text.includes("!")||i.text.includes("?")||o===t.length-1)&&n.text.trim()){let f=n.text.trim();e.push({id:`sentence-${e.length+1}`,text:f,position:{x:n.x||0,y:n.y||0,width:n.width,height:n.height},itemCount:n.items.length,itemIds:n.items.map(_=>_.id),language:this.detectLanguage(f)}),n={text:"",items:[],x:null,y:null,width:0,height:0}}}),e}detectLanguage(t){let e=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),n=/[a-zA-Z]/.test(t);return e&&n?"mixed":e?"korean":n?"english":"unknown"}calculatePageStatistics(t){let e=t.reduce((l,f)=>l+f.analysis.wordCount,0),n=t.reduce((l,f)=>l+f.analysis.charCount,0),i=t.length>0?t.reduce((l,f)=>l+f.font.size,0)/t.length:0,o={};return t.forEach(l=>{o[l.font.name]=(o[l.font.name]||0)+1}),{totalItems:t.length,wordCount:e,charCount:n,avgFontSize:Math.round(i*100)/100,fontDistribution:o}}checkForImages(t){return S(this,null,function*(){try{for(let e=1;e<=t.numPages;e++){let i=yield(yield t.getPage(e)).getOperatorList();for(let o=0;o<i.fnArray.length;o++){let l=i.fnArray[o];if(l===window.pdfjsLib.OPS.paintImageXObject||l===window.pdfjsLib.OPS.paintInlineImageXObject)return!0}}}catch(e){console.warn("\uC774\uBBF8\uC9C0 \uD655\uC778 \uC911 \uC624\uB958:",e)}return!1})}checkForVectorGraphics(t){return S(this,null,function*(){try{for(let e=1;e<=t.numPages;e++){let i=yield(yield t.getPage(e)).getOperatorList();for(let o=0;o<i.fnArray.length;o++){let l=i.fnArray[o];if(l===window.pdfjsLib.OPS.moveTo||l===window.pdfjsLib.OPS.lineTo||l===window.pdfjsLib.OPS.curveTo||l===window.pdfjsLib.OPS.rectangle||l===window.pdfjsLib.OPS.fill||l===window.pdfjsLib.OPS.stroke)return!0}}}catch(e){console.warn("\uBCA1\uD130 \uADF8\uB798\uD53D \uD655\uC778 \uC911 \uC624\uB958:",e)}return!1})}downloadJsonData(t){try{let e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json;charset=utf-8;"}),i=document.createElement("a"),o=URL.createObjectURL(n),l=new Date().toISOString().split("T")[0],f=`${t.fileName}_text_stream_${l}.json`;i.setAttribute("href",o),i.setAttribute("download",f),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),console.log(`\u2705 JSON \uD30C\uC77C \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC: ${f}`)}catch(e){throw console.error("\u274C JSON \uD30C\uC77C \uB2E4\uC6B4\uB85C\uB4DC \uC624\uB958:",e),e}}logJsonData(t){console.group("\u{1F4C4} PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC JSON \uB370\uC774\uD130"),console.log("\u{1F4CA} \uAE30\uBCF8 \uC815\uBCF4:",{fileName:t.fileName,fileSize:t.fileSize,pageCount:t.pageCount,extractionTimestamp:t.extractionTimestamp}),console.log("\u{1F4C8} \uD1B5\uACC4:",t.metadata),console.log("\uFFFD \uC5B8\uC5B4 \uD1B5\uACC4:",t.metadata.languageDetection),console.log("\uFFFD\u{1F4DD} \uD398\uC774\uC9C0\uBCC4 \uC694\uC57D:",t.pages.map(e=>({page:e.pageNumber,textItems:e.statistics.totalItems,words:e.statistics.wordCount,englishCount:e.statistics.englishTextCount||0,koreanCount:e.statistics.koreanTextCount||0}))),console.log("\u{1F4C4} \uC804\uCCB4 JSON \uB370\uC774\uD130:",t),console.groupEnd()}processFileWithAutoExtraction(t){return S(this,null,function*(){try{console.log("\u{1F680} PDF \uD30C\uC77C \uCC98\uB9AC \uC2DC\uC791 (\uC790\uB3D9 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C):",t.name);let e=yield this.extractTextStreamAsJson(t);this.logJsonData(e);let n=this.generateSummary(e);return console.log(`\u{1F4CB} \uC694\uC57D \uC815\uBCF4:
`+n),e}catch(e){throw console.error("\u274C PDF \uD30C\uC77C \uCC98\uB9AC \uC2E4\uD328:",e),e}})}filterTextByCondition(t,e){let n=[];return t.pages.forEach(i=>{e.pageNumber&&i.pageNumber!==e.pageNumber||i.textItems.forEach(o=>{let l=!0;e.containsEnglish!==void 0&&(l=l&&o.analysis.containsEnglish===e.containsEnglish),e.containsKorean!==void 0&&(l=l&&o.analysis.containsKorean===e.containsKorean),e.minFontSize!==void 0&&(l=l&&o.font.size>=e.minFontSize),e.maxFontSize!==void 0&&(l=l&&o.font.size<=e.maxFontSize),l&&n.push(o)})}),n}generateSummary(t){return[`\u{1F4C4} PDF \uD30C\uC77C: ${t.fileName}`,"\u{1F4CA} \uAE30\uBCF8 \uC815\uBCF4:",`   - \uD30C\uC77C \uD06C\uAE30: ${this.formatFileSize(t.fileSize)}`,`   - \uD398\uC774\uC9C0 \uC218: ${t.pageCount}`,`   - \uCD94\uCD9C \uC2DC\uAC04: ${new Date(t.extractionTimestamp).toLocaleString("ko-KR")}`,"","\u{1F4C8} \uD14D\uC2A4\uD2B8 \uD1B5\uACC4:",`   - \uCD1D \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C: ${t.metadata.totalTextItems.toLocaleString()}\uAC1C`,`   - \uCD1D \uB2E8\uC5B4 \uC218: ${t.metadata.totalWords.toLocaleString()}\uAC1C`,`   - \uCD1D \uBB38\uC790 \uC218: ${t.metadata.totalCharacters.toLocaleString()}\uAC1C`,`   - \uC0AC\uC6A9\uB41C \uD3F0\uD2B8: ${t.metadata.uniqueFonts.length}\uAC1C`,"","\u{1F5BC}\uFE0F \uBBF8\uB514\uC5B4 \uC694\uC18C:",`   - \uC774\uBBF8\uC9C0 \uD3EC\uD568: ${t.metadata.hasImages?"\uC608":"\uC544\uB2C8\uC624"}`,`   - \uBCA1\uD130 \uADF8\uB798\uD53D \uD3EC\uD568: ${t.metadata.hasVectorGraphics?"\uC608":"\uC544\uB2C8\uC624"}`,"","\u{1F4DD} \uD398\uC774\uC9C0\uBCC4 \uC0C1\uC138:",...t.pages.map(n=>`   \uD398\uC774\uC9C0 ${n.pageNumber}: ${n.statistics.totalItems}\uAC1C \uD14D\uC2A4\uD2B8, ${n.statistics.wordCount}\uB2E8\uC5B4`)].join(`
`)}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(2))+" "+n[i]}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var ze=class r{fontData=null;constructor(){this.loadKoreanFont()}loadKoreanFont(){return S(this,null,function*(){if(this.fontData)return!0;try{let t=yield fetch("/fonts/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("\uB85C\uCEEC \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("\uB85C\uCEEC \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://github.com/google/fonts/raw/main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("GitHub \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("GitHub \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://cdn.jsdelivr.net/gh/google/fonts@main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("CDN \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("CDN \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}return console.warn("\uBAA8\uB4E0 \uD55C\uAE00 \uD3F0\uD2B8 \uB85C\uB4DC \uC2DC\uB3C4 \uC2E4\uD328"),!1})}embedKoreanFont(t){return S(this,null,function*(){try{if(yield this.loadKoreanFont(),this.fontData){window.fontkit||(console.log("fontkit \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC911..."),yield new Promise((n,i)=>{let o=document.createElement("script");o.src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js",o.onload=()=>{console.log("fontkit \uB85C\uB529 \uC644\uB8CC"),n(!0)},o.onerror=()=>{i(new Error("fontkit \uB85C\uB529 \uC2E4\uD328"))},document.head.appendChild(o)})),t.registerFontkit(window.fontkit);let e=yield t.embedFont(new Uint8Array(this.fontData));return console.log("\uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC131\uACF5"),e}}catch(e){console.error("\uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC2E4\uD328:",e)}return null})}containsKorean(t){return/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t)}modifyPdfTextStream(t,e){return S(this,null,function*(){try{console.log("=== PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC0C1\uC138 \uB85C\uADF8 \uC2DC\uC791 ==="),console.log("\uC785\uB825 PDF \uD06C\uAE30:",t.byteLength,"\uBC14\uC774\uD2B8"),console.log("\uC218\uC815\uC0AC\uD56D \uAC1C\uC218:",e.length),e.forEach((y,V)=>{console.log(`[\uC218\uC815\uC0AC\uD56D ${V+1}/${e.length}] \uC6D0\uBCF8: "${y.originalText}" \u2192 \uC218\uC815: "${y.newText}"`)}),console.log("PDF \uC644\uC804 \uC7AC\uC0DD\uC131 \uBC29\uC2DD\uC73C\uB85C \uD14D\uC2A4\uD2B8 \uC218\uC815 \uC2DC\uC791");let n=yield this.loadPdfLib(),i=window.pdfjsLib;if(!i)throw new Error("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let l=yield i.getDocument({data:t.slice(0)}).promise;console.log(`PDF \uB85C\uB4DC \uC644\uB8CC: ${l.numPages}\uD398\uC774\uC9C0`);let f=[];for(let y=1;y<=l.numPages;y++){let V=yield l.getPage(y),k=yield V.getTextContent(),Z=V.getViewport({scale:1}),X={pageNum:y,width:Z.width,height:Z.height,textItems:k.items.map(U=>{let E=U.transform,D=E[4],B=E[5],$=Math.abs(E[0]);return{text:U.str,x:D,y:B,fontSize:$,fontName:U.fontName||"Helvetica",transform:E}})};f.push(X),console.log(`\uD398\uC774\uC9C0 ${y}: ${X.textItems.length}\uAC1C \uD14D\uC2A4\uD2B8 \uCD94\uCD9C`)}console.log("\uC0C8 PDF \uBB38\uC11C \uC0DD\uC131 \uC911...");let _=yield n.PDFDocument.create();console.log("\uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC911...");let x=yield this.embedKoreanFont(_),P=yield n.PDFDocument.load(t.slice(0));try{P.getTitle()&&_.setTitle(P.getTitle()),P.getAuthor()&&_.setAuthor(P.getAuthor()),_.setProducer("ezReader Text Modifier with Korean Support"),_.setModificationDate(new Date)}catch(y){console.warn("\uBA54\uD0C0\uB370\uC774\uD130 \uBCF5\uC0AC \uC2E4\uD328:",y)}let M=0;for(let y of f){console.log(`\uD398\uC774\uC9C0 ${y.pageNum} \uC7AC\uAD6C\uC131 \uC911...`);let V=_.addPage([y.width,y.height]);V.drawRectangle({x:0,y:0,width:y.width,height:y.height,color:n.rgb(1,1,1),opacity:1}),console.log(`\uD398\uC774\uC9C0 ${y.pageNum} \uC804\uCCB4 \uD14D\uC2A4\uD2B8 \uC7AC\uAD6C\uC131 \uC2DC\uC791 (\uCD1D ${y.textItems.length}\uAC1C \uD56D\uBAA9)`);let k=new Set,Z=[];console.log(`
=== \uD398\uC774\uC9C0 ${y.pageNum} \uC218\uC815\uC0AC\uD56D \uCC98\uB9AC \uC2DC\uC791 ===`),console.log(`\uCC98\uB9AC\uD560 \uC218\uC815\uC0AC\uD56D \uC218: ${e.length}\uAC1C`);for(let E=0;E<e.length;E++){let D=e[E],B=D.originalText.trim(),$=D.newText.trim();console.log(`
[\uC218\uC815\uC0AC\uD56D ${E+1}/${e.length}] \uCC98\uB9AC \uC2DC\uC791`),console.log(`\uC6D0\uBCF8 \uD14D\uC2A4\uD2B8: "${B}"`),console.log(`\uC0C8 \uD14D\uC2A4\uD2B8: "${$}"`);let L=this.groupTextItemsBySentence(y.textItems);console.log(`  \u{1F4DD} \uD398\uC774\uC9C0 ${y.pageNum}: ${L.length}\uAC1C \uBB38\uC7A5 \uADF8\uB8F9 \uC0DD\uC131`);let te=!1,R=-1,K=-1,ie=null;for(let ae of L){let oe=ae.text.replace(/\s+/g," ").trim(),de=B.replace(/\s+/g," ").trim();console.log(`  \u{1F50D} \uBB38\uC7A5 \uADF8\uB8F9 \uC815\uD655\uC131 \uAC80\uC0AC: "${oe}"`),console.log(`  \u{1F3AF} \uCC3E\uB294 \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8: "${de}"`);let ge=oe===de,pe=oe.includes(de)&&de.length>=5,Ae=this.calculateSimilarity(oe,de)>.8;if(ge||pe||Ae){console.log("  \u2705 \uC815\uD655\uD55C \uBB38\uC7A5 \uB9E4\uCE6D \uC131\uACF5! \uD574\uB2F9 \uBB38\uC7A5\uB9CC \uC644\uC804 \uC0AD\uC81C\uD558\uACE0 \uC0C8 \uB0B4\uC6A9\uC73C\uB85C \uAD50\uCCB4"),console.log(`  \u{1F4CD} \uC0AD\uC81C\uD560 \uC815\uD655\uD55C \uBB38\uC7A5: "${oe}"`),console.log(`  \u{1F4CA} \uB9E4\uCE6D \uC720\uD615: ${ge?"\uC815\uD655\uC77C\uCE58":pe?"\uD3EC\uD568\uAD00\uACC4":"\uB192\uC740\uC720\uC0AC\uB3C4"}`),Ae&&console.log(`  \u{1F4CA} \uC720\uC0AC\uB3C4: ${(this.calculateSimilarity(oe,de)*100).toFixed(1)}%`),console.log(`  \u{1F5D1}\uFE0F \uC815\uD655\uD55C \uBB38\uC7A5 \uB0B4 \uD14D\uC2A4\uD2B8 \uD56D\uBAA9 \uC81C\uAC70 \uC2DC\uC791 (\uCD1D ${ae.items.length}\uAC1C)`);for(let Ve=0;Ve<y.textItems.length;Ve++){let rt=y.textItems[Ve];this.isItemInSentenceGroup(rt,ae)&&(k.add(Ve),console.log(`    \u274C \uC815\uD655\uD55C \uC81C\uAC70 \uB300\uC0C1 \uCD94\uAC00: [${Ve}] "${rt.text}"`),R===-1&&(R=Ve,ie={x:ae.x,y:ae.y,fontSize:rt.fontSize,fontName:rt.fontName}),K=Ve)}te=!0,console.log(`  \u{1F4CB} \uC815\uD655\uD55C \uC0AD\uC81C \uBC94\uC704: \uC778\uB371\uC2A4 ${R}~${K} (\uCD1D ${K-R+1}\uAC1C \uD56D\uBAA9)`);break}}if(te&&ie){for(let ae=R;ae<=K;ae++)k.add(ae),console.log(`  \uC81C\uAC70 \uB300\uC0C1: [${ae}] "${y.textItems[ae].text}"`);Z.push({text:$,x:ie.x,y:ie.y,fontSize:ie.fontSize,fontName:ie.fontName,color:n.rgb(.1,.6,.1)}),M++,console.log(`  \u2705 [\uC218\uC815\uC0AC\uD56D ${E+1}] \uB9E4\uCE6D \uC131\uACF5: "${B}" \u2192 "${$}"`),console.log(`  \uC704\uCE58: (${ie.x}, ${ie.y}), \uD3F0\uD2B8: ${ie.fontSize}px`)}else{console.log(`  \u274C [\uC218\uC815\uC0AC\uD56D ${E+1}] \uBB38\uC7A5 \uB2E8\uC704 \uB9E4\uCE6D \uC2E4\uD328: "${B}"\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C`);let ae=B.split(" ").filter(oe=>oe.length>=3);if(ae.length>0){console.log(`  \u{1F50D} \uD0A4\uC6CC\uB4DC \uAE30\uBC18 \uC804\uCCB4 \uBB38\uC7A5 \uC0AD\uC81C \uBC0F \uAD50\uCCB4 \uC2DC\uB3C4: [${ae.join(", ")}]`);for(let oe of L){let de=oe.text.toLowerCase(),ge=0;for(let pe of ae)de.includes(pe.toLowerCase())&&ge++;if(ge>=Math.ceil(ae.length/2)){console.log("  \u2705 \uD0A4\uC6CC\uB4DC \uAE30\uBC18 \uB9E4\uCE6D! \uC804\uCCB4 \uBB38\uC7A5 \uC644\uC804 \uC0AD\uC81C \uD6C4 \uC0C8 \uB0B4\uC6A9\uC73C\uB85C \uAD50\uCCB4"),console.log(`  \u{1F5D1}\uFE0F \uC0AD\uC81C\uD560 \uC804\uCCB4 \uBB38\uC7A5: "${oe.text}"`),console.log(`  \u{1F4CA} \uB9E4\uCE6D\uB41C \uD0A4\uC6CC\uB4DC: ${ge}/${ae.length}\uAC1C`),console.log(`  \u2795 \uC0C8\uB85C \uCD94\uAC00\uD560 \uB0B4\uC6A9: "${$}"`),console.log(`  \u{1F5D1}\uFE0F \uBB38\uC7A5 \uB0B4 \uBAA8\uB4E0 \uD14D\uC2A4\uD2B8 \uD56D\uBAA9 \uC644\uC804 \uC0AD\uC81C \uC2DC\uC791 (\uCD1D ${oe.items.length}\uAC1C)`);for(let pe=0;pe<y.textItems.length;pe++){let Ae=y.textItems[pe];this.isItemInSentenceGroup(Ae,oe)&&(k.add(pe),console.log(`    \u274C \uC644\uC804 \uC0AD\uC81C \uB300\uC0C1 \uCD94\uAC00: [${pe}] "${Ae.text}"`),R===-1&&(R=pe,ie={x:oe.x,y:oe.y,fontSize:Ae.fontSize,fontName:Ae.fontName}),K=pe)}te=!0,console.log(`  \u{1F4CB} \uD0A4\uC6CC\uB4DC \uAE30\uBC18 \uC644\uC804 \uC0AD\uC81C \uBC94\uC704: \uC778\uB371\uC2A4 ${R}~${K} (\uCD1D ${K-R+1}\uAC1C \uD56D\uBAA9)`);break}}}if(!te){let oe=B.split(" ")[0];if(oe&&oe.length>=3){console.log(`  \u{1F50D} \uCCAB \uB2E8\uC5B4 \uAE30\uBC18 \uC804\uCCB4 \uBB38\uC7A5 \uC0AD\uC81C \uBC0F \uAD50\uCCB4 \uC2DC\uB3C4: "${oe}"`);for(let de of L)if(de.text.toLowerCase().includes(oe.toLowerCase())){console.log("  \u2705 \uCCAB \uB2E8\uC5B4 \uAE30\uBC18 \uB9E4\uCE6D! \uC804\uCCB4 \uBB38\uC7A5 \uC644\uC804 \uC0AD\uC81C \uD6C4 \uC0C8 \uB0B4\uC6A9\uC73C\uB85C \uAD50\uCCB4"),console.log(`  \u{1F5D1}\uFE0F \uC0AD\uC81C\uD560 \uC804\uCCB4 \uBB38\uC7A5: "${de.text}"`),console.log(`  \u2795 \uC0C8\uB85C \uCD94\uAC00\uD560 \uB0B4\uC6A9: "${$}"`),console.log(`  \u{1F5D1}\uFE0F \uBB38\uC7A5 \uB0B4 \uBAA8\uB4E0 \uD14D\uC2A4\uD2B8 \uD56D\uBAA9 \uC644\uC804 \uC0AD\uC81C \uC2DC\uC791 (\uCD1D ${de.items.length}\uAC1C)`);for(let ge=0;ge<y.textItems.length;ge++){let pe=y.textItems[ge];this.isItemInSentenceGroup(pe,de)&&(k.add(ge),console.log(`    \u274C \uC644\uC804 \uC0AD\uC81C \uB300\uC0C1 \uCD94\uAC00: [${ge}] "${pe.text}"`),R===-1&&(R=ge,ie={x:de.x,y:de.y,fontSize:pe.fontSize,fontName:pe.fontName}),K=ge)}te=!0,console.log(`  \u{1F4CB} \uCCAB \uB2E8\uC5B4 \uAE30\uBC18 \uC644\uC804 \uC0AD\uC81C \uBC94\uC704: \uC778\uB371\uC2A4 ${R}~${K} (\uCD1D ${K-R+1}\uAC1C \uD56D\uBAA9)`);break}}}te&&ie&&(console.log("  \u{1F4DD} \uC0C8\uB85C\uC6B4 \uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uC900\uBE44"),console.log(`  \u{1F4CD} \uCD94\uAC00 \uC704\uCE58: (${ie.x}, ${ie.y})`),console.log(`  \u{1F4C4} \uC0C8 \uB0B4\uC6A9: "${$}"`),Z.push({text:$,x:ie.x,y:ie.y,fontSize:ie.fontSize,fontName:ie.fontName,color:n.rgb(0,.7,0)}),M++,console.log(`  \u2705 [\uC218\uC815\uC0AC\uD56D ${E+1}] \uBB38\uC7A5 \uC644\uC804 \uC0AD\uC81C \uD6C4 \uC0C8 \uB0B4\uC6A9 \uAD50\uCCB4 \uC644\uB8CC!`),console.log(`  \u{1F5D1}\uFE0F \uC0AD\uC81C\uB41C \uD56D\uBAA9 \uC218: ${k.size}\uAC1C`),console.log(`  \u2795 \uC0C8\uB85C \uCD94\uAC00\uB41C \uD14D\uC2A4\uD2B8: "${$}"`)),te||console.log(`  \u274C [\uC218\uC815\uC0AC\uD56D ${E+1}] \uBAA8\uB4E0 \uBB38\uC7A5 \uB2E8\uC704 \uB9E4\uCE6D \uC2DC\uB3C4 \uC2E4\uD328`)}}console.log(`
=== \uBB38\uC7A5 \uB2E8\uC704 \uC644\uC804 \uAD50\uCCB4 \uB80C\uB354\uB9C1 \uC2DC\uC791 ===`),console.log(`\u{1F5D1}\uFE0F \uC644\uC804 \uC0AD\uC81C\uD560 \uD14D\uC2A4\uD2B8 \uC218: ${k.size}\uAC1C`),console.log(`\u2795 \uC0C8\uB85C \uCD94\uAC00\uD560 \uD14D\uC2A4\uD2B8 \uC218: ${Z.length}\uAC1C`),console.log(`\u{1F4C4} \uB0A8\uC740 \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uC218: ${y.textItems.length-k.size}\uAC1C`);let X=0;for(let E=0;E<y.textItems.length;E++){let D=y.textItems[E];if(k.has(E)){console.log(`  \u{1F5D1}\uFE0F \uC644\uC804 \uC0AD\uC81C\uB428 [${E}]: "${D.text}" (\uBB38\uC7A5 \uB2E8\uC704 \uC0AD\uC81C)`);continue}if(D.text&&D.text.trim().length>0){let B=D.text,$=n.rgb(0,0,0);console.log(`  \u{1F4DD} \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uC720\uC9C0 [${E}]: "${B}"`),X++;try{let L=D.x,te=D.y,R=Math.max(8,Math.min(D.fontSize,72)),K=this.containsKorean(B),ie=K&&x?x:void 0;K&&x&&console.log(`    \u{1F1F0}\u{1F1F7} \uD55C\uAE00 \uD14D\uC2A4\uD2B8 \uAC10\uC9C0, \uD55C\uAE00 \uD3F0\uD2B8 \uC0AC\uC6A9: "${B}"`),console.log(`    \u{1F4CD} \uD14D\uC2A4\uD2B8 \uC704\uCE58: x=${L}, y=${te}, \uD06C\uAE30=${R}`),V.drawText(B,{x:L,y:te,size:R,font:ie,color:$,opacity:1})}catch(L){console.warn(`\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC2E4\uD328 [${E}]: "${B}"`,L);try{V.drawText(B,{x:D.x,y:D.y,size:Math.max(8,Math.min(D.fontSize,72)),color:$,opacity:1})}catch(te){console.error(`\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC644\uC804 \uC2E4\uD328 [${E}]: "${B}"`,te)}}}}console.log(`  \u{1F4CA} \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uB80C\uB354\uB9C1 \uC644\uB8CC: ${X}\uAC1C \uD56D\uBAA9`),console.log(`
=== \uC0C8\uB85C\uC6B4 \uBB38\uC7A5 \uB0B4\uC6A9 \uCD94\uAC00 ===`);let U=0;for(let E of Z){console.log(`  \u2795 \uC0C8 \uBB38\uC7A5 \uB0B4\uC6A9 \uCD94\uAC00 [${U+1}/${Z.length}]: "${E.text}"`),console.log(`     \u{1F4CD} \uC704\uCE58: (${E.x}, ${E.y})`),console.log(`     \u{1F4CF} \uD06C\uAE30: ${E.fontSize}px`);try{let D=this.containsKorean(E.text),B=D&&x?x:void 0;D&&x&&console.log(`     \u{1F1F0}\u{1F1F7} \uC0C8 \uBB38\uC7A5\uC5D0 \uD55C\uAE00 \uD3F0\uD2B8 \uC801\uC6A9: "${E.text}"`),V.drawText(E.text,{x:E.x,y:E.y,size:Math.max(8,Math.min(E.fontSize,72)),font:B,color:E.color,opacity:1}),U++,console.log("     \u2705 \uC0C8 \uBB38\uC7A5 \uCD94\uAC00 \uC131\uACF5!")}catch(D){console.warn(`     \u274C \uC0C8 \uBB38\uC7A5 \uADF8\uB9AC\uAE30 \uC2E4\uD328: "${E.text}"`,D);try{V.drawText(E.text,{x:E.x,y:E.y,size:Math.max(8,Math.min(E.fontSize,72)),color:E.color,opacity:1}),U++,console.log("     \u26A0\uFE0F \uAE30\uBCF8 \uD3F0\uD2B8\uB85C \uC0C8 \uBB38\uC7A5 \uCD94\uAC00 \uC131\uACF5")}catch(B){console.error(`     \u274C\u274C \uC0C8 \uBB38\uC7A5 \uADF8\uB9AC\uAE30 \uC644\uC804 \uC2E4\uD328: "${E.text}"`,B)}}}console.log(`
\u{1F4CA} \uD398\uC774\uC9C0 ${y.pageNum} \uBB38\uC7A5 \uB2E8\uC704 \uC644\uC804 \uAD50\uCCB4 \uACB0\uACFC:`),console.log(`   \u{1F5D1}\uFE0F \uC0AD\uC81C\uB41C \uD14D\uC2A4\uD2B8 \uD56D\uBAA9: ${k.size}\uAC1C`),console.log(`   \u{1F4DD} \uC720\uC9C0\uB41C \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8: ${X}\uAC1C`),console.log(`   \u2795 \uC0C8\uB85C \uCD94\uAC00\uB41C \uBB38\uC7A5: ${U}\uAC1C`),console.log(`   \u2705 \uD398\uC774\uC9C0 ${y.pageNum} \uC7AC\uAD6C\uC131 \uC644\uB8CC`)}console.log(`
\u{1F389} \uC804\uCCB4 PDF \uBB38\uC7A5 \uB2E8\uC704 \uC644\uC804 \uAD50\uCCB4 \uC644\uB8CC!`),console.log(`\u{1F4CA} \uCD1D ${M}\uAC1C\uC758 \uBB38\uC7A5\uC774 \uC644\uC804\uD788 \uC0AD\uC81C\uB418\uACE0 \uC0C8\uB85C\uC6B4 \uB0B4\uC6A9\uC73C\uB85C \uAD50\uCCB4\uB428`),console.log(x?"\u2705 \uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC131\uACF5\uC801\uC73C\uB85C \uC0AC\uC6A9\uB428":"\u26A0\uFE0F \uAE30\uBCF8 \uD3F0\uD2B8\uB85C \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC2DC\uB3C4 (\uD55C\uAE00\uC774 \uAE68\uC9C8 \uC218 \uC788\uC74C)"),console.log("\uC0C8 PDF \uC800\uC7A5 \uC911...");let v=yield _.save({useObjectStreams:!1,addDefaultPage:!1,updateFieldAppearances:!1,objectsPerTick:50});try{let V=(yield n.PDFDocument.load(v)).getPageCount();console.log(`\u2705 \uC0C8 PDF \uAC80\uC99D \uC644\uB8CC: ${V}\uD398\uC774\uC9C0`)}catch(y){throw console.error("\uC0C8 PDF \uAC80\uC99D \uC2E4\uD328:",y),new Error("\uC0DD\uC131\uB41C PDF\uAC00 \uC190\uC0C1\uB418\uC5C8\uC2B5\uB2C8\uB2E4: "+y.message)}return console.log("PDF \uC644\uC804 \uC7AC\uC0DD\uC131 \uBC29\uC2DD \uD14D\uC2A4\uD2B8 \uC218\uC815 \uC644\uB8CC"),v.buffer}catch(n){throw console.error("PDF \uC644\uC804 \uC7AC\uC0DD\uC131 \uBC29\uC2DD \uC218\uC815 \uC911 \uC624\uB958:",n),n}})}analyzePdfContent(t,e){console.log("=== PDF \uB0B4\uC6A9 \uBD84\uC11D ===");let n=t.match(/\([^)]+\)/g)||[];console.log("\uBC1C\uACAC\uB41C \uAD04\uD638 \uD14D\uC2A4\uD2B8\uB4E4 (\uCC98\uC74C 20\uAC1C):",n.slice(0,20));let i=t.match(/<[0-9A-Fa-f]+>/g)||[];console.log("\uBC1C\uACAC\uB41C 16\uC9C4\uC218 \uD14D\uC2A4\uD2B8\uB4E4 (\uCC98\uC74C 10\uAC1C):",i.slice(0,10));let o=t.match(/[^a-zA-Z]\s*T[jJ]/g)||[];console.log("\uBC1C\uACAC\uB41C Tj/TJ \uD328\uD134\uB4E4 (\uCC98\uC74C 10\uAC1C):",o.slice(0,10));let l=t.indexOf(e);if(l!==-1){let _=t.substring(Math.max(0,l-100),l+100);console.log(`"${e}" \uBC1C\uACAC \uC704\uCE58 (${l}):`,_)}else console.log(`"${e}" \uD14D\uC2A4\uD2B8\uAC00 PDF\uC5D0 \uC5C6\uC74C`);let f=t.match(/stream\s*([\s\S]*?)\s*endstream/g)||[];console.log(`\uBC1C\uACAC\uB41C \uC2A4\uD2B8\uB9BC \uC218: ${f.length}`),f.length>0&&f[0]&&console.log("\uCCAB \uBC88\uC9F8 \uC2A4\uD2B8\uB9BC \uB0B4\uC6A9 (\uCC98\uC74C 200\uC790):",f[0].substring(0,200))}stringToHex(t){return Array.from(t).map(e=>e.charCodeAt(0).toString(16).padStart(2,"0")).join("").toUpperCase()}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}arrayBufferToString(t){let e=new Uint8Array(t),n="";for(let i=0;i<e.length;i++)n+=String.fromCharCode(e[i]);return n}stringToArrayBuffer(t){let e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i)&255;return e}modifyPageContentStream(t,e,n){return S(this,null,function*(){try{console.log(`\uCF58\uD150\uCE20 \uC2A4\uD2B8\uB9BC\uC5D0\uC11C "${e}"\uB97C "${n}"\uB85C \uAD50\uCCB4 \uC2DC\uC791`);let i=t.node.Contents();if(!i){console.warn("\uCF58\uD150\uCE20 \uC2A4\uD2B8\uB9BC\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let o=Array.isArray(i)?i:[i];for(let l=0;l<o.length;l++){let f=o[l];try{let _=f.decode(),x=new TextDecoder("latin1").decode(_);console.log(`\uC2A4\uD2B8\uB9BC ${l+1} \uB0B4\uC6A9 (\uCC98\uC74C 500\uC790):`,x.substring(0,500));let P=[{regex:new RegExp(`\\(${this.escapeRegExp(e)}\\)\\s*Tj`,"g"),replacement:`(${n}) Tj`},{regex:new RegExp(`\\(${this.escapeRegExp(e)}\\)\\s*TJ`,"g"),replacement:`(${n}) TJ`},{regex:new RegExp(`<${this.stringToHex(e)}>\\s*Tj`,"gi"),replacement:`<${this.stringToHex(n)}> Tj`},{regex:new RegExp(`\\[\\(${this.escapeRegExp(e)}\\)\\]\\s*TJ`,"g"),replacement:`[(${n})] TJ`}],M=!1;for(let v of P){let y=x;x=x.replace(v.regex,v.replacement),x!==y&&(console.log("\uD328\uD134 \uB9E4\uCE6D \uC131\uACF5:",v.regex.source),console.log("\uAD50\uCCB4 \uACB0\uACFC:",v.replacement),M=!0)}if(M){let v=new TextEncoder().encode(x);f.encode(v),console.log(`\uC2A4\uD2B8\uB9BC ${l+1} \uC218\uC815 \uC644\uB8CC`)}else console.warn(`\uC2A4\uD2B8\uB9BC ${l+1}\uC5D0\uC11C "${e}" \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C`)}catch(_){console.error(`\uC2A4\uD2B8\uB9BC ${l+1} \uCC98\uB9AC \uC911 \uC624\uB958:`,_)}}}catch(i){throw console.error("\uCF58\uD150\uCE20 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC911 \uC624\uB958:",i),i}})}loadPdfLib(){return S(this,null,function*(){try{return window.pdfjsLib||(console.log("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC911..."),yield new Promise((t,e)=>{let n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js",n.onload=()=>{console.log("PDF.js \uB85C\uB529 \uC644\uB8CC"),window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js",t(!0)},n.onerror=()=>{e(new Error("PDF.js \uB85C\uB529 \uC2E4\uD328"))},document.head.appendChild(n)})),window.PDFLib||(console.log("pdf-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC911..."),yield new Promise((t,e)=>{let n=document.createElement("script");n.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",n.onload=()=>{console.log("pdf-lib \uB85C\uB529 \uC644\uB8CC"),t(window.PDFLib)},n.onerror=()=>{e(new Error("pdf-lib \uB85C\uB529 \uC2E4\uD328"))},document.head.appendChild(n)})),console.log("\uBAA8\uB4E0 PDF \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC644\uB8CC"),window.PDFLib}catch(t){throw console.error("PDF \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC624\uB958:",t),t}})}downloadModifiedPdf(t,e){let n=new Blob([t],{type:"application/pdf"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=e.replace(".pdf","_modified.pdf"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),console.log("\uC218\uC815\uB41C PDF \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC:",o.download)}modifyAndDownloadPdf(t,e){return S(this,null,function*(){try{if(console.log("=== PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC2DC\uC791 ==="),console.log("\uD30C\uC77C\uBA85:",t.name),console.log("\uD30C\uC77C \uD06C\uAE30:",t.size,"\uBC14\uC774\uD2B8"),console.log("\uC218\uC815\uC0AC\uD56D \uAC1C\uC218:",e.length),e.forEach((o,l)=>{console.log(`\uC218\uC815\uC0AC\uD56D ${l+1}:`,{pageIndex:o.pageIndex,originalText:o.originalText.substring(0,100)+(o.originalText.length>100?"...":""),newText:o.newText.substring(0,100)+(o.newText.length>100?"...":""),position:{x:o.x,y:o.y,width:o.width,height:o.height}})}),e.length===0){console.warn("\uC218\uC815\uC0AC\uD56D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. PDF \uC218\uC815\uC744 \uC911\uB2E8\uD569\uB2C8\uB2E4.");return}console.log("\uD30C\uC77C\uC744 ArrayBuffer\uB85C \uBCC0\uD658 \uC911...");let n=yield this.fileToArrayBuffer(t);console.log("ArrayBuffer \uBCC0\uD658 \uC644\uB8CC, \uD06C\uAE30:",n.byteLength,"\uBC14\uC774\uD2B8"),console.log("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC2DC\uC791...");let i=yield this.modifyPdfTextStream(n,e);console.log("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC644\uB8CC"),console.log("\uC218\uC815\uB41C PDF \uB2E4\uC6B4\uB85C\uB4DC \uC2DC\uC791..."),this.downloadModifiedPdf(i,t.name),console.log("PDF \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC"),console.log("=== PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC885\uB8CC ===")}catch(n){throw console.error("=== PDF \uC218\uC815 \uBC0F \uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958 ==="),console.error("\uC624\uB958 \uB0B4\uC6A9:",n),console.error("\uC624\uB958 \uC2A4\uD0DD:",n instanceof Error?n.stack:"No stack trace"),n}})}modifyPdfTextStreamAndGetUrl(t,e){return S(this,null,function*(){try{if(console.log("=== PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC2DC\uC791 (\uC7AC\uB85C\uB4DC\uC6A9) ==="),console.log("\uD30C\uC77C\uBA85:",t.name),console.log("\uD30C\uC77C \uD06C\uAE30:",t.size,"\uBC14\uC774\uD2B8"),console.log("\uC218\uC815\uC0AC\uD56D \uAC1C\uC218:",e.length),e.length===0)return console.warn("\uC218\uC815\uC0AC\uD56D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. PDF \uC218\uC815\uC744 \uC911\uB2E8\uD569\uB2C8\uB2E4."),{success:!1,error:"\uC218\uC815\uC0AC\uD56D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."};console.log("\uD30C\uC77C\uC744 ArrayBuffer\uB85C \uBCC0\uD658 \uC911...");let n=yield this.fileToArrayBuffer(t);console.log("ArrayBuffer \uBCC0\uD658 \uC644\uB8CC, \uD06C\uAE30:",n.byteLength,"\uBC14\uC774\uD2B8"),console.log("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC2DC\uC791...");let i=yield this.modifyPdfTextStream(n,e);console.log("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC644\uB8CC"),console.log("\uC218\uC815\uB41C PDF URL \uC0DD\uC131 \uC911...");let o=new Blob([i],{type:"application/pdf"}),l=URL.createObjectURL(o);return console.log("PDF URL \uC0DD\uC131 \uC644\uB8CC"),console.log("=== PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC885\uB8CC (\uC7AC\uB85C\uB4DC\uC6A9) ==="),{success:!0,newPdfUrl:l}}catch(n){return console.error("=== PDF \uC218\uC815 \uC911 \uC624\uB958 (\uC7AC\uB85C\uB4DC\uC6A9) ==="),console.error("\uC624\uB958 \uB0B4\uC6A9:",n),console.error("\uC624\uB958 \uC2A4\uD0DD:",n instanceof Error?n.stack:"No stack trace"),{success:!1,error:n instanceof Error?n.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}}})}fileToArrayBuffer(t){return new Promise((e,n)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=()=>n(i.error),i.readAsArrayBuffer(t)})}groupTextItemsBySentence(t){if(t.length===0)return[];let e=t.filter(f=>f.text&&f.text.trim().length>0).sort((f,_)=>{let x=f.y,P=_.y;return Math.abs(x-P)<3?f.x-_.x:P-x}),n=[],i=[],o=null,l=null;for(let f of e){let _=f.y,x=f.fontSize;if((o===null||Math.abs(_-o)>Math.min(x*.6,8)||l!==null&&Math.abs(x-l)>2||i.length>0&&Math.abs(f.x-(i[i.length-1].x+100))>200)&&i.length>0){let M=this.calculateSingleLineBounds(i),v=i.map(y=>y.text).join(" ").trim();v.length>0&&(n.push(_e(le({},M),{items:[...i],text:v})),console.log(`  \u{1F4E6} \uBB38\uC7A5 \uADF8\uB8F9 \uC0DD\uC131: "${v}" (${i.length}\uAC1C \uD56D\uBAA9, Y=${M.y.toFixed(1)})`)),i=[]}i.push(f),o=_,l=x}if(i.length>0){let f=this.calculateSingleLineBounds(i),_=i.map(x=>x.text).join(" ").trim();_.length>0&&(n.push(_e(le({},f),{items:[...i],text:_})),console.log(`  \u{1F4E6} \uB9C8\uC9C0\uB9C9 \uBB38\uC7A5 \uADF8\uB8F9 \uC0DD\uC131: "${_}" (${i.length}\uAC1C \uD56D\uBAA9, Y=${f.y.toFixed(1)})`))}return console.log(`\uD55C \uC904 \uB2E8\uC704 \uBB38\uC7A5 \uADF8\uB8F9\uD654 \uC644\uB8CC: ${t.length}\uAC1C \uD56D\uBAA9 \u2192 ${n.length}\uAC1C \uBB38\uC7A5 \uADF8\uB8F9`),n}calculateSingleLineBounds(t){if(t.length===0)return{x:0,y:0,width:0,height:0};let e=Math.min(...t.map(l=>l.x)),n=Math.max(...t.map(l=>l.x+(l.width||0))),i=t.reduce((l,f)=>l+f.y,0)/t.length,o=Math.max(...t.map(l=>l.fontSize||12));return{x:e,y:i,width:n-e,height:o*1.2}}calculateSimilarity(t,e){let n=new Set(t.toLowerCase().split(/\s+/)),i=new Set(e.toLowerCase().split(/\s+/)),o=new Set([...n].filter(f=>i.has(f))),l=new Set([...n,...i]);return o.size/l.size}isItemInGroup(t,e){return Math.abs(t.x-e.x)<=5&&Math.abs(t.y-e.y)<=e.height&&t.x>=e.x&&t.x<=e.x+e.width}isItemInSentenceGroup(t,e){let n=Math.min(e.height*.3,5),i=5;if(!(Math.abs(t.y-e.y)<=n))return!1;let l=e.items.some(x=>Math.abs(t.x-x.x)<=i&&Math.abs(t.y-x.y)<=n&&t.text.trim()===x.text.trim()),f=t.x>=e.x-i&&t.x<=e.x+e.width+i&&e.text.includes(t.text.trim()),_=l||f;return _&&console.log(`      \u2713 \uBB38\uC7A5 \uADF8\uB8F9 \uD3EC\uD568 \uD655\uC778: "${t.text}" (x=${t.x}, y=${t.y})`),_}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ue=class r{constructor(){}deletePages(t,e){return S(this,null,function*(){try{let i=yield(yield fetch(t)).arrayBuffer(),o=yield PDFLib.PDFDocument.load(i),l=o.getPageCount();console.log(`\uC6D0\uBCF8 PDF \uD398\uC774\uC9C0 \uC218: ${l}`),console.log(`\uC0AD\uC81C\uD560 \uD398\uC774\uC9C0: ${e.join(", ")}`);let f=[...e].sort((M,v)=>v-M);for(let M of f)if(M<1||M>l)throw new Error(`\uD398\uC774\uC9C0 ${M}\uB294 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. (\uCD1D ${l}\uD398\uC774\uC9C0)`);for(let M of f){let v=M-1;o.removePage(v),console.log(`\uD398\uC774\uC9C0 ${M} \uC0AD\uC81C \uC644\uB8CC`)}let _=yield o.save(),x=new Blob([_],{type:"application/pdf"}),P=URL.createObjectURL(x);return console.log(`\uD398\uC774\uC9C0 \uC0AD\uC81C \uC644\uB8CC. \uB0A8\uC740 \uD398\uC774\uC9C0 \uC218: ${o.getPageCount()}`),P}catch(n){throw console.error("PDF \uD398\uC774\uC9C0 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:",n),n}})}getPageCount(t){return S(this,null,function*(){try{let n=yield(yield fetch(t)).arrayBuffer();return(yield PDFLib.PDFDocument.load(n)).getPageCount()}catch(e){throw console.error("PDF \uD398\uC774\uC9C0 \uC218 \uD655\uC778 \uC911 \uC624\uB958 \uBC1C\uC0DD:",e),e}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ye=class r{constructor(t){this.router=t;this.loadRecentFiles()}RECENT_FILES_KEY="ezReaderRecentFiles";recentFilesSubject=new et([]);recentFiles$=this.recentFilesSubject.asObservable();config={maxRecentFiles:10,supportedImageFormats:["image/jpeg","image/png","image/gif","image/webp"],supportedDocumentFormats:["application/pdf",".doc",".docx",".txt"],maxFileSize:50*1024*1024};loadRecentFiles(){let t=localStorage.getItem(this.RECENT_FILES_KEY),e=t?JSON.parse(t):[];return this.recentFilesSubject.next(e),e}saveRecentFiles(t){localStorage.setItem(this.RECENT_FILES_KEY,JSON.stringify(t)),this.recentFilesSubject.next(t)}addRecentFile(t,e,n){let i=new Date().toISOString(),o=this.recentFilesSubject.value,l=[{name:t,date:i,data:e,size:n},...o.filter(f=>f.name!==t)].slice(0,this.config.maxRecentFiles);this.saveRecentFiles(l)}deleteRecentFile(t){let n=this.recentFilesSubject.value.filter(i=>i.name!==t.name);this.saveRecentFiles(n)}handleFileUpload(t,e=!1){return new Promise(n=>{let i=document.createElement("input");i.type="file",i.multiple=e,i.accept=t.join(","),i.onchange=o=>{n(o.target.files)},i.onclick=()=>{setTimeout(()=>{i.files||n(null)},1e3)},i.click()})}processPdfFile(t){return S(this,null,function*(){return new Promise((e,n)=>{let i=new FileReader;i.onload=()=>{let o=i.result;this.addRecentFile(t.name,o,this.formatFileSize(t.size)),e(o)},i.onerror=()=>n(i.error),i.readAsDataURL(t)})})}openInViewer(t,e,n="desktop"){let i=n==="mobile"?"/mobile/viewer":"/viewer";this.router.navigate([i],{state:{pdfData:t,name:e}})}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(2))+" "+n[i]}handleFileDrop(t){t.preventDefault();let e=t.dataTransfer?.files;if(e&&e.length>0){let n=e[0];return n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf")?n:(alert("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),null)}return null}handleFileAction(t,e){return S(this,null,function*(){switch(t){case"open":e.length>0&&e[0].data&&this.openInViewer(e[0].data,e[0].name);break;case"share":console.log("\uACF5\uC720 \uAE30\uB2A5\uC774 \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");break;case"rename":console.log("\uC774\uB984\uBCC0\uACBD \uAE30\uB2A5\uC774 \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");break;case"copy":console.log("\uBCF5\uC81C \uAE30\uB2A5\uC774 \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");break;case"delete":console.log("\uC0AD\uC81C \uAE30\uB2A5\uC774 \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");break;default:console.warn("\uC54C \uC218 \uC5C6\uB294 \uC561\uC158:",t)}})}static \u0275fac=function(e){return new(e||r)(Le(ut))};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ke=class r{fontData=null;constructor(){this.loadKoreanFont()}loadKoreanFont(){return S(this,null,function*(){if(this.fontData)return!0;try{let t=yield fetch("/fonts/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("\uB85C\uCEEC \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("\uB85C\uCEEC \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://github.com/google/fonts/raw/main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("GitHub \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("GitHub \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://cdn.jsdelivr.net/gh/google/fonts@main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("jsdelivr \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("jsdelivr \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}return!1})}addTextToPdf(t,e){return S(this,null,function*(){try{yield this.waitForPDFLib(),yield this.loadKoreanFont();let n=yield t.arrayBuffer(),i=yield PDFLib.PDFDocument.load(n);typeof fontkit<"u"&&i.registerFontkit(fontkit);let l=i.getPages()[0],{width:f,height:_}=l.getSize();console.log(`PDF \uD398\uC774\uC9C0 \uD06C\uAE30: ${f} x ${_}`);for(let P of e)yield this.drawTextOnPage(l,P,f,_);let x=yield i.save();return new Blob([x],{type:"application/pdf"})}catch(n){throw console.error("PDF \uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uC2E4\uD328:",n),n}})}waitForPDFLib(){return S(this,null,function*(){return new Promise((t,e)=>{if(typeof PDFLib<"u"&&typeof fontkit<"u"){t(PDFLib);return}let n=0,i=50,o=setInterval(()=>{n++,typeof PDFLib<"u"&&typeof fontkit<"u"?(clearInterval(o),t(PDFLib)):n>=i&&(clearInterval(o),e(new Error("PDF-lib \uB610\uB294 fontkit \uB85C\uB4DC \uC2E4\uD328")))},100)})})}drawTextOnPage(t,e,n,i){return S(this,null,function*(){try{console.log(`\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC2DC\uC791: "${e.text}"`),console.log(`\uC5D0\uB514\uD130 \uC704\uCE58 (PDF \uC88C\uD45C): x=${e.x}, y=${e.y}, width=${e.width}, height=${e.height}`),console.log(`\uD398\uC774\uC9C0 \uD06C\uAE30: ${n} x ${i}`);let o=Math.max(0,Math.min(e.x,n-10)),l=Math.max(e.fontSize,Math.min(i-e.y,i-10));console.log(`\uCD5C\uC885 PDF \uC88C\uD45C: x=${o}, y=${l}`);let f=yield this.getFont(t.doc,e.fontFamily,e.text),_=this.hexToRgb(e.color),x=PDFLib.rgb(_.r/255,_.g/255,_.b/255);console.log(`\uD3F0\uD2B8 \uD06C\uAE30: ${e.fontSize}, \uC0C9\uC0C1: ${e.color}`);let P=this.wrapText(e.text,e.width,e.fontSize);console.log(`\uD14D\uC2A4\uD2B8 \uC904 \uC218: ${P.length}`);for(let M=0;M<P.length;M++){let v=l-M*e.fontSize*1.2;v>0&&v<i&&(console.log(`\uC904 ${M+1} \uADF8\uB9AC\uAE30: "${P[M]}" at (${o}, ${v})`),t.drawText(P[M],{x:o,y:v,size:e.fontSize,font:f,color:x}))}console.log(`\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC644\uB8CC: "${e.text}"`)}catch(o){throw console.error("\uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC2E4\uD328:",o),o}})}wrapText(t,e,n){let i=t.split(" "),o=[],l="",f=n*.6,_=Math.floor(e/f);for(let x of i){let P=l+(l?" ":"")+x;P.length<=_?l=P:(l&&o.push(l),l=x)}return l&&o.push(l),o.length>0?o:[t]}getFont(t,e,n=""){return S(this,null,function*(){if(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(n)&&this.fontData)try{return console.log("\uD55C\uAE00 \uD14D\uC2A4\uD2B8 \uAC10\uC9C0, \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uC0AC\uC6A9"),yield t.embedFont(this.fontData)}catch(o){console.warn("\uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC2E4\uD328, \uAE30\uBCF8 \uD3F0\uD2B8 \uC0AC\uC6A9:",o)}switch(e.toLowerCase()){case"helvetica":return t.embedFont(PDFLib.StandardFonts.Helvetica);case"helvetica-bold":return t.embedFont(PDFLib.StandardFonts.HelveticaBold);case"times-roman":case"times new roman":return t.embedFont(PDFLib.StandardFonts.TimesRoman);case"times-bold":return t.embedFont(PDFLib.StandardFonts.TimesRomanBold);case"courier":case"courier new":return t.embedFont(PDFLib.StandardFonts.Courier);case"courier-bold":return t.embedFont(PDFLib.StandardFonts.CourierBold);default:return t.embedFont(PDFLib.StandardFonts.Helvetica)}})}hexToRgb(t){t=t.replace("#","");let e=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return{r:e,g:n,b:i}}downloadModifiedPdf(t,e="modified-document.pdf"){return S(this,null,function*(){let n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var qe=class r{fontData=null;constructor(){this.loadKoreanFont()}loadKoreanFont(){return S(this,null,function*(){if(this.fontData)return!0;try{let t=yield fetch("/fonts/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 \uB85C\uCEEC \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 \uB85C\uCEEC \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://github.com/google/fonts/raw/main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 GitHub \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 GitHub \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://cdn.jsdelivr.net/gh/google/fonts@main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 CDN \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 CDN \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}return console.warn("\uC6CC\uD130\uB9C8\uD06C\uC6A9 \uBAA8\uB4E0 \uD55C\uAE00 \uD3F0\uD2B8 \uB85C\uB4DC \uC2DC\uB3C4 \uC2E4\uD328"),!1})}embedKoreanFont(t){return S(this,null,function*(){try{if(yield this.loadKoreanFont(),this.fontData){window.fontkit||(console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 fontkit \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC911..."),yield new Promise((n,i)=>{let o=document.createElement("script");o.src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js",o.onload=()=>{console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 fontkit \uB85C\uB529 \uC644\uB8CC"),n(!0)},o.onerror=()=>{i(new Error("\uC6CC\uD130\uB9C8\uD06C\uC6A9 fontkit \uB85C\uB529 \uC2E4\uD328"))},document.head.appendChild(o)})),t.registerFontkit(window.fontkit);let e=yield t.embedFont(new Uint8Array(this.fontData));return console.log("\uC6CC\uD130\uB9C8\uD06C\uC6A9 \uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC131\uACF5"),e}}catch(e){console.error("\uC6CC\uD130\uB9C8\uD06C\uC6A9 \uD55C\uAE00 \uD3F0\uD2B8 \uC784\uBCA0\uB4DC \uC2E4\uD328:",e)}return null})}applyWatermarkToPdf(t,e){return S(this,null,function*(){try{let n=yield PDFLib.PDFDocument.load(t),i=n.getPages();return e.isImage&&e.imageFile?yield this.applyImageWatermark(n,i,e):yield this.applyTextWatermark(n,i,e),yield n.save()}catch(n){throw console.error("\uC6CC\uD130\uB9C8\uD06C \uC801\uC6A9 \uC911 \uC624\uB958 \uBC1C\uC0DD:",n),n}})}applyTextWatermark(t,e,n){return S(this,null,function*(){let i;if(this.containsKorean(n.text)){if(i=yield this.embedKoreanFont(t),!i)throw new Error("\uD55C\uAE00 \uC6CC\uD130\uB9C8\uD06C\uB97C \uC704\uD55C \uD3F0\uD2B8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC7A0\uC2DC \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.")}else i=yield t.embedFont(PDFLib.StandardFonts.Helvetica);for(let o of e){let{width:l,height:f}=o.getSize(),{x:_,y:x}=this.calculatePosition(n.position,l,f,n.fontSize),P=this.hexToRgb(n.color);o.drawText(n.text,{x:_,y:x,size:n.fontSize,font:i,color:PDFLib.rgb(P.r/255,P.g/255,P.b/255),opacity:n.opacity,rotate:PDFLib.degrees(n.rotation)})}})}applyImageWatermark(t,e,n){return S(this,null,function*(){if(!n.imageFile)return;let i=yield this.fileToArrayBuffer(n.imageFile),o;if(n.imageFile.type==="image/png")o=yield t.embedPng(i);else if(n.imageFile.type==="image/jpeg"||n.imageFile.type==="image/jpg")o=yield t.embedJpg(i);else throw new Error("\uC9C0\uC6D0\uB418\uC9C0 \uC54A\uB294 \uC774\uBBF8\uC9C0 \uD615\uC2DD\uC785\uB2C8\uB2E4. PNG \uB610\uB294 JPG \uD30C\uC77C\uC744 \uC0AC\uC6A9\uD574\uC8FC\uC138\uC694.");let l=o.scale(.5);for(let f of e){let{width:_,height:x}=f.getSize(),{x:P,y:M}=this.calculatePosition(n.position,_,x,l.height,l.width);f.drawImage(o,{x:P,y:M,width:l.width,height:l.height,opacity:n.opacity,rotate:PDFLib.degrees(n.rotation)})}})}calculatePosition(t,e,n,i,o=0){let l=0,f=0;switch(t){case"center":l=(e-o)/2,f=(n-i)/2;break;case"top-left":l=50,f=n-i-50;break;case"top-right":l=e-o-50,f=n-i-50;break;case"bottom-left":l=50,f=50;break;case"bottom-right":l=e-o-50,f=50;break;default:l=(e-o)/2,f=(n-i)/2}return{x:l,y:f}}hexToRgb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:128,g:128,b:128}}fileToArrayBuffer(t){return new Promise((e,n)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=n,i.readAsArrayBuffer(t)})}containsKorean(t){return/[\u3131-\u3163\uAC00-\uD7AF]/.test(t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};function Zn(r,t){r&1&&(a(0,"div",5)(1,"div",6),z(),a(2,"svg",7),C(3,"rect",8),a(4,"text",9),g(5,"PDF"),s()(),me(),a(6,"p"),g(7,"PDF \uD30C\uC77C\uC744 \uC5EC\uAE30\uC5D0 \uB4DC\uB86D\uD558\uC138\uC694"),s()()())}function ei(r,t){if(r&1){let e=w();a(0,"tr")(1,"td")(2,"span",18)(3,"span",19),z(),a(4,"svg",20),C(5,"rect",21),a(6,"text",22),g(7,"PDF"),s()()(),me(),a(8,"span",23),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onFileNameClick(i))}),g(9),s()()(),a(10,"td"),g(11),s(),a(12,"td"),g(13),s(),a(14,"td")(15,"button",24),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.deleteFile.emit(i))}),z(),a(16,"svg",25),C(17,"path",26),s()()()()}if(r&2){let e=t.$implicit;c(9),F(e.name),c(2),F(e.lastModified),c(2),F(e.size)}}function ti(r,t){if(r&1){let e=w();a(0,"div",10)(1,"table",11)(2,"thead")(3,"tr")(4,"th",12),g(5,"\uC774\uB984"),s(),a(6,"th",13),g(7,"\uB9C8\uC9C0\uB9C9 \uC218\uC815\uC2DC\uAC04"),s(),a(8,"th",14),g(9,"\uD06C\uAE30"),s(),C(10,"th",15),s()(),a(11,"tbody"),b(12,ei,18,3,"tr",16),s()(),a(13,"input",17),h("change",function(i){m(e);let o=d();return u(o.onRecentFileInputChange(i))}),s()()}if(r&2){let e=d();c(12),p("ngForOf",e.files)}}function ni(r,t){r&1&&(a(0,"div",27),z(),a(1,"svg",28),C(2,"path",29),s(),me(),a(3,"p"),g(4,"\uCD5C\uADFC \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),s(),a(5,"span"),g(6,"PDF \uD30C\uC77C\uC744 \uC5F4\uBA74 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),s()())}var Xe=class r{files=[];deleteFile=new O;openFile=new O;selectedRecentFile=null;isDragOver=!1;dragCounter=0;onFileNameClick(t){this.selectedRecentFile=t;let e=document.getElementById("recent-file-input");e&&(e.value="",e.click())}onRecentFileInputChange(t){let e=t.target;if(e.files&&e.files.length>0){let n=e.files[0];this.openFile.emit(n)}this.selectedRecentFile=null}onDragOver(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer?.types.includes("Files")&&(t.dataTransfer.dropEffect="copy")}onDragEnter(t){t.preventDefault(),t.stopPropagation(),this.dragCounter++,t.dataTransfer?.types.includes("Files")&&(this.isDragOver=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dragCounter--,this.dragCounter<=0&&(this.isDragOver=!1,this.dragCounter=0)}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1,this.dragCounter=0;let e=t.dataTransfer?.files;if(e&&e.length>0){let n=e[0];n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf")?(console.log("\uCD5C\uADFC\uD30C\uC77C \uC601\uC5ED\uC5D0\uC11C \uB4DC\uB798\uADF8 \uC564 \uB4DC\uB86D\uC73C\uB85C PDF \uD30C\uC77C \uC120\uD0DD:",n.name),this.openFile.emit(n)):alert("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-recent-files"]],inputs:{files:"files"},outputs:{deleteFile:"deleteFile",openFile:"openFile"},decls:7,vars:5,consts:[["noFiles",""],[1,"recent-files-panel",3,"dragover","dragenter","dragleave","drop"],[1,"recent-title"],["class","drag-overlay",4,"ngIf"],["class","recent-table-wrap",4,"ngIf","ngIfElse"],[1,"drag-overlay"],[1,"drag-message"],["width","48","height","48","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","3","fill","#007acc"],["x","12","y","17","text-anchor","middle","fill","white","font-size","8","font-family","Arial","font-weight","bold"],[1,"recent-table-wrap"],[1,"recent-files-table"],[2,"width","50%"],[2,"width","30%"],[2,"width","15%"],[2,"width","5%"],[4,"ngFor","ngForOf"],["id","recent-file-input","type","file","accept","application/pdf",2,"display","none",3,"change"],[1,"file-name-cell"],[1,"pdf-svg"],["width","22","height","22","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","3","fill","#F44336"],["x","12","y","17","text-anchor","middle","fill","white","font-size","10","font-family","Arial","font-weight","bold"],[1,"file-name-text",2,"cursor","pointer","color","#1976d2",3,"click"],["title","\uC0AD\uC81C",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6 7h12M9 7V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m2 0v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7h12z","stroke","#888","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"no-files-message"],["width","64","height","64","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z","fill","#ddd"]],template:function(e,n){if(e&1){let i=w();a(0,"div",1),h("dragover",function(l){return m(i),u(n.onDragOver(l))})("dragenter",function(l){return m(i),u(n.onDragEnter(l))})("dragleave",function(l){return m(i),u(n.onDragLeave(l))})("drop",function(l){return m(i),u(n.onDrop(l))}),a(1,"div",2),g(2,"\uCD5C\uADFC\uD30C\uC77C"),s(),b(3,Zn,8,0,"div",3)(4,ti,14,1,"div",4)(5,ni,7,0,"ng-template",null,0,ct),s()}if(e&2){let i=Be(6);T("drag-over",n.isDragOver),c(3),p("ngIf",n.isDragOver),c(),p("ngIf",n.files.length>0)("ngIfElse",i)}},dependencies:[Te,Q,Y],styles:['@charset "UTF-8";.recent-files-panel[_ngcontent-%COMP%]{padding:32px 24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000008;height:100%;display:flex;flex-direction:column;border:2px dashed #ddd;transition:all .3s ease}.recent-files-panel.drag-over[_ngcontent-%COMP%]{border-color:#007acc;background:#007acc0d}.recent-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#222;margin-bottom:18px;flex-shrink:0}.recent-table-wrap[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;min-height:0;max-height:calc(100vh - 400px)}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 768px){.recent-table-wrap[_ngcontent-%COMP%]{max-height:calc(100vh - 350px)}}@media (max-width: 480px){.recent-table-wrap[_ngcontent-%COMP%]{max-height:calc(100vh - 300px)}}.recent-files-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;background:#fff}.recent-files-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#888;font-weight:500;font-size:15px;background:#fafafa;border-bottom:2px solid #f0f0f0;padding:12px 8px;text-align:left}.recent-files-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#222;font-size:15px;padding:12px 8px;border-bottom:1px solid #f5f5f5;vertical-align:middle}.file-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center}.pdf-svg[_ngcontent-%COMP%]{margin-right:10px;display:flex;align-items:center}.file-name-text[_ngcontent-%COMP%]{font-weight:500;color:#222}.delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:2px;border-radius:4px;transition:background .15s}.delete-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.no-files-message[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#666;padding:40px 20px}.no-files-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-files-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 8px;color:#333}.no-files-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.recent-files-panel.drag-over[_ngcontent-%COMP%]{border:2px dashed #007acc;background:#007acc0d;position:relative}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acc1a;display:flex;align-items:center;justify-content:center;border-radius:12px;z-index:1000}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#007acc}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:12px}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0}']})};var oi=["drawingCanvas"];function ri(r,t){if(r&1){let e=w();a(0,"div",6),h("mousedown",function(i){m(e);let o=d();return u(o.onToolbarDragStart(i))}),a(1,"div",7),g(2,"\u22EE\u22EE"),s()()}}function ai(r,t){if(r&1){let e=w();a(0,"button",20),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.drawingConfig.color=i.value)}),s()}if(r&2){let e=t.$implicit,n=d(2);J("background-color",e.value),T("active",n.drawingConfig.color===e.value)}}function si(r,t){if(r&1){let e=w();a(0,"div",8)(1,"div",9),b(2,ai,1,4,"button",10),s(),a(3,"div",11)(4,"input",12),W("ngModelChange",function(i){m(e);let o=d();return H(o.drawingConfig.lineWidth,i)||(o.drawingConfig.lineWidth=i),u(i)}),s(),a(5,"span",13),g(6),s()(),a(7,"div",14)(8,"button",15),h("click",function(){m(e);let i=d();return u(i.undoLastStroke())}),g(9," \u21B6 "),s(),a(10,"button",16),h("click",function(){m(e);let i=d();return u(i.clearDrawing())}),g(11," \u2715 "),s()(),a(12,"div",17)(13,"button",18),h("click",function(){m(e);let i=d();return u(i.applyDrawing())}),g(14,"\uC801\uC6A9"),s(),a(15,"button",19),h("click",function(){m(e);let i=d();return u(i.exitDrawingMode())}),g(16,"\uC644\uB8CC"),s()()()}if(r&2){let e=d();c(2),p("ngForOf",e.colorOptions),c(2),G("ngModel",e.drawingConfig.lineWidth),c(2),F(e.drawingConfig.lineWidth),c(2),p("disabled",e.drawnPaths.length===0)}}var Je=class r{visible=!1;isDrawingMode=!1;pdfSrc="";drawingApplied=new O;drawingModeChanged=new O;drawingModeChange=new O;strokeCompleted=new O;canvasRef;canvas;ctx;isDrawing=!1;currentPath=[];drawnPaths=[];drawingConfig={color:"#e74c3c",lineWidth:3,opacity:1};colorOptions=[{label:"\uBE68\uAC15",value:"#e74c3c"},{label:"\uD30C\uB791",value:"#3498db"},{label:"\uCD08\uB85D",value:"#2ecc71"},{label:"\uB178\uB791",value:"#f1c40f"},{label:"\uBCF4\uB77C",value:"#9b59b6"},{label:"\uC8FC\uD669",value:"#e67e22"},{label:"\uAC80\uC815",value:"#2c3e50"},{label:"\uD68C\uC0C9",value:"#95a5a6"},{label:"\uD558\uB298",value:"#1abc9c"},{label:"\uBD84\uD64D",value:"#e91e63"}];boundMouseDown;boundMouseMove;boundMouseUp;boundTouchStart;boundTouchMove;boundTouchEnd;isDraggingToolbar=!1;toolbarDragOffset={x:0,y:0};toolbarElement;constructor(){}ngOnChanges(t){t.visible&&t.visible.currentValue&&setTimeout(()=>{this.canvasRef&&this.initializeCanvas()},0),t.isDrawingMode&&(t.isDrawingMode.currentValue?(console.log("\u{1F3A8} Enabling drawing mode"),setTimeout(()=>{this.enableDrawingMode()},100)):(console.log("\u{1F6AB} Disabling drawing mode"),this.disableDrawingMode()))}ngAfterViewInit(){setTimeout(()=>{this.initializeCanvas()},100),this.waitForPdfAndResize(),window.addEventListener("resize",this.onWindowResize.bind(this))}ngOnDestroy(){this.removeEventListeners(),window.removeEventListener("resize",this.onWindowResize.bind(this))}waitForPdfAndResize(){let t=()=>{document.querySelector(".page")&&this.canvas?(this.resizeCanvas(),this.observePdfChanges()):setTimeout(t,100)};setTimeout(t,300)}observePdfChanges(){let t=document.querySelector("ngx-extended-pdf-viewer"),e=document.querySelector(".viewer"),n=document.querySelector(".pdfViewer");e&&new MutationObserver(()=>{setTimeout(()=>this.resizeCanvas(),100)}).observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),n&&n.addEventListener("scroll",()=>{setTimeout(()=>this.resizeCanvas(),50)}),t&&new ResizeObserver(()=>{setTimeout(()=>this.resizeCanvas(),100)}).observe(t),document.addEventListener("wheel",l=>{(l.ctrlKey||l.metaKey)&&setTimeout(()=>this.resizeCanvas(),200)});let i=new MutationObserver(()=>{document.querySelectorAll(".page").length>0&&setTimeout(()=>this.resizeCanvas(),100)}),o=document.querySelector(".pdfViewer");o&&i.observe(o,{childList:!0,subtree:!0})}onWindowResize(){setTimeout(()=>{this.resizeCanvas()},100)}initializeCanvas(){this.canvasRef&&(this.canvas=this.canvasRef.nativeElement,this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),this.setupCanvas())}resizeCanvas(){if(!this.canvas||!this.ctx)return;let t=document.querySelector(".page");if(!t)return;let e=t.getBoundingClientRect();this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.style.left=`${e.left}px`,this.canvas.style.top=`${e.top}px`,this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`,this.setupCanvas(),this.redrawPaths()}setupCanvas(){this.ctx.lineCap="round",this.ctx.lineJoin="round"}addEventListeners(){if(!this.canvas){console.log("\u274C Canvas not found when adding event listeners");return}console.log("\u{1F3AF} Adding event listeners to canvas"),this.boundMouseDown=this.onMouseDown.bind(this),this.boundMouseMove=this.onMouseMove.bind(this),this.boundMouseUp=this.onMouseUp.bind(this),this.boundTouchStart=this.onTouchStart.bind(this),this.boundTouchMove=this.onTouchMove.bind(this),this.boundTouchEnd=this.onTouchEnd.bind(this),this.canvas.addEventListener("mousedown",this.boundMouseDown,{passive:!1}),this.canvas.addEventListener("mousemove",this.boundMouseMove,{passive:!1}),this.canvas.addEventListener("mouseup",this.boundMouseUp,{passive:!1}),this.canvas.addEventListener("mouseleave",this.boundMouseUp,{passive:!1}),this.canvas.addEventListener("touchstart",this.boundTouchStart,{passive:!1}),this.canvas.addEventListener("touchmove",this.boundTouchMove,{passive:!1}),this.canvas.addEventListener("touchend",this.boundTouchEnd,{passive:!1}),console.log("\u2705 Event listeners added successfully")}removeEventListeners(){this.canvas&&this.boundMouseDown&&(this.canvas.removeEventListener("mousedown",this.boundMouseDown),this.canvas.removeEventListener("mousemove",this.boundMouseMove),this.canvas.removeEventListener("mouseup",this.boundMouseUp),this.canvas.removeEventListener("mouseleave",this.boundMouseUp),this.canvas.removeEventListener("touchstart",this.boundTouchStart),this.canvas.removeEventListener("touchmove",this.boundTouchMove),this.canvas.removeEventListener("touchend",this.boundTouchEnd))}getEventPos(t){if(!this.canvas)return{x:0,y:0};let e=this.canvas.getBoundingClientRect(),n,i;if(t instanceof MouseEvent)n=t.clientX,i=t.clientY;else{let o=t.touches[0]||t.changedTouches[0];n=o.clientX,i=o.clientY}return{x:n-e.left,y:i-e.top}}onMouseDown(t){if(console.log("\u{1F5B1}\uFE0F Mouse down detected, isDrawingMode:",this.isDrawingMode),!this.isDrawingMode)return;let e=this.getEventPos(t);console.log("\u{1F4CD} Mouse position:",e),this.startDrawing(e)}onMouseMove(t){this.isDrawingMode&&this.isDrawing&&this.draw(this.getEventPos(t))}onMouseUp(t){console.log("\u{1F5B1}\uFE0F Mouse up detected, isDrawingMode:",this.isDrawingMode),this.isDrawingMode&&this.stopDrawing()}onTouchStart(t){this.isDrawingMode&&(t.preventDefault(),this.startDrawing(this.getEventPos(t)))}onTouchMove(t){this.isDrawingMode&&(t.preventDefault(),this.isDrawing&&this.draw(this.getEventPos(t)))}onTouchEnd(t){this.isDrawingMode&&(t.preventDefault(),this.stopDrawing())}startDrawing(t){console.log("\u270F\uFE0F Starting drawing at:",t),this.isDrawing=!0,this.currentPath=[t],this.ctx.globalAlpha=this.drawingConfig.opacity,this.ctx.strokeStyle=this.drawingConfig.color,this.ctx.lineWidth=this.drawingConfig.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y)}draw(t){this.isDrawing&&(this.currentPath.push(t),this.ctx.lineTo(t.x,t.y),this.ctx.stroke())}stopDrawing(){if(this.isDrawing){if(this.isDrawing=!1,this.currentPath.length>0){let t={points:[...this.currentPath],config:le({},this.drawingConfig)};this.drawnPaths.push(t),this.strokeCompleted.emit(t)}this.currentPath=[]}}redrawPaths(){if(this.ctx){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let t of this.drawnPaths)if(t.points.length!==0){this.ctx.globalAlpha=t.config.opacity,this.ctx.strokeStyle=t.config.color,this.ctx.lineWidth=t.config.lineWidth,this.ctx.beginPath(),this.ctx.moveTo(t.points[0].x,t.points[0].y);for(let e=1;e<t.points.length;e++)this.ctx.lineTo(t.points[e].x,t.points[e].y);this.ctx.stroke()}}}undoLastStroke(){this.drawnPaths.pop(),this.redrawPaths()}clearDrawing(){this.drawnPaths=[],this.currentPath=[],this.isDrawing=!1,this.ctx&&this.canvas&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.removeEventListeners()}applyDrawing(){return S(this,null,function*(){if(this.drawnPaths.length===0){console.log("No drawing paths to apply"),this.exitDrawingMode();return}try{console.log("Starting to apply drawing with paths:",this.drawnPaths.length);let{Ez_PenDrawingService:t}=yield import("./chunk-5XYC4X6S.js"),e=new t,n=this.pdfSrc;if(!n){console.log("pdfSrc not available, trying alternative methods...");let x=document.querySelector("app-main");x&&x.pdfSrc&&(n=x.pdfSrc,console.log("Found PDF URL from app component:",n))}if(!n){let x=document.querySelector("ngx-extended-pdf-viewer");x&&x.src&&(n=x.src,console.log("Found PDF URL from ngx-extended-pdf-viewer:",n))}if(n||window.PDFViewerApplication&&window.PDFViewerApplication.url&&(n=window.PDFViewerApplication.url,console.log("Found PDF URL from PDFViewerApplication:",n)),n||window.currentPdfUrl&&(n=window.currentPdfUrl,console.log("Found PDF URL from global variable:",n)),!n){console.error("PDF URL not found through any method"),alert("PDF\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBA3C\uC800 PDF\uB97C \uB85C\uB4DC\uD574\uC8FC\uC138\uC694.");return}console.log("Using PDF URL:",n);let i=yield fetch(n);if(!i.ok)throw new Error(`Failed to fetch PDF: ${i.status} ${i.statusText}`);let o=new Uint8Array(yield i.arrayBuffer());console.log("PDF loaded, size:",o.length,"bytes");let l=yield e.applyDrawingToPdf(o,this.drawnPaths,0,{width:this.canvas.width,height:this.canvas.height});console.log("Drawing applied successfully to PDF");let f=new Blob([new Uint8Array(l)],{type:"application/pdf"}),_=URL.createObjectURL(f);window.currentPdfUrl=_,console.log("\uC0C8\uB85C\uC6B4 PDF URL \uC0DD\uC131:",_),yield this.forceRefreshPdfViewer(_),this.clearDrawing(),this.drawingApplied.emit(),this.exitDrawingMode(),console.log("PDF drawing application completed successfully")}catch(t){console.error("Error applying drawing to PDF:",t);let e=t instanceof Error?t.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4";alert("\uADF8\uB9AC\uAE30\uB97C PDF\uC5D0 \uC801\uC6A9\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: "+e)}})}forceRefreshPdfViewer(t){return S(this,null,function*(){console.log("\u{1F504} PDF \uBDF0\uC5B4 \uAC15\uC81C \uC0C8\uB85C\uACE0\uCE68 \uC2DC\uC791");try{let e=document.querySelector("ngx-extended-pdf-viewer");e&&(console.log("\u{1F4C4} PDF \uBDF0\uC5B4 \uBC1C\uACAC, \uC644\uC804 \uC7AC\uB85C\uB4DC \uC911..."),e.src="",yield new Promise(i=>setTimeout(i,200)),window.pdfjs&&window.pdfjs.getDocument&&console.log("\u{1F5D1}\uFE0F PDF.js \uCE90\uC2DC \uD074\uB9AC\uC5B4 \uC2DC\uB3C4"),e.src=t,e.reload&&typeof e.reload=="function"&&(yield new Promise(i=>setTimeout(i,300)),e.reload()),console.log("\u2705 PDF \uBDF0\uC5B4 \uC644\uC804 \uC7AC\uB85C\uB4DC \uC644\uB8CC"));let n=document.querySelector("app-main");if(n){console.log("\u{1F3AF} App \uCEF4\uD3EC\uB10C\uD2B8 \uBC1C\uACAC, \uC5C5\uB370\uC774\uD2B8 \uC2DC\uB3C4 \uC911...");let i=n.__ngContext__?.[8];i&&i.pdfSrc!==void 0?(i.pdfSrc&&i.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(i.pdfSrc),i.pdfSrc=t,i.cdr&&typeof i.cdr.detectChanges=="function"&&i.cdr.detectChanges(),i.ngZone&&typeof i.ngZone.run=="function"&&i.ngZone.run(()=>{console.log("\u{1F504} Angular Zone \uAC15\uC81C \uC2E4\uD589")}),console.log("\u2705 App \uCEF4\uD3EC\uB10C\uD2B8 pdfSrc \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC")):console.log("\u274C App \uCEF4\uD3EC\uB10C\uD2B8 \uC778\uC2A4\uD134\uC2A4\uC5D0 \uC811\uADFC\uD560 \uC218 \uC5C6\uC74C")}window.dispatchEvent(new CustomEvent("pdf-updated",{detail:{newUrl:t}})),setTimeout(()=>{let i=document.querySelectorAll(".page");console.log(`\u{1F504} ${i.length}\uAC1C \uD398\uC774\uC9C0 \uC694\uC18C \uBC1C\uACAC, \uAC15\uC81C \uC0C8\uB85C\uACE0\uCE68 \uC2DC\uB3C4`),i.forEach((o,l)=>{o.dispatchEvent(new Event("DOMContentLoaded")),console.log(`\u{1F4C4} \uD398\uC774\uC9C0 ${l+1} \uC0C8\uB85C\uACE0\uCE68 \uC774\uBCA4\uD2B8 \uBC1C\uC1A1`)})},500),console.log("\u{1F4E1} PDF \uC5C5\uB370\uC774\uD2B8 \uC774\uBCA4\uD2B8 \uBC1C\uC1A1 \uC644\uB8CC")}catch(e){console.error("\u274C PDF \uBDF0\uC5B4 \uC0C8\uB85C\uACE0\uCE68 \uC911 \uC624\uB958:",e)}})}exitDrawingMode(){this.drawingModeChanged.emit(!1),this.clearDrawing(),this.removeAllTooltips(),this.disableOverlayInteractions(),this.removeEventListeners()}removeAllTooltips(){document.querySelectorAll("[title]").forEach(n=>{n.closest("app-pen-drawing")&&n.removeAttribute("title")}),document.querySelectorAll('.tooltip, .bs-tooltip-auto, [role="tooltip"]').forEach(n=>n.remove())}enableDrawingMode(){console.log("\u{1F3A8} Enabling drawing mode"),this.canvasRef&&this.initializeCanvas();let t=document.querySelector(".pen-drawing-overlay");t&&t.classList.add("drawing-mode"),setTimeout(()=>{this.canvas&&(this.canvas.classList.add("active"),this.canvas.style.pointerEvents="auto",this.canvas.style.zIndex="1500"),this.addEventListeners()},200)}disableDrawingMode(){console.log("\u{1F6AB} Disabling drawing mode"),this.removeEventListeners(),this.removeAllTooltips(),this.disableOverlayInteractions()}disableOverlayInteractions(){let t=document.querySelector(".pen-drawing-overlay");t&&(t.style.pointerEvents="none",t.classList.remove("drawing-mode")),this.canvas&&(this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="10",this.canvas.classList.remove("active"))}onToolbarDragStart(t){if(console.log("\u{1F527} Toolbar drag start"),this.isDraggingToolbar=!0,this.toolbarElement=document.querySelector(".drawing-toolbar"),!this.toolbarElement){console.log("\u274C Toolbar element not found");return}let e=document.querySelector(".toolbar-drag-handle");e&&e.classList.add("dragging"),this.toolbarElement.classList.add("dragging");let n=this.toolbarElement.getBoundingClientRect();this.toolbarDragOffset.x=t.clientX-n.left,this.toolbarDragOffset.y=t.clientY-n.top,console.log("\u{1F4CD} Initial offset:",this.toolbarDragOffset);let i=l=>this.onToolbarDrag(l),o=l=>{this.onToolbarDragEnd(l),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",o),t.preventDefault(),t.stopPropagation()}onToolbarDrag(t){if(!this.isDraggingToolbar||!this.toolbarElement)return;let e=t.clientX-this.toolbarDragOffset.x,n=t.clientY-this.toolbarDragOffset.y,i=window.innerWidth-this.toolbarElement.offsetWidth,o=window.innerHeight-this.toolbarElement.offsetHeight,l=Math.max(50,Math.min(e,i)),f=Math.max(10,Math.min(n,o));this.toolbarElement.style.left=`${l}px`,this.toolbarElement.style.top=`${f}px`;let _=document.querySelector(".toolbar-drag-handle");_&&(_.style.left=`${l-40}px`,_.style.top=`${f}px`),console.log(`\u{1F69A} Moving to: ${l}, ${f}`),t.preventDefault()}onToolbarDragEnd(t){console.log("\u{1F527} Toolbar drag end"),this.isDraggingToolbar=!1;let e=document.querySelector(".toolbar-drag-handle");e&&e.classList.remove("dragging"),this.toolbarElement&&this.toolbarElement.classList.remove("dragging"),this.toolbarElement=void 0,t.preventDefault()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-pen-drawing"]],viewQuery:function(e,n){if(e&1&&xe(oi,5),e&2){let i;Ce(i=be())&&(n.canvasRef=i.first)}},inputs:{visible:"visible",isDrawingMode:"isDrawingMode",pdfSrc:"pdfSrc"},outputs:{drawingApplied:"drawingApplied",drawingModeChanged:"drawingModeChanged",drawingModeChange:"drawingModeChange",strokeCompleted:"strokeCompleted"},features:[ne],decls:6,vars:6,consts:[["pdfContainer",""],["drawingCanvas",""],[1,"pen-drawing-overlay"],["class","toolbar-drag-handle",3,"mousedown",4,"ngIf"],["class","drawing-toolbar",4,"ngIf"],[1,"drawing-canvas"],[1,"toolbar-drag-handle",3,"mousedown"],[1,"drag-icon"],[1,"drawing-toolbar"],[1,"color-picker"],["class","color-btn",3,"background-color","active","click",4,"ngFor","ngForOf"],[1,"thickness-control"],["type","range","min","1","max","10",1,"range-input",3,"ngModelChange","ngModel"],[1,"range-value"],[1,"tool-buttons"],[1,"tool-btn",3,"click","disabled"],[1,"tool-btn",3,"click"],[1,"action-buttons"],[1,"apply-btn",3,"click"],[1,"cancel-btn",3,"click"],[1,"color-btn",3,"click"]],template:function(e,n){e&1&&(a(0,"div",2,0),b(2,ri,3,0,"div",3)(3,si,17,4,"div",4),C(4,"canvas",5,1),s()),e&2&&(T("drawing-mode",n.isDrawingMode),c(2),p("ngIf",n.isDrawingMode),c(),p("ngIf",n.isDrawingMode),c(),T("active",n.isDrawingMode))},dependencies:[Te,Q,Y,Ge,ue,je,fe,he],styles:['@charset "UTF-8";.pen-drawing-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1000;display:flex;flex-direction:column;pointer-events:none;visibility:hidden;opacity:0;transition:opacity .2s ease,visibility .2s ease}.pen-drawing-overlay.drawing-mode[_ngcontent-%COMP%]{visibility:visible;opacity:1;pointer-events:auto}.pen-drawing-overlay.drawing-mode[_ngcontent-%COMP%]   .toolbar-drag-handle[_ngcontent-%COMP%], .pen-drawing-overlay.drawing-mode[_ngcontent-%COMP%]   .drawing-toolbar[_ngcontent-%COMP%], .pen-drawing-overlay.drawing-mode[_ngcontent-%COMP%]   .drawing-canvas[_ngcontent-%COMP%]{pointer-events:auto}.pen-drawing-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.drawing-toolbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fffffff2,#f8f9faf2);padding:8px 12px;border:1px solid rgba(0,0,0,.1);display:flex;align-items:center;gap:12px;box-shadow:0 4px 20px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;position:fixed;top:80px;left:50px;z-index:2000;pointer-events:auto;min-height:44px;transition:background-color .2s ease,box-shadow .2s ease}.drawing-toolbar.dragging[_ngcontent-%COMP%]{transition:none!important}.toolbar-drag-handle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:8px 6px;cursor:grab;border-radius:4px;transition:background-color .2s ease,box-shadow .2s ease,border-color .2s ease;-webkit-user-select:none;user-select:none;background:linear-gradient(135deg,#fffffff2,#f8f9faf2);border:1px solid rgba(0,0,0,.1);box-shadow:0 2px 8px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:fixed;left:10px;top:80px;z-index:2002;width:32px;height:44px;pointer-events:auto}.toolbar-drag-handle[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fffffffa,#f8f9fafa);border-color:#00000026;box-shadow:0 4px 12px #0003;transform:translate(2px);cursor:grab}.toolbar-drag-handle[_ngcontent-%COMP%]:active, .toolbar-drag-handle.dragging[_ngcontent-%COMP%]{cursor:grabbing;background:linear-gradient(135deg,#f0f0f0f2,#ebebebf2);transform:scale(.98) translate(2px);box-shadow:0 2px 6px #0003;transition:none!important}.drag-icon[_ngcontent-%COMP%]{font-size:16px;color:#3c3c3ce6;font-weight:900;line-height:1;display:flex;flex-direction:column;align-items:center;justify-content:center;width:16px;height:20px;text-shadow:0 1px 2px rgba(255,255,255,.9);letter-spacing:-2px}.toolbar-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toolbar-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;white-space:nowrap}.color-picker[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;padding:2px}.color-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid transparent;border-radius:50%;cursor:pointer;transition:all .2s ease;position:relative;box-shadow:0 1px 3px #0003}.color-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 2px 6px #0000004d}.color-btn.active[_ngcontent-%COMP%]{border-color:#333;transform:scale(1.15);box-shadow:0 0 0 2px #3333334d}.color-btn.active[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:700;text-shadow:1px 1px 1px rgba(0,0,0,.8)}.color-btn[style*="#f1c40f"].active[_ngcontent-%COMP%]:after, .color-btn[style*="#2ecc71"].active[_ngcontent-%COMP%]:after, .color-btn[style*="#1abc9c"].active[_ngcontent-%COMP%]:after{color:#333;text-shadow:1px 1px 1px rgba(255,255,255,.8)}@keyframes _ngcontent-%COMP%_checkmark{0%{transform:translate(-50%,-50%) scale(0);opacity:0}50%{transform:translate(-50%,-50%) scale(1.3);opacity:1}to{transform:translate(-50%,-50%) scale(1);opacity:1}}.thickness-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.range-input[_ngcontent-%COMP%]{width:60px;height:4px;border-radius:2px;background:#ddd;outline:none;cursor:pointer;-webkit-appearance:none;appearance:none}.range-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:linear-gradient(135deg,#3498db,#2980b9);cursor:pointer;box-shadow:0 1px 3px #0000004d}.range-input[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.1)}.range-input[_ngcontent-%COMP%]::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:linear-gradient(135deg,#3498db,#2980b9);cursor:pointer;border:none;box-shadow:0 1px 3px #0000004d}.range-value[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:600;min-width:16px;text-align:center}.tool-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:6px}.tool-btn[_ngcontent-%COMP%]{padding:6px 10px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #dee2e6;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;transition:all .2s ease;color:#495057;box-shadow:0 1px 3px #0000001a;min-width:32px;height:32px;display:flex;align-items:center;justify-content:center}.tool-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#e9ecef,#dee2e6);transform:translateY(-1px);box-shadow:0 2px 6px #00000026}.tool-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 3px #0000001a}.tool-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.apply-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:600;transition:all .2s ease;box-shadow:0 1px 3px #0000001a;height:32px;display:flex;align-items:center;justify-content:center}.apply-btn[_ngcontent-%COMP%]:hover, .cancel-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 6px #00000026}.apply-btn[_ngcontent-%COMP%]:active, .cancel-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 1px 3px #0000001a}.apply-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007acc,#005a9f);color:#fff}.apply-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0088e6,#006bb3)}.apply-btn[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#005a9f,#004d8a)}.cancel-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);color:#495057;border:1px solid #dee2e6}.cancel-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e9ecef,#dee2e6);border-color:#adb5bd}.cancel-btn[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#dee2e6,#ced4da)}.drawing-area[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;padding:20px;overflow:hidden}.pdf-container[_ngcontent-%COMP%]{position:relative;width:90%;height:90%;max-width:800px;max-height:600px;background:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;overflow:hidden}.pdf-placeholder[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#f9f9f9;color:#666}.pdf-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500}.pdf-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:14px;opacity:.7}.drawing-canvas[_ngcontent-%COMP%]{position:fixed;z-index:10;pointer-events:none;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease}.drawing-canvas.active[_ngcontent-%COMP%]{z-index:1500;pointer-events:auto;opacity:1;visibility:visible;cursor:crosshair!important}.drawing-instructions[_ngcontent-%COMP%]{background:#ffffff1a;padding:12px 16px;text-align:center}.drawing-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:14px}@media (max-width: 768px){.drawing-toolbar[_ngcontent-%COMP%]{padding:6px 8px;gap:8px;min-height:38px;flex-wrap:wrap;left:35px}.toolbar-drag-handle[_ngcontent-%COMP%]{padding:6px 4px;border-width:1px;left:5px;top:80px;width:28px;height:38px}.drag-icon[_ngcontent-%COMP%]{width:14px;height:16px;font-size:14px}.color-picker[_ngcontent-%COMP%]{gap:3px}.color-btn[_ngcontent-%COMP%]{width:20px;height:20px}.range-input[_ngcontent-%COMP%]{width:50px}.range-value[_ngcontent-%COMP%]{font-size:11px;min-width:14px}.tool-btn[_ngcontent-%COMP%]{min-width:28px;height:28px;padding:4px 6px;font-size:12px}.apply-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{height:28px;padding:4px 8px;font-size:12px}.drawing-area[_ngcontent-%COMP%]{padding:10px}.pdf-container[_ngcontent-%COMP%]{width:95%;height:85%}}']})};function ci(r,t){if(r&1){let e=w();a(0,"div",5),h("click",function(){let i=m(e).$implicit,o=d();return u(o.selectTab(i.id))}),a(1,"span",6),g(2),s(),a(3,"button",7),h("click",function(i){let o=m(e).$implicit;return d().closeTab(o.id),u(i.stopPropagation())}),g(4,"\xD7"),s()()}if(r&2){let e=t.$implicit;T("active",e.active),p("title",e.name),c(2),F(e.name)}}var _t=class r{currentFileName="";currentPdfSrc=null;tabChanged=new O;tabs=[{id:1,name:"\uC0C8\uD30C\uC77C",active:!0,pdfSrc:null}];ngOnChanges(t){t.currentFileName&&t.currentFileName.currentValue&&this.updateCurrentTabName(t.currentFileName.currentValue)}updateCurrentTabName(t){let e=this.tabs.find(n=>n.active);e&&(e.name=t)}updateCurrentTabPdfSrc(t){let e=this.tabs.find(n=>n.active);e&&(e.pdfSrc=t)}closeTab(t){let e=this.tabs.find(n=>n.id===t)?.active;this.tabs=this.tabs.filter(n=>n.id!==t),e&&this.tabs.length>0&&(this.tabs[0].active=!0,this.tabChanged.emit({pdfSrc:this.tabs[0].pdfSrc,fileName:this.tabs[0].name}))}addTab(){this.tabs.forEach(e=>e.active=!1);let t={id:Date.now(),name:"\uC0C8\uD30C\uC77C",active:!0,pdfSrc:null};this.tabs.push(t),this.tabChanged.emit({pdfSrc:null,fileName:"\uC0C8\uD30C\uC77C"})}selectTab(t){this.tabs.forEach(n=>{n.active=n.id===t});let e=this.tabs.find(n=>n.id===t);this.tabChanged.emit({pdfSrc:e?.pdfSrc??null,fileName:e?.name??""})}setActiveTabPdf(t,e){let n=this.tabs.find(i=>i.active);n&&(n.name=t,n.pdfSrc=e)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-tab-bar"]],inputs:{currentFileName:"currentFileName",currentPdfSrc:"currentPdfSrc"},outputs:{tabChanged:"tabChanged"},standalone:!1,features:[ne],decls:6,vars:1,consts:[[1,"tab-bar"],[1,"tab-ezreader"],["src","./images/logo-ezreader@3x.png","alt","ezreader \uB85C\uACE0",1,"tab-ezreader-logo"],["class","tab",3,"active","title","click",4,"ngFor","ngForOf"],["title","\uC0C8 \uD0ED \uCD94\uAC00",1,"tab-add-btn",3,"click"],[1,"tab",3,"click","title"],[1,"tab-name-ellipsis"],["title","\uB2EB\uAE30",1,"tab-close-btn",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"span",1),C(2,"img",2),s(),b(3,ci,5,4,"div",3),a(4,"button",4),h("click",function(){return n.addTab()}),g(5,"+"),s()()),e&2&&(c(3),p("ngForOf",n.tabs))},dependencies:[Q],styles:['@charset "UTF-8";.tab-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f4f6fa;height:38px;padding:0 8px;gap:2px;z-index:1100;position:relative;flex-shrink:0;margin:0}.tab-ezreader[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.tab-ezreader-logo[_ngcontent-%COMP%]{height:13px;width:auto;display:block;margin-right:10px}.tab-home-icon[_ngcontent-%COMP%]{margin-right:8px;display:flex;align-items:center}.tab[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border-radius:6px 6px 0 0;margin-right:10px;padding:0 16px 0 8px;font-size:13px;color:#444;height:32px;position:relative;gap:6px;cursor:pointer;transition:background .15s,color .15s;margin-bottom:-4px;min-width:0}.tab-name-ellipsis[_ngcontent-%COMP%]{display:block;max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tab.active[_ngcontent-%COMP%]{background:#fff;color:#007acc;border-bottom:2px solid #007acc;font-weight:600;z-index:1}.tab-close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:15px;color:#888;cursor:pointer;margin-left:6px;padding:0 2px;border-radius:3px;transition:background .15s;position:static;top:auto;right:auto;transform:none}.tab-close-btn[_ngcontent-%COMP%]:hover{background:#ececec}.tab-add-btn[_ngcontent-%COMP%]{background:#f4f6fa;color:#888;border:0px solid #e0e0e0;border-radius:6px 6px 0 0;font-size:18px;width:32px;height:32px;margin-left:2px;cursor:pointer;transition:background .15s;display:flex;align-items:center;justify-content:center}.tab-add-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}']})};var pi=["fileInput"];function gi(r,t){r&1&&(a(0,"div",18),C(1,"div",19),s())}function mi(r,t){if(r&1){let e=w();a(0,"button",20),h("click",function(){let i=m(e).$implicit,o=d();return u(o.onToolbarAction(i.action))}),C(1,"img",21),s()}if(r&2){let e=t.$implicit,n=d();T("disabled",!n.pdfSrc),p("title",e.tooltip)("disabled",!n.pdfSrc),c(),p("src",e.icon,Se)("alt",e.tooltip)}}function ui(r,t){if(r&1){let e=w();a(0,"li",22),h("click",function(){let i=m(e).$implicit,o=d();return u(o.onMenuItemClick(i))}),g(1),s()}if(r&2){let e=t.$implicit,n=d();T("active",e.active)("disabled",n.isMenuDisabled(e.name)),p("title",e.name+" \uBA54\uB274"),c(),j(" ",e.name," ")}}function fi(r,t){if(r&1&&(a(0,"span",23)(1,"b"),g(2),s(),g(3,"\uAC1C "),s()),r&2){let e=d();c(2),F(e.searchResultCount)}}function hi(r,t){r&1&&(z(),a(0,"svg",43),C(1,"path",44)(2,"polyline",45)(3,"polyline",46),s())}function _i(r,t){r&1&&C(0,"div",47)}function xi(r,t){if(r&1){let e=w();a(0,"div",24)(1,"div",25),h("mousedown",function(i){m(e);let o=d();return u(o.onDragStart(i))}),z(),a(2,"svg",26),C(3,"circle",27)(4,"circle",28)(5,"circle",29)(6,"circle",30)(7,"circle",31)(8,"circle",32)(9,"circle",33)(10,"circle",34)(11,"circle",35),s()(),me(),a(12,"span",36),g(13,"\uC800\uC7A5\uBC29\uC2DD:"),s(),a(14,"div",37)(15,"button",38),h("click",function(){m(e);let i=d();return u(i.onSaveModeChange("overlay"))}),g(16," \uC624\uBC84\uB808\uC774 "),s(),a(17,"button",39),h("click",function(){m(e);let i=d();return u(i.onSaveModeChange("textstream"))}),g(18," \uC6D0\uBCF8\uD14D\uC2A4\uD2B8\uBCC0\uACBD "),s()(),a(19,"button",40),h("click",function(){m(e);let i=d();return u(i.onSavePdf())}),b(20,hi,4,0,"svg",41)(21,_i,1,0,"div",42),g(22),s()()}if(r&2){let e=d();J("left",e.togglePosition.x,"px")("top",e.togglePosition.y,"px"),T("dragging",e.isDragging),c(15),T("active",e.saveMode==="overlay"),c(2),T("active",e.saveMode==="textstream"),c(2),T("saving",e.isSaving),p("disabled",e.isSaving)("title",e.isSaving?"\uC800\uC7A5 \uC911...":"\uD604\uC7AC \uC120\uD0DD\uB41C \uBC29\uC2DD\uC73C\uB85C PDF \uC800\uC7A5"),c(),p("ngIf",!e.isSaving),c(),p("ngIf",e.isSaving),c(),j(" ",e.isSaving?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"," ")}}var xt=class r{constructor(t){this.textEditorService=t}saveMode="overlay";currentActiveMenu="\uD648";pdfSrc=null;togglePosition={x:250,y:10};isDragging=!1;dragOffset={x:0,y:0};isSaving=!1;TOGGLE_POSITION_KEY="saveModeTogglePosition";isSearching=!1;searchResultCount=null;searchChange=new O;fileSelected=new O;createTextEditor=new O;createSentenceOverlay=new O;saveOverlayedPdf=new O;downloadModifiedPdf=new O;printPdf=new O;saveModeChanged=new O;menuChanged=new O;fileInput;searchQuery="";menuItems=[{name:"\uD648",active:!0},{name:"\uD3B8\uC9D1",active:!1},{name:"\uD30C\uC77C\uBCC0\uD658",active:!1},{name:"\uAD6C\uC131",active:!1},{name:"\uBCF4\uC548",active:!1}];toolbarActions=[{icon:"./images/ico-save@3x.png",tooltip:"\uC800\uC7A5",action:"save"},{icon:"./images/ico-print@3x.png",tooltip:"\uC778\uC1C4",action:"print"},{icon:"./images/ico-mail@3x.png",tooltip:"\uC774\uBA54\uC77C",action:"email"},{icon:"./images/ico-more@3x.png",tooltip:"\uB354\uBCF4\uAE30",action:"more"},{icon:"./images/ico-before@3x.png",tooltip:"\uC2E4\uD589\uCDE8\uC18C",action:"undo"},{icon:"./images/ico-after@3x.png",tooltip:"\uB2E4\uC2DC\uC2E4\uD589",action:"redo"}];onToolbarAction(t){console.log("Toolbar action:",t),t==="open"?this.openFileDialog():t==="save"?this.downloadModifiedPdf.emit():t==="print"&&this.printPdf.emit()}openFileDialog(){this.fileInput.nativeElement.click()}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let n=e.files[0];n.type==="application/pdf"?(this.fileSelected.emit(n),console.log("PDF \uD30C\uC77C \uC120\uD0DD\uB428:",n.name)):alert("PDF \uD30C\uC77C\uB9CC \uC120\uD0DD\uD574\uC8FC\uC138\uC694.")}}onSearchChange(t){this.searchQuery=t,this.isSearching=!0,this.searchResultCount=null,this.searchChange.emit(t)}onMenuItemClick(t){if(["\uD3B8\uC9D1","\uD30C\uC77C\uBCC0\uD658","\uAD6C\uC131","\uBCF4\uC548"].includes(t.name)&&!this.pdfSrc){this.menuChanged.emit(t.name);return}this.menuItems.forEach(n=>n.active=!1),t.active=!0,console.log("Menu item clicked:",t.name),this.menuChanged.emit(t.name),t.name==="\uD3B8\uC9D1"&&this.createSentenceOverlay.emit()}onSearchEnter(){this.isSearching=!0,this.searchResultCount=null,this.searchChange.emit(this.searchQuery)}setSearchResultCount(t){this.searchResultCount=t}ngOnInit(){this.loadTogglePosition(),document.addEventListener("pdf-save-completed",()=>{this.isSaving=!1}),document.addEventListener("search-finished",()=>{this.isSearching=!1}),document.addEventListener("search-result-count",t=>{this.searchResultCount=t.detail.count,this.isSearching=!1})}ngOnChanges(){this.updateMenuActiveState()}updateMenuActiveState(){this.menuItems.forEach(t=>{t.active=t.name===this.currentActiveMenu})}onSaveModeChange(t){this.isDragging||this.saveModeChanged.emit(t)}onSavePdf(){this.isDragging||this.isSaving||(this.isSaving=!0,this.saveOverlayedPdf.emit(),setTimeout(()=>{this.isSaving=!1},3e3))}isMenuDisabled(t){return["\uD3B8\uC9D1","\uD30C\uC77C\uBCC0\uD658","\uAD6C\uC131","\uBCF4\uC548"].includes(t)&&!this.pdfSrc}onDragStart(t){t.preventDefault(),this.isDragging=!0;let e=t.target.closest(".save-mode-toggle")?.getBoundingClientRect();e&&(this.dragOffset.x=t.clientX-e.left,this.dragOffset.y=t.clientY-e.top),document.addEventListener("mousemove",this.onDragMove.bind(this)),document.addEventListener("mouseup",this.onDragEnd.bind(this))}onDragMove(t){if(!this.isDragging)return;let e=document.querySelector(".top-menu-bar")?.getBoundingClientRect();if(!e)return;let n=t.clientX-e.left-this.dragOffset.x,i=t.clientY-e.top-this.dragOffset.y,o=280,l=40;n=Math.max(0,Math.min(n,e.width-o)),i=Math.max(0,Math.min(i,e.height-l)),this.togglePosition.x=n,this.togglePosition.y=i}onDragEnd(){this.isDragging=!1,document.removeEventListener("mousemove",this.onDragMove.bind(this)),document.removeEventListener("mouseup",this.onDragEnd.bind(this)),this.saveTogglePosition()}saveTogglePosition(){localStorage.setItem(this.TOGGLE_POSITION_KEY,JSON.stringify(this.togglePosition))}loadTogglePosition(){let t=localStorage.getItem(this.TOGGLE_POSITION_KEY);if(t)try{this.togglePosition=JSON.parse(t)}catch{}}static \u0275fac=function(e){return new(e||r)(ee(Me))};static \u0275cmp=N({type:r,selectors:[["app-top-menu-bar"]],viewQuery:function(e,n){if(e&1&&xe(pi,5),e&2){let i;Ce(i=be())&&(n.fileInput=i.first)}},inputs:{saveMode:"saveMode",currentActiveMenu:"currentActiveMenu",pdfSrc:"pdfSrc"},outputs:{searchChange:"searchChange",fileSelected:"fileSelected",createTextEditor:"createTextEditor",createSentenceOverlay:"createSentenceOverlay",saveOverlayedPdf:"saveOverlayedPdf",downloadModifiedPdf:"downloadModifiedPdf",printPdf:"printPdf",saveModeChanged:"saveModeChanged",menuChanged:"menuChanged"},standalone:!1,features:[ne],decls:20,vars:6,consts:[["fileInput",""],["class","search-progress-bar",4,"ngIf"],[1,"top-menu-bar"],["type","file","accept",".pdf",2,"display","none",3,"change"],[1,"brand"],[1,"toolbar"],["title","\uD30C\uC77C \uC5F4\uAE30",1,"toolbar-menu-label","file-menu-btn",3,"click"],["class","toolbar-btn",3,"title","disabled","click",4,"ngFor","ngForOf"],[1,"menu-center"],[3,"active","disabled","title","click",4,"ngFor","ngForOf"],[1,"menu-right",2,"display","flex","align-items","center","gap","8px"],["class","search-result-count-inline",4,"ngIf"],["type","text","placeholder","\uD14D\uC2A4\uD2B8 \uAC80\uC0C9",1,"search-box",3,"ngModelChange","input","keydown.enter","ngModel"],[1,"search-icon"],["width","18","height","18","viewBox","0 0 20 20","fill","none"],["cx","9","cy","9","r","7","stroke","#888","stroke-width","2"],["x1","14.5","y1","14.5","x2","19","y2","19","stroke","#888","stroke-width","2","stroke-linecap","round"],["class","save-mode-toggle",3,"dragging","left","top",4,"ngIf"],[1,"search-progress-bar"],[1,"search-progress"],[1,"toolbar-btn",3,"click","title","disabled"],[1,"toolbar-icon",3,"src","alt"],[3,"click","title"],[1,"search-result-count-inline"],[1,"save-mode-toggle"],["title","\uB4DC\uB798\uADF8\uD558\uC5EC \uC704\uCE58 \uC774\uB3D9",1,"drag-handle",3,"mousedown"],["width","12","height","12","viewBox","0 0 24 24","fill","none"],["cx","5","cy","5","r","2","fill","#999"],["cx","12","cy","5","r","2","fill","#999"],["cx","19","cy","5","r","2","fill","#999"],["cx","5","cy","12","r","2","fill","#999"],["cx","12","cy","12","r","2","fill","#999"],["cx","19","cy","12","r","2","fill","#999"],["cx","5","cy","19","r","2","fill","#999"],["cx","12","cy","19","r","2","fill","#999"],["cx","19","cy","19","r","2","fill","#999"],[1,"toggle-label"],[1,"toggle-switch"],["title","\uC624\uBC84\uB808\uC774 \uBC29\uC2DD\uC73C\uB85C \uC800\uC7A5",1,"toggle-btn",3,"click"],["title","\uC6D0\uBCF8\uD14D\uC2A4\uD2B8 \uBCC0\uACBD \uBC29\uC2DD\uC73C\uB85C \uC800\uC7A5",1,"toggle-btn",3,"click"],[1,"save-btn",3,"click","disabled","title"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","17,21 17,13 7,13 7,21","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","7,3 7,8 15,8","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"loading-spinner"]],template:function(e,n){if(e&1){let i=w();b(0,gi,2,0,"div",1),a(1,"nav",2)(2,"input",3,0),h("change",function(l){return m(i),u(n.onFileSelected(l))}),s(),a(4,"div",4)(5,"div",5)(6,"span",6),h("click",function(){return m(i),u(n.openFileDialog())}),g(7,"\uD30C\uC77C"),s(),b(8,mi,2,6,"button",7),s()(),a(9,"div",8)(10,"ul"),b(11,ui,2,6,"li",9),s()(),a(12,"div",10),b(13,fi,4,1,"span",11),a(14,"input",12),W("ngModelChange",function(l){return m(i),H(n.searchQuery,l)||(n.searchQuery=l),u(l)}),h("input",function(){return m(i),u(n.onSearchChange(n.searchQuery))})("keydown.enter",function(){return m(i),u(n.onSearchEnter())}),s(),a(15,"span",13),z(),a(16,"svg",14),C(17,"circle",15)(18,"line",16),s()()(),b(19,xi,23,17,"div",17),s()}e&2&&(p("ngIf",n.isSearching),c(8),p("ngForOf",n.toolbarActions),c(3),p("ngForOf",n.menuItems),c(2),p("ngIf",n.searchResultCount!==null&&!n.isSearching),c(),G("ngModel",n.searchQuery),c(5),p("ngIf",n.currentActiveMenu==="\uD3B8\uC9D1"))},dependencies:[Q,Y,ue,fe,he],styles:['.search-result-count-inline[_ngcontent-%COMP%]{font-size:15px;color:#222;background:#fffbe6;border:1px solid #ffe066;border-radius:4px;padding:2px 8px;font-weight:500;margin-left:4px;display:inline-block;vertical-align:middle}.search-result-count[_ngcontent-%COMP%]{position:absolute;top:5px;right:24px;font-size:15px;color:#222;background:#fffbe6;border:1px solid #ffe066;border-radius:4px;padding:2px 10px;z-index:1001;font-weight:500}.search-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:3px;background:transparent;z-index:1000}.search-progress[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,gold,#ffe066);animation:_ngcontent-%COMP%_search-progress-ani .7s linear infinite alternate;border-radius:2px}@keyframes _ngcontent-%COMP%_search-progress-ani{0%{opacity:.5;transform:scaleX(.2)}to{opacity:1;transform:scaleX(1)}}.top-menu-bar[_ngcontent-%COMP%]{background:#fff;color:#383838;padding:0 16px;display:flex;align-items:center;justify-content:flex-start;font-size:14px;position:relative;z-index:1000;height:48px;flex-shrink:0;margin:0}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700;font-size:20px;color:#121212;margin-right:32px;letter-spacing:1px;-webkit-user-select:none;user-select:none}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0}.toolbar-menu-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#222;margin-right:12px;padding:4px 10px 4px 0;letter-spacing:-.5px}.toolbar-menu-label.file-menu-btn[_ngcontent-%COMP%]{cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s ease}.toolbar-menu-label.file-menu-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.toolbar-menu-label.file-menu-btn[_ngcontent-%COMP%]:active{background-color:#e0e0e0}.toolbar-btn[_ngcontent-%COMP%]{background:none;border:none;padding:4px;border-radius:6px;cursor:pointer;transition:background .15s;display:flex;align-items:center;justify-content:center}.toolbar-btn[_ngcontent-%COMP%]:hover, .toolbar-btn[_ngcontent-%COMP%]:focus{background:#f2f2f2}.toolbar-btn.disabled[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.toolbar-btn.disabled[_ngcontent-%COMP%]   .toolbar-icon[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled   .toolbar-icon[_ngcontent-%COMP%]{opacity:.5}.menu-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.menu-center[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;gap:4px;list-style:none;padding:0;margin:0 0 0 -90px}.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:color .2s;color:#393939;font-size:14px;font-weight:500;padding:0 6px;height:40px;display:flex;align-items:center;border-radius:4px 4px 0 0}.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:0;right:0;bottom:2px;height:2px;background:#e0e0e0;border-radius:1px}.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:after{background:#ff6200}.menu-center[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{background:#ff6200}.menu-center[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#ff6200;font-weight:600}.menu-center[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{color:#ccc;cursor:not-allowed;pointer-events:none}.menu-center[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]:after{display:none}.menu-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:auto;position:relative}.search-box[_ngcontent-%COMP%]{padding:6px 32px 6px 12px;border:1px solid #ccc;border-radius:5px;width:180px;font-size:13px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);pointer-events:none;display:flex;align-items:center}.toolbar-icon[_ngcontent-%COMP%]{width:15px;height:15px;object-fit:contain;display:block}.save-mode-toggle[_ngcontent-%COMP%]{position:absolute!important;display:flex!important;align-items:center;gap:6px;background:#fffffff2;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);padding:6px 12px;border-radius:6px;box-shadow:0 2px 8px #00000026;z-index:10000!important;border:1px solid rgba(0,0,0,.1);cursor:default;-webkit-user-select:none;user-select:none;animation:_ngcontent-%COMP%_slideIn .3s ease-out;visibility:visible!important;opacity:1!important}.save-mode-toggle[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0003}.save-mode-toggle.dragging[_ngcontent-%COMP%]{box-shadow:0 6px 16px #0000004d;transform:scale(1.02);cursor:grabbing}.drag-handle[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:grab;padding:2px;border-radius:3px;transition:background .2s}.drag-handle[_ngcontent-%COMP%]:hover{background:#0000000d}.drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.toggle-label[_ngcontent-%COMP%]{font-size:12px;color:#555;white-space:nowrap;font-weight:600}.toggle-switch[_ngcontent-%COMP%]{display:flex;border:1px solid #ccc;border-radius:4px;overflow:hidden;background:#fff;box-shadow:0 1px 3px #0000001a}.toggle-btn[_ngcontent-%COMP%]{padding:5px 10px;font-size:11px;border:none;background:transparent;color:#666;cursor:pointer;transition:all .2s ease;white-space:nowrap;font-weight:500;min-width:60px}.toggle-btn[_ngcontent-%COMP%]:hover{background:#e8e8e8}.toggle-btn.active[_ngcontent-%COMP%]{background:#007acc;color:#fff}.toggle-btn.active[_ngcontent-%COMP%]:hover{background:#005a9e}.toggle-btn[_ngcontent-%COMP%]:first-child{border-right:1px solid #ddd}.save-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 12px;background:#007acc;color:#fff;border:none;border-radius:4px;font-size:11px;font-weight:600;cursor:pointer;transition:all .2s ease;margin-left:8px}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#005a9e;transform:translateY(-1px);box-shadow:0 2px 4px #0003}.save-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 2px #0003}.save-btn.saving[_ngcontent-%COMP%]{background:#6c757d;cursor:not-allowed}.save-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.save-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid transparent;border-top:2px solid white;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;flex-shrink:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})};function bi(r,t){r&1&&(I(0),C(1,"img",9),A())}function vi(r,t){r&1&&(I(0),C(1,"img",10),A())}function wi(r,t){r&1&&(I(0),C(1,"img",11),A())}function Pi(r,t){r&1&&(I(0),C(1,"img",12),A())}function Mi(r,t){r&1&&(I(0),C(1,"img",13),A())}function yi(r,t){r&1&&(I(0),C(1,"img",14),A())}function Ei(r,t){if(r&1){let e=w();a(0,"button",8),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onToolbarAction(i.action))}),b(1,bi,2,0,"ng-container",4)(2,vi,2,0,"ng-container",4)(3,wi,2,0,"ng-container",4)(4,Pi,2,0,"ng-container",4)(5,Mi,2,0,"ng-container",4)(6,yi,2,0,"ng-container",4),s()}if(r&2){let e=t.$implicit,n=d(2);T("disabled",!n.pdfSrc)("active",e.action==="highlight"&&n.isHighlightActive),p("title",e.tooltip)("disabled",!n.pdfSrc),c(),p("ngIf",e.action==="zoom-in"),c(),p("ngIf",e.action==="zoom-out"),c(),p("ngIf",e.action==="highlight"),c(),p("ngIf",e.action==="draw-shape"),c(),p("ngIf",e.action==="pen-drawing"),c(),p("ngIf",e.action==="add-text")}}function Oi(r,t){if(r&1&&(I(0),a(1,"div",6),b(2,Ei,7,12,"button",7),s(),A()),r&2){let e=d();c(2),p("ngForOf",e.getActionsByMenu("\uD648"))}}function Si(r,t){r&1&&(I(0),C(1,"img",14),A())}function Ti(r,t){r&1&&(I(0),C(1,"img",15),A())}function ki(r,t){r&1&&(I(0),C(1,"img",16),A())}function Di(r,t){r&1&&(I(0),C(1,"img",17),A())}function zi(r,t){r&1&&(I(0),C(1,"img",18),A())}function Fi(r,t){if(r&1){let e=w();a(0,"button",8),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onToolbarAction(i.action))}),b(1,Si,2,0,"ng-container",4)(2,Ti,2,0,"ng-container",4)(3,ki,2,0,"ng-container",4)(4,Di,2,0,"ng-container",4)(5,zi,2,0,"ng-container",4),s()}if(r&2){let e=t.$implicit,n=d(2);T("disabled",!n.pdfSrc)("active",e.action==="highlight"&&n.isHighlightActive),p("title",e.tooltip)("disabled",!n.pdfSrc),c(),p("ngIf",e.action==="add-text"),c(),p("ngIf",e.action==="add-image"),c(),p("ngIf",e.action==="watermark"),c(),p("ngIf",e.action==="page-number"),c(),p("ngIf",e.action==="signature")}}function Ii(r,t){if(r&1&&(I(0),a(1,"div",6),b(2,Fi,6,11,"button",7),s(),A()),r&2){let e=d();c(2),p("ngForOf",e.getActionsByMenu("\uD3B8\uC9D1"))}}function Ai(r,t){r&1&&(I(0),C(1,"img",19),A())}function Vi(r,t){r&1&&(I(0),C(1,"img",20),A())}function Bi(r,t){r&1&&(I(0),C(1,"img",21),A())}function Li(r,t){r&1&&(I(0),C(1,"img",22),A())}function Ri(r,t){if(r&1){let e=w();a(0,"button",8),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onToolbarAction(i.action))}),b(1,Ai,2,0,"ng-container",4)(2,Vi,2,0,"ng-container",4)(3,Bi,2,0,"ng-container",4)(4,Li,2,0,"ng-container",4),s()}if(r&2){let e=t.$implicit,n=d(2);T("disabled",!n.pdfSrc)("active",e.action==="highlight"&&n.isHighlightActive),p("title",e.tooltip)("disabled",!n.pdfSrc),c(),p("ngIf",e.action==="convert-ppt"),c(),p("ngIf",e.action==="convert-doc"),c(),p("ngIf",e.action==="convert-xls"),c(),p("ngIf",e.action==="convert-jpg")}}function $i(r,t){if(r&1&&(I(0),a(1,"div",6),b(2,Ri,5,10,"button",7),s(),A()),r&2){let e=d();c(2),p("ngForOf",e.getActionsByMenu("\uD30C\uC77C\uBCC0\uD658"))}}function Ni(r,t){r&1&&(I(0),C(1,"img",23),A())}function ji(r,t){r&1&&(I(0),C(1,"img",24),A())}function Gi(r,t){r&1&&(I(0),C(1,"img",25),A())}function Hi(r,t){r&1&&(I(0),C(1,"img",26),A())}function Wi(r,t){r&1&&(I(0),C(1,"img",27),A())}function Ui(r,t){r&1&&(I(0),C(1,"img",28),A())}function Yi(r,t){r&1&&(I(0),C(1,"img",29),A())}function Ki(r,t){if(r&1){let e=w();a(0,"button",8),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onToolbarAction(i.action))}),b(1,Ni,2,0,"ng-container",4)(2,ji,2,0,"ng-container",4)(3,Gi,2,0,"ng-container",4)(4,Hi,2,0,"ng-container",4)(5,Wi,2,0,"ng-container",4)(6,Ui,2,0,"ng-container",4)(7,Yi,2,0,"ng-container",4),s()}if(r&2){let e=t.$implicit,n=d(2);T("disabled",!n.pdfSrc)("active",e.action==="highlight"&&n.isHighlightActive),p("title",e.tooltip)("disabled",!n.pdfSrc),c(),p("ngIf",e.action==="rotate-left"),c(),p("ngIf",e.action==="rotate-right"),c(),p("ngIf",e.action==="delete-page"),c(),p("ngIf",e.action==="export-pdf"),c(),p("ngIf",e.action==="fold"),c(),p("ngIf",e.action==="download"),c(),p("ngIf",e.action==="merge-pdf")}}function qi(r,t){if(r&1&&(I(0),a(1,"div",6),b(2,Ki,8,13,"button",7),s(),A()),r&2){let e=d();c(2),p("ngForOf",e.getActionsByMenu("\uAD6C\uC131"))}}function Xi(r,t){r&1&&(I(0),C(1,"img",30),A())}function Ji(r,t){r&1&&(I(0),C(1,"img",31),A())}function Qi(r,t){r&1&&(I(0),C(1,"img",32),A())}function Zi(r,t){if(r&1){let e=w();a(0,"button",8),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onToolbarAction(i.action))}),b(1,Xi,2,0,"ng-container",4)(2,Ji,2,0,"ng-container",4)(3,Qi,2,0,"ng-container",4),s()}if(r&2){let e=t.$implicit,n=d(2);T("disabled",!n.pdfSrc)("active",e.action==="highlight"&&n.isHighlightActive),p("title",e.tooltip)("disabled",!n.pdfSrc),c(),p("ngIf",e.action==="lock"),c(),p("ngIf",e.action==="password"),c(),p("ngIf",e.action==="settings")}}function eo(r,t){if(r&1&&(I(0),a(1,"div",6),b(2,Zi,4,9,"button",7),s(),A()),r&2){let e=d();c(2),p("ngForOf",e.getActionsByMenu("\uBCF4\uC548"))}}var Ct=class r{activeMenu="\uD648";pdfSrc=null;headerAction=new O;showSnackbar=new O;toolbarActions=[];isHighlightActive=!1;menuToolbarActions={\uD648:[{tooltip:"\uD655\uB300",action:"zoom-in"},{tooltip:"\uCD95\uC18C",action:"zoom-out"},{tooltip:"\uD558\uC774\uB77C\uC774\uD2B8",action:"highlight"},{tooltip:"\uB3C4\uD615 \uADF8\uB9AC\uAE30",action:"draw-shape"},{tooltip:"\uD39C \uADF8\uB9AC\uAE30",action:"pen-drawing"},{tooltip:"\uD14D\uC2A4\uD2B8 \uCD94\uAC00",action:"add-text"}],\uD3B8\uC9D1:[{tooltip:"\uD14D\uC2A4\uD2B8 \uCD94\uAC00",action:"add-text"},{tooltip:"\uADF8\uB9BC \uCD94\uAC00",action:"add-image"},{tooltip:"\uC6CC\uD130\uB9C8\uD06C",action:"watermark"},{tooltip:"\uD398\uC774\uC9C0 \uBC88\uD638",action:"page-number"},{tooltip:"\uC0AC\uC778",action:"signature"}],\uD30C\uC77C\uBCC0\uD658:[{tooltip:"PPT \uBCC0\uD658",action:"convert-ppt"},{tooltip:"DOC \uBCC0\uD658",action:"convert-doc"},{tooltip:"XLS \uBCC0\uD658",action:"convert-xls"},{tooltip:"JPG \uBCC0\uD658",action:"convert-jpg"}],\uAD6C\uC131:[{tooltip:"\uC67C\uCABD \uD68C\uC804",action:"rotate-left"},{tooltip:"\uC624\uB978\uCABD \uD68C\uC804",action:"rotate-right"},{tooltip:"\uC0AD\uC81C",action:"delete-page"},{tooltip:"\uB0B4\uBCF4\uB0B4\uAE30",action:"export-pdf"},{tooltip:"\uD3F4\uB4DC",action:"fold"},{tooltip:"\uB2E4\uC6B4\uB85C\uB4DC",action:"download"},{tooltip:"\uBCD1\uD569",action:"merge-pdf"}],\uBCF4\uC548:[{tooltip:"\uC7A0\uAE08",action:"lock"},{tooltip:"\uBE44\uBC00\uBC88\uD638",action:"password"},{tooltip:"\uC124\uC815",action:"settings"}]};ngOnChanges(t){t.activeMenu&&this.updateToolbarActions()}ngOnInit(){this.updateToolbarActions()}updateToolbarActions(){this.toolbarActions=this.menuToolbarActions[this.activeMenu]||this.menuToolbarActions.\uD648}getActionsByMenu(t){return this.menuToolbarActions[t]||[]}onToolbarAction(t){if(console.log("\u{1F58A}\uFE0F Header: Toolbar action triggered:",t),t==="pen-drawing"){console.log("\u{1F58A}\uFE0F Header: Pen drawing action triggered"),console.log("\u{1F58A}\uFE0F Header: Emitting pen-drawing action to parent"),this.headerAction.emit(t);return}let e="";for(let n in this.menuToolbarActions){let o=this.menuToolbarActions[n].find(l=>l.action===t);if(o){e=o.tooltip;break}}e&&this.showSnackbar.emit(`${e} \uBA54\uB274\uAC00 \uD074\uB9AD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),(t==="zoom-in"||t==="zoom-out")&&this.headerAction.emit(t),t==="highlight"&&(this.isHighlightActive=!this.isHighlightActive,this.headerAction.emit(t)),t==="draw-shape"&&this.headerAction.emit(t),t==="add-text"&&this.headerAction.emit(t),t==="add-image"&&this.headerAction.emit(t),t==="watermark"&&this.headerAction.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-header"]],inputs:{activeMenu:"activeMenu",pdfSrc:"pdfSrc"},outputs:{headerAction:"headerAction",showSnackbar:"showSnackbar"},standalone:!1,features:[ne],decls:10,vars:5,consts:[[1,"header"],[1,"header-left"],[1,"header-center"],[1,"nav-controls"],[4,"ngIf"],[1,"header-right"],[1,"toolbar-group"],["class","toolbar-btn",3,"title","disabled","active","click",4,"ngFor","ngForOf"],[1,"toolbar-btn",3,"click","title","disabled"],["src","./images/btn-gnb-zoom@3x.png","alt","\uD655\uB300","width","18","height","18"],["src","./images/btn-gnb-zoom1@3x.png","alt","\uCD95\uC18C","width","18","height","18"],["src","./images/btn-gnb-highlight@3x.png","alt","\uD558\uC774\uB77C\uC774\uD2B8","width","18","height","18"],["src","./images/btn-gnb-shapes@3x.png","alt","\uB3C4\uD615 \uADF8\uB9AC\uAE30","width","18","height","18"],["src","./images/btn-gnb-edit@3x.png","alt","\uD39C \uADF8\uB9AC\uAE30","width","18","height","18"],["src","./images/btn-gnb-insert-txt@3x.png","alt","\uD14D\uC2A4\uD2B8 \uCD94\uAC00","width","18","height","18"],["src","./images/btn-gnb-image@3x.png","alt","\uADF8\uB9BC \uCD94\uAC00","width","18","height","18"],["src","./images/btn-gnb-watermark@3x.png","alt","\uC6CC\uD130\uB9C8\uD06C","width","18","height","18"],["src","./images/btn-gnb-pagenumber@3x.png","alt","\uD398\uC774\uC9C0 \uBC88\uD638","width","18","height","18"],["src","./images/btn-gnb-sign@3x.png","alt","\uC0AC\uC778","width","18","height","18"],["src","./images/btn-gnb-ppt@3x.png","alt","PPT \uBCC0\uD658","width","18","height","18"],["src","./images/btn-gnb-doc@3x.png","alt","DOC \uBCC0\uD658","width","18","height","18"],["src","./images/btn-gnb-xls@3x.png","alt","XLS \uBCC0\uD658","width","18","height","18"],["src","./images/btn-gnb-jpg@3x.png","alt","JPG \uBCC0\uD658","width","18","height","18"],["src","./images/btn-gnb-rotation-left@3x.png","alt","\uC67C\uCABD \uD68C\uC804","width","18","height","18"],["src","./images/btn-gnb-rotation-right@3x.png","alt","\uC624\uB978\uCABD \uD68C\uC804","width","18","height","18"],["src","./images/btn-gnb-delete.png","alt","\uC0AD\uC81C","width","18","height","18"],["src","./images/btn-gnb-upload@3x.png","alt","\uC5C5\uB85C\uB4DC","width","18","height","18"],["src","./images/btn-gnb-fold@3x.png","alt","\uD3F4\uB4DC","width","18","height","18"],["src","./images/btn-gnb-download@3x.png","alt","\uB2E4\uC6B4\uB85C\uB4DC","width","18","height","18"],["src","./images/btn-gnb-merge@3x.png","alt","\uBCD1\uD569","width","18","height","18"],["src","./images/btn-gnb-lock@3x.png","alt","\uC7A0\uAE08","width","18","height","18"],["src","./images/btn-gnb-password@3x.png","alt","\uBE44\uBC00\uBC88\uD638","width","18","height","18"],["src","./images/btn-gnb-setting.png","alt","\uC124\uC815","width","18","height","18"]],template:function(e,n){e&1&&(a(0,"div",0),C(1,"div",1),a(2,"div",2)(3,"div",3),b(4,Oi,3,1,"ng-container",4)(5,Ii,3,1,"ng-container",4)(6,$i,3,1,"ng-container",4)(7,qi,3,1,"ng-container",4)(8,eo,3,1,"ng-container",4),s()(),C(9,"div",5),s()),e&2&&(c(4),p("ngIf",n.activeMenu==="\uD648"),c(),p("ngIf",n.activeMenu==="\uD3B8\uC9D1"),c(),p("ngIf",n.activeMenu==="\uD30C\uC77C\uBCC0\uD658"),c(),p("ngIf",n.activeMenu==="\uAD6C\uC131"),c(),p("ngIf",n.activeMenu==="\uBCF4\uC548"))},dependencies:[Q,Y],styles:[".header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #e0e0e0;padding:8px 16px;display:flex;align-items:center;gap:16px;box-shadow:0 1px 3px #0000001a;height:44px;flex-shrink:0;margin:0}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;gap:16px}.nav-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toolbar-btn[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;font-size:16px;color:#333;transition:background .2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.toolbar-btn.active[_ngcontent-%COMP%]{background:#e0e0e0}.toolbar-btn.disabled[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.toolbar-btn.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled   img[_ngcontent-%COMP%]{opacity:.5}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}"]})};function no(r,t){if(r&1&&(a(0,"option",27),g(1),s()),r&2){let e=t.$implicit;p("value",e.value),c(),j(" ",e.label," ")}}function io(r,t){r&1&&(z(),C(0,"rect",39))}function oo(r,t){r&1&&(z(),C(0,"rect",40))}function ro(r,t){r&1&&(z(),C(0,"rect",41))}function ao(r,t){r&1&&(z(),C(0,"rect",42))}function so(r,t){r&1&&(z(),C(0,"rect",43))}function lo(r,t){r&1&&(z(),C(0,"rect",44))}function co(r,t){r&1&&(z(),C(0,"rect",39))}function po(r,t){r&1&&(z(),C(0,"rect",45))}function go(r,t){r&1&&(z(),C(0,"rect",46))}function mo(r,t){r&1&&(z(),C(0,"rect",39))}function uo(r,t){r&1&&(z(),C(0,"rect",43))}function fo(r,t){r&1&&(z(),C(0,"rect",47))}function ho(r,t){if(r&1){let e=w();a(0,"button",28),h("click",function(){let i=m(e).$implicit,o=d();return u(o.onAlignmentChange(i.value))}),z(),a(1,"svg",29),b(2,io,1,0,"rect",30)(3,oo,1,0,"rect",31)(4,ro,1,0,"rect",32)(5,ao,1,0,"rect",33)(6,so,1,0,"rect",34)(7,lo,1,0,"rect",35)(8,co,1,0,"rect",30)(9,po,1,0,"rect",36)(10,go,1,0,"rect",37)(11,mo,1,0,"rect",30)(12,uo,1,0,"rect",34)(13,fo,1,0,"rect",38),s()()}if(r&2){let e=t.$implicit,n=d();T("active",n.fontProperties.align===e.value),p("title",e.tooltip),c(2),p("ngIf",e.value==="left"),c(),p("ngIf",e.value==="left"),c(),p("ngIf",e.value==="left"),c(),p("ngIf",e.value==="center"),c(),p("ngIf",e.value==="center"),c(),p("ngIf",e.value==="center"),c(),p("ngIf",e.value==="right"),c(),p("ngIf",e.value==="right"),c(),p("ngIf",e.value==="right"),c(),p("ngIf",e.value==="justify"),c(),p("ngIf",e.value==="justify"),c(),p("ngIf",e.value==="justify")}}function _o(r,t){r&1&&(z(),C(0,"path",52))}function xo(r,t){r&1&&(z(),C(0,"path",53))}function Co(r,t){r&1&&(z(),a(0,"g"),C(1,"path",54)(2,"path",55)(3,"line",56),s())}function bo(r,t){r&1&&(z(),a(0,"g"),C(1,"path",57)(2,"path",58)(3,"line",59),s())}function vo(r,t){r&1&&(z(),a(0,"g"),C(1,"rect",60)(2,"path",61),s())}function wo(r,t){r&1&&(z(),a(0,"g"),C(1,"rect",60)(2,"circle",62)(3,"path",63),s())}function Po(r,t){if(r&1){let e=w();a(0,"button",28),h("click",function(){let i=m(e).$implicit,o=d();return u(o.onAction(i.name))}),z(),a(1,"svg",48),b(2,_o,1,0,"path",49)(3,xo,1,0,"path",50)(4,Co,4,0,"g",51)(5,bo,4,0,"g",51)(6,vo,3,0,"g",51)(7,wo,4,0,"g",51),s()()}if(r&2){let e=t.$implicit;p("title",e.tooltip),c(2),p("ngIf",e.name==="undo"),c(),p("ngIf",e.name==="redo"),c(),p("ngIf",e.name==="flip-horizontal"),c(),p("ngIf",e.name==="flip-vertical"),c(),p("ngIf",e.name==="crop"),c(),p("ngIf",e.name==="convert-image")}}var bt=class r{isVisible=!1;close=new O;fontProperties={type:"text",size:30,color:"#000000",bold:!0,italic:!1,underline:!1,strikethrough:!1,align:"left"};spacingProperties={letterSpacing:0,lineHeight:10,paragraphSpacing:0};fontTypes=[{value:"text",label:"\uD14D\uC2A4\uD2B8"},{value:"heading",label:"\uC81C\uBAA9"},{value:"caption",label:"\uCEA1\uC158"}];alignments=[{value:"left",icon:"align-left",tooltip:"\uC67C\uCABD \uC815\uB82C"},{value:"center",icon:"align-center",tooltip:"\uAC00\uC6B4\uB370 \uC815\uB82C"},{value:"right",icon:"align-right",tooltip:"\uC624\uB978\uCABD \uC815\uB82C"},{value:"justify",icon:"align-justify",tooltip:"\uC591\uCABD \uC815\uB82C"}];actions=[{name:"undo",tooltip:"\uB418\uB3CC\uB9AC\uAE30"},{name:"redo",tooltip:"\uB2E4\uC2DC\uD558\uAE30"},{name:"flip-horizontal",tooltip:"\uC88C\uC6B0\uBC18\uC804"},{name:"flip-vertical",tooltip:"\uC0C1\uD558\uBC18\uC804"},{name:"crop",tooltip:"\uC790\uB974\uAE30"},{name:"convert-image",tooltip:"\uC774\uBBF8\uC9C0 \uBCC0\uD658"}];onClose(){this.close.emit()}onFontStyleToggle(t){this.fontProperties[t]=!this.fontProperties[t]}onAlignmentChange(t){this.fontProperties.align=t}onAction(t){console.log("Properties panel action:",t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-properties-panel"]],inputs:{isVisible:"isVisible"},outputs:{close:"close"},standalone:!1,decls:48,vars:21,consts:[[1,"properties-panel"],[1,"sidebar-header"],["title","\uB2EB\uAE30",1,"close-panel-btn",3,"click"],[1,"panel-section"],[1,"panel-title"],[1,"property-type"],[1,"property-value"],[1,"divider"],[1,"panel-title","collapsible"],[1,"font-controls"],[1,"property-input","font-type",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number",1,"property-input","font-size",3,"ngModelChange","ngModel"],["type","color",1,"color-input",3,"ngModelChange","ngModel"],[1,"style-buttons"],["title","\uAD75\uAC8C",1,"property-btn",3,"click"],["title","\uAE30\uC6B8\uC784",1,"property-btn",3,"click"],["title","\uBC11\uC904",1,"property-btn",3,"click"],["title","\uCDE8\uC18C\uC120",1,"property-btn",3,"click"],[1,"alignment-buttons"],["class","property-btn",3,"active","title","click",4,"ngFor","ngForOf"],[1,"spacing-controls"],["type","number","placeholder","\uC790\uAC04",1,"property-input",3,"ngModelChange","ngModel"],["type","number","placeholder","\uC904\uAC04\uACA9",1,"property-input",3,"ngModelChange","ngModel"],["type","number","placeholder","\uB2E8\uB77D\uAC04\uACA9",1,"property-input",3,"ngModelChange","ngModel"],[1,"action-buttons"],["class","property-btn",3,"title","click",4,"ngFor","ngForOf"],[3,"value"],[1,"property-btn",3,"click","title"],["width","22","height","22","viewBox","0 0 22 22"],["x","4","y","6","width","14","height","2","fill","#444",4,"ngIf"],["x","4","y","10","width","10","height","2","fill","#444",4,"ngIf"],["x","4","y","14","width","8","height","2","fill","#444",4,"ngIf"],["x","6","y","6","width","10","height","2","fill","#444",4,"ngIf"],["x","4","y","10","width","14","height","2","fill","#444",4,"ngIf"],["x","6","y","14","width","10","height","2","fill","#444",4,"ngIf"],["x","8","y","10","width","10","height","2","fill","#444",4,"ngIf"],["x","10","y","14","width","8","height","2","fill","#444",4,"ngIf"],["x","4","y","14","width","14","height","2","fill","#444",4,"ngIf"],["x","4","y","6","width","14","height","2","fill","#444"],["x","4","y","10","width","10","height","2","fill","#444"],["x","4","y","14","width","8","height","2","fill","#444"],["x","6","y","6","width","10","height","2","fill","#444"],["x","4","y","10","width","14","height","2","fill","#444"],["x","6","y","14","width","10","height","2","fill","#444"],["x","8","y","10","width","10","height","2","fill","#444"],["x","10","y","14","width","8","height","2","fill","#444"],["x","4","y","14","width","14","height","2","fill","#444"],["width","22","height","22","viewBox","0 0 22 22","fill","none"],["d","M7 11V7H3M5 9a7 7 0 1 1 2 7","stroke","#444","stroke-width","1.5","fill","none",4,"ngIf"],["d","M15 11V7h4M17 9a7 7 0 1 0-2 7","stroke","#444","stroke-width","1.5","fill","none",4,"ngIf"],[4,"ngIf"],["d","M7 11V7H3M5 9a7 7 0 1 1 2 7","stroke","#444","stroke-width","1.5","fill","none"],["d","M15 11V7h4M17 9a7 7 0 1 0-2 7","stroke","#444","stroke-width","1.5","fill","none"],["d","M7 6v10M7 6l-2 2M7 6l2 2","stroke","#444","stroke-width","1.5","fill","none"],["d","M15 6v10M15 16l2-2M15 16l-2-2","stroke","#444","stroke-width","1.5","fill","none"],["x1","11","y1","5","x2","11","y2","17","stroke","#444","stroke-width","1"],["d","M6 15h10M6 15l2 2M6 15l2-2","stroke","#444","stroke-width","1.5","fill","none"],["d","M16 7H6M16 7l-2-2M16 7l-2 2","stroke","#444","stroke-width","1.5","fill","none"],["x1","5","y1","11","x2","17","y2","11","stroke","#444","stroke-width","1"],["x","5","y","5","width","12","height","12","stroke","#444","stroke-width","1.5","fill","none"],["d","M5 5l12 12","stroke","#444","stroke-width","1"],["cx","9","cy","9","r","2","stroke","#444","stroke-width","1"],["d","M17 17l-4-6-4 5","stroke","#444","stroke-width","1"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return n.onClose()}),g(3," \xD7 "),s()(),a(4,"div",3)(5,"div",4),g(6,"\uC18D\uC131"),s(),a(7,"div",5),g(8,"\uC885\uB958"),s(),a(9,"div",6),g(10,"\uD14D\uC2A4\uD2B8"),s(),C(11,"hr",7),s(),a(12,"div",3)(13,"div",8),g(14,"\u25BC \uD3F0\uD2B8"),s(),a(15,"div",9)(16,"select",10),W("ngModelChange",function(o){return H(n.fontProperties.type,o)||(n.fontProperties.type=o),o}),b(17,no,2,2,"option",11),s(),a(18,"input",12),W("ngModelChange",function(o){return H(n.fontProperties.size,o)||(n.fontProperties.size=o),o}),s(),a(19,"input",13),W("ngModelChange",function(o){return H(n.fontProperties.color,o)||(n.fontProperties.color=o),o}),s()(),a(20,"div",14)(21,"button",15),h("click",function(){return n.onFontStyleToggle("bold")}),a(22,"strong"),g(23,"T"),s()(),a(24,"button",16),h("click",function(){return n.onFontStyleToggle("italic")}),a(25,"em"),g(26,"T"),s()(),a(27,"button",17),h("click",function(){return n.onFontStyleToggle("underline")}),a(28,"u"),g(29,"T"),s()(),a(30,"button",18),h("click",function(){return n.onFontStyleToggle("strikethrough")}),a(31,"s"),g(32,"T"),s()()(),a(33,"div",19),b(34,ho,14,15,"button",20),s()(),a(35,"div",3)(36,"div",8),g(37,"\u25BC \uAC04\uACA9"),s(),a(38,"div",21)(39,"input",22),W("ngModelChange",function(o){return H(n.spacingProperties.letterSpacing,o)||(n.spacingProperties.letterSpacing=o),o}),s(),a(40,"input",23),W("ngModelChange",function(o){return H(n.spacingProperties.lineHeight,o)||(n.spacingProperties.lineHeight=o),o}),s()(),a(41,"div",21)(42,"input",24),W("ngModelChange",function(o){return H(n.spacingProperties.paragraphSpacing,o)||(n.spacingProperties.paragraphSpacing=o),o}),s()()(),a(43,"div",3)(44,"div",8),g(45,"\u25BC \uB3D9\uC791"),s(),a(46,"div",25),b(47,Po,8,7,"button",26),s()()()),e&2&&(J("display",n.isVisible?"":"none"),T("closed",!n.isVisible),c(16),G("ngModel",n.fontProperties.type),c(),p("ngForOf",n.fontTypes),c(),G("ngModel",n.fontProperties.size),c(),G("ngModel",n.fontProperties.color),c(2),T("active",n.fontProperties.bold),c(3),T("active",n.fontProperties.italic),c(3),T("active",n.fontProperties.underline),c(3),T("active",n.fontProperties.strikethrough),c(4),p("ngForOf",n.alignments),c(5),G("ngModel",n.spacingProperties.letterSpacing),c(),G("ngModel",n.spacingProperties.lineHeight),c(2),G("ngModel",n.spacingProperties.paragraphSpacing),c(5),p("ngForOf",n.actions))},dependencies:[Q,Y,ve,we,ue,$e,Pe,fe,he],styles:['@charset "UTF-8";.properties-panel[_ngcontent-%COMP%]{position:fixed;top:130px;right:0;bottom:0;width:300px;background:#fff;border-left:1px solid #e0e0e0;box-shadow:-2px 0 8px #0000001a;padding:16px;overflow-y:auto;z-index:1000;transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1);transform:translate(0);opacity:1}.properties-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:8px 8px 8px 0}.close-panel-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;cursor:pointer;width:24px;height:24px;line-height:1;display:flex;align-items:center;justify-content:center;color:#888;border-radius:4px;transition:background .15s}.close-panel-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.panel-section[_ngcontent-%COMP%]{margin-bottom:16px}.panel-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:8px;color:#333}.panel-title.collapsible[_ngcontent-%COMP%]{cursor:pointer;font-size:13px;color:#444;font-weight:600;margin-bottom:8px}.property-type[_ngcontent-%COMP%]{font-size:13px;color:#444;margin-bottom:8px}.property-value[_ngcontent-%COMP%]{font-size:13px;color:#888;margin-bottom:12px}.divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #eee;margin:8px 0}.font-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.property-input[_ngcontent-%COMP%]{width:100%;padding:6px 8px;border:1px solid #ccc;border-radius:4px;font-size:12px}.font-type[_ngcontent-%COMP%]{width:100px}.font-size[_ngcontent-%COMP%]{width:50px}.color-input[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:4px;cursor:pointer}.style-buttons[_ngcontent-%COMP%], .alignment-buttons[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;flex-wrap:wrap}.property-btn[_ngcontent-%COMP%]{flex:1;padding:6px;border:1px solid #ccc;background:#f8f8f8;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s;display:flex;align-items:center;justify-content:center;min-width:30px;height:30px}.property-btn.active[_ngcontent-%COMP%]{background:#007acc;color:#fff;border-color:#007acc}.property-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.property-btn.active[_ngcontent-%COMP%]:hover{background:#0056b3}.spacing-controls[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.spacing-controls[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]{width:50px}.action-buttons[_ngcontent-%COMP%]   .property-btn[_ngcontent-%COMP%]{flex:0 0 auto;width:40px}']})};function yo(r,t){r&1&&(I(0),C(1,"img",7),A())}function Eo(r,t){if(r&1){let e=w();a(0,"button",6),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onMenuItemClick(i))}),b(1,yo,2,0,"ng-container",1),s()}if(r&2){let e=t.$implicit;T("active",e.active)("page-toggle-btn",e.id==="page-panel-toggle"),p("title",e.tooltip),c(),p("ngIf",e.id==="page-panel-toggle")}}function Oo(r,t){r&1&&(I(0),C(1,"img",9),A())}function So(r,t){r&1&&(I(0),C(1,"img",10),A())}function To(r,t){if(r&1){let e=w();a(0,"button",8),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onMenuItemClick(i))}),b(1,Oo,2,0,"ng-container",1)(2,So,2,0,"ng-container",1),s()}if(r&2){let e=t.$implicit;p("title",e.tooltip),c(),p("ngIf",e.id==="zoom-in"),c(),p("ngIf",e.id==="zoom-out")}}function ko(r,t){if(r&1&&(I(0),b(1,Eo,2,6,"button",2),C(2,"div",3),a(3,"div",4),b(4,To,3,3,"button",5),s(),A()),r&2){let e=d();c(),p("ngForOf",e.leftMenuItems),c(3),p("ngForOf",e.zoomItems)}}function Do(r,t){r&1&&(I(0),C(1,"img",12),A())}function zo(r,t){r&1&&(I(0),C(1,"img",13),A())}function Fo(r,t){r&1&&(I(0),C(1,"img",14),A())}function Io(r,t){r&1&&(I(0),C(1,"img",15),A())}function Ao(r,t){if(r&1){let e=w();a(0,"button",6),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onMenuItemClick(i))}),b(1,Do,2,0,"ng-container",1)(2,zo,2,0,"ng-container",1)(3,Fo,2,0,"ng-container",1)(4,Io,2,0,"ng-container",1),s()}if(r&2){let e=t.$implicit;T("active",e.active)("edit-toggle-btn",e.id==="edit-mode")("pdf-content-btn",e.id==="pdf-content"),p("title",e.tooltip),c(),p("ngIf",e.id==="ai-features"),c(),p("ngIf",e.id==="translate"),c(),p("ngIf",e.id==="pdf-content"),c(),p("ngIf",e.id==="edit-mode")}}function Vo(r,t){if(r&1&&(I(0),b(1,Ao,5,11,"button",11),A()),r&2){let e=d();c(),p("ngForOf",e.rightMenuItems)}}var vt=class r{position="left";sidebarVisible=!1;propertiesVisible=!1;aiTranslateVisible=!1;aiFeaturesVisible=!1;pdfContentVisible=!1;menuAction=new O;get leftMenuItems(){return[{id:"page-panel-toggle",icon:"",tooltip:"\uD398\uC774\uC9C0 \uD328\uB110 \uC5F4\uAE30/\uB2EB\uAE30",action:"toggle-sidebar",active:this.sidebarVisible}]}get rightMenuItems(){return[{id:"ai-features",icon:"",tooltip:"AI \uAE30\uB2A5",action:"ai-features",active:this.aiFeaturesVisible},{id:"translate",icon:"",tooltip:"AI \uBC88\uC5ED \uAE30\uB2A5",action:"translate",active:this.aiTranslateVisible},{id:"edit-mode",icon:"",tooltip:"\uD3B8\uC9D1 \uAE30\uB2A5",action:"toggle-properties",active:this.propertiesVisible},{id:"pdf-content",icon:"",tooltip:"PDF \uBCF8\uBB38 \uC0C1\uC138",action:"toggle-pdf-content",active:this.pdfContentVisible}]}get zoomItems(){return[{id:"zoom-in",icon:"",tooltip:"\uD655\uB300",action:"zoom-in"},{id:"zoom-out",icon:"",tooltip:"\uCD95\uC18C",action:"zoom-out"}]}onMenuItemClick(t){this.menuAction.emit(t.action)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-vertical-menu"]],inputs:{position:"position",sidebarVisible:"sidebarVisible",propertiesVisible:"propertiesVisible",aiTranslateVisible:"aiTranslateVisible",aiFeaturesVisible:"aiFeaturesVisible",pdfContentVisible:"pdfContentVisible"},outputs:{menuAction:"menuAction"},standalone:!1,decls:3,vars:6,consts:[[1,"vertical-menu"],[4,"ngIf"],[3,"active","page-toggle-btn","title","click",4,"ngFor","ngForOf"],[2,"flex","1"],[1,"zoom-vertical-group"],["class","zoom-btn",3,"title","click",4,"ngFor","ngForOf"],[3,"click","title"],["src","./images/ico-page@3x.png","alt","ai","width","22","height","22"],[1,"zoom-btn",3,"click","title"],["src","./images/btn-gnb-zoom@3x.png","alt","ai","width","20","height","20"],["src","./images/btn-gnb-zoom1@3x.png","alt","ai","width","20","height","20"],[3,"active","edit-toggle-btn","pdf-content-btn","title","click",4,"ngFor","ngForOf"],["src","./images/btn-rnb-ai-on@3x.png","alt","ai","width","22","height","22"],["src","./images/btn-rnb-tranlator-off@3x.png","alt","ai","width","22","height","22"],["src","./images/ico-file@3x.png","alt","pdf content","width","22","height","22"],["src","./images/btn-rnb-setting-off@3x.png","alt","ai","width","22","height","22"]],template:function(e,n){e&1&&(a(0,"div",0),b(1,ko,5,2,"ng-container",1)(2,Vo,2,1,"ng-container",1),s()),e&2&&(T("left",n.position==="left")("right",n.position==="right"),c(),p("ngIf",n.position==="left"),c(),p("ngIf",n.position==="right"))},dependencies:[Q,Y],styles:['@charset "UTF-8";.vertical-menu[_ngcontent-%COMP%]{width:40px;background:#fff;border-radius:0;box-shadow:0 0 4px #0000000f;display:flex;flex-direction:column;align-items:center;gap:8px;padding:8px 0;position:fixed;top:130px;bottom:0;z-index:100;height:calc(100vh - 130px)}.vertical-menu.left[_ngcontent-%COMP%]{left:0}.vertical-menu.right[_ngcontent-%COMP%]{right:0}.vertical-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;background:none;border:none;font-size:20px;cursor:pointer;color:#555;border-radius:0;transition:background .15s;display:flex;align-items:center;justify-content:center}.vertical-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f0f0f0}button[_ngcontent-%COMP%]   .ai-icon-bg[_ngcontent-%COMP%], button[_ngcontent-%COMP%]   img[src$="btn-rnb-ai-on@3x.png"][_ngcontent-%COMP%]{background:#555;border-radius:6px;padding:2px}.vertical-menu[_ngcontent-%COMP%]   img[src$="ico-page@3x.png"][_ngcontent-%COMP%]{background:#555;border-radius:2px;padding:2px}.zoom-vertical-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center;margin-bottom:90px}.zoom-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:none;border:none;font-size:20px;cursor:pointer;color:#555;border-radius:0;transition:background .15s;display:flex;align-items:center;justify-content:center}.zoom-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.page-toggle-btn.active[_ngcontent-%COMP%]{background:#f0f0f0!important;border-radius:10px!important;transition:background .2s;width:35px;height:35px}.page-toggle-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:#fff!important;fill:#d32f2f!important;transition:stroke .2s,fill .2s}.edit-toggle-btn.active[_ngcontent-%COMP%], button[title*=\\bc88\\c5ed].active[_ngcontent-%COMP%], button[title*="AI \\bc88\\c5ed"].active[_ngcontent-%COMP%], button[title*="AI \\ae30\\b2a5"].active[_ngcontent-%COMP%], .pdf-content-btn.active[_ngcontent-%COMP%]{background:#d32f2f21!important;border-radius:10px!important;transition:background .2s;width:35px;height:35px}']})};var Fe=class r{constructor(t){this.http=t}API_KEY=Qt.decrypt("KgsOCVlWRk5dGUtAW1pDW1hVDFYeUU0YEBhBSlJcS1RHQUdQQltF");API_URL="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent";translateText(t,e){if(!t.trim())return Oe(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let i={english:"English",korean:"Korean",japanese:"Japanese",chinese:"Chinese",spanish:"Spanish",french:"French",german:"German"}[e]||"English",l={contents:[{parts:[{text:`Translate the following text to ${i}. Provide only the translation without any explanations or additional text:

${t}`}]}],generationConfig:{temperature:.1,topK:1,topP:1,maxOutputTokens:2048}},f=new Re({"Content-Type":"application/json","X-goog-api-key":this.API_KEY});return this.http.post(this.API_URL,l,{headers:f}).pipe(tt(_=>{if(console.log("Gemini API \uC751\uB2F5:",_),_.candidates&&_.candidates.length>0&&_.candidates[0].content&&_.candidates[0].content.parts&&_.candidates[0].content.parts.length>0){let x=_.candidates[0].content.parts[0].text.trim();return{originalText:t,translatedText:x,targetLanguage:i,success:!0}}else throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC744 \uBC1B\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}),nt(_=>{console.error("Gemini API \uBC88\uC5ED \uC624\uB958:",_);let x="\uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return _.error&&_.error.error?x=_.error.error.message||x:_.message&&(x=_.message),Oe(()=>({originalText:t,translatedText:"",targetLanguage:i,success:!1,error:x}))}))}translateMultipleTexts(t,e){let n=[];return new Bt(i=>{let o=0,l=()=>{if(o>=t.length){i.next(n),i.complete();return}let f=t[o];this.translateText(f,e).subscribe({next:_=>{n.push(_),o++,setTimeout(l,100)},error:_=>{n.push({originalText:f,translatedText:"",targetLanguage:e,success:!1,error:_.message||"\uBC88\uC5ED \uC2E4\uD328"}),o++,setTimeout(l,100)}})};l()})}static \u0275fac=function(e){return new(e||r)(Le(gt))};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ie=class r{constructor(t){this.http=t}OLLAMA_BASE_URL="http://localhost:11434";TARGET_MODEL="gemma3:1b";checkOllamaAvailability(){return S(this,null,function*(){try{console.log("Ollama \uC11C\uBC84 \uC0C1\uD0DC \uD655\uC778 \uC911...");let t=yield this.http.get(`${this.OLLAMA_BASE_URL}/api/tags`,{headers:new Re({"Content-Type":"application/json"})}).toPromise();console.log("Ollama \uC11C\uBC84 \uC751\uB2F5:",t);let e=t.models.some(n=>n.name.includes("gemma3:1b")||n.name.includes("gemma3")||n.name.includes("gemma"));return console.log("\uC0AC\uC6A9 \uAC00\uB2A5\uD55C \uBAA8\uB378\uB4E4:",t.models.map(n=>n.name)),console.log(`${this.TARGET_MODEL} \uBAA8\uB378 \uC874\uC7AC:`,e),e}catch(t){return console.log("Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",t),!1}})}translateText(t,e){if(!t.trim())return Oe(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let i={english:"\uC601\uC5B4",korean:"\uD55C\uAD6D\uC5B4",japanese:"\uC77C\uBCF8\uC5B4",chinese:"\uC911\uAD6D\uC5B4",spanish:"\uC2A4\uD398\uC778\uC5B4",french:"\uD504\uB791\uC2A4\uC5B4",german:"\uB3C5\uC77C\uC5B4"}[e]||e,o=`\uB2E4\uC74C \uD14D\uC2A4\uD2B8\uB97C ${i}\uB85C \uBC88\uC5ED\uD574\uC8FC\uC138\uC694. \uBC88\uC5ED\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uD14D\uC2A4\uD2B8:
${t}

\uBC88\uC5ED:`,l={model:this.TARGET_MODEL,prompt:o,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},f=new Re({"Content-Type":"application/json"});return console.log("LocalAI \uBC88\uC5ED \uC694\uCCAD:",{targetLanguage:i,textLength:t.length}),this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,l,{headers:f}).pipe(tt(_=>{if(console.log("LocalAI \uBC88\uC5ED \uC751\uB2F5:",_),_.response&&_.response.trim())return{originalText:t,translatedText:_.response.trim(),targetLanguage:e,success:!0};throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),nt(_=>{console.error("LocalAI \uBC88\uC5ED \uC624\uB958:",_);let x="\uB85C\uCEEC AI \uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return _.status===0?x="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":_.status===404?x=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:_.error?.error?x=_.error.error:_.message&&(x=_.message),Oe(()=>({originalText:t,translatedText:"",targetLanguage:e,success:!1,error:x}))}))}summarizeText(t,e="general",n="medium"){if(!t.trim())return Oe(()=>new Error("\uC694\uC57D\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let i="";switch(e){case"bullet":i="\uB2E4\uC74C \uBB38\uC11C\uC758 \uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638\uAC00 \uB9E4\uACA8\uC9C4 \uBAA9\uB85D\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"qa":i="\uB2E4\uC74C \uBB38\uC11C\uB97C Q&A \uD615\uC2DD\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC8FC\uC694 \uC9C8\uBB38\uACFC \uB2F5\uBCC0\uC73C\uB85C \uAD6C\uC131\uD574\uC8FC\uC138\uC694. ";break;case"structure":i="\uB2E4\uC74C \uBB38\uC11C\uB97C \uAD6C\uC870\uC801\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC81C\uBAA9, \uC8FC\uC694 \uC139\uC158, \uD575\uC2EC \uB0B4\uC6A9\uC744 \uCCB4\uACC4\uC801\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694. ";break;default:i="\uB2E4\uC74C \uBB38\uC11C\uB97C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}switch(n){case"short":i+="\uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"long":i+="\uC790\uC138\uD558\uAC8C 5-6\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;default:i+="\uC801\uC808\uD55C \uAE38\uC774\uB85C 3-4\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}i+=`\uD55C\uAD6D\uC5B4\uB85C \uC791\uC131\uD574\uC8FC\uC138\uC694. \uC694\uC57D\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uBB38\uC11C \uB0B4\uC6A9:
${t}`;let o={model:this.TARGET_MODEL,prompt:i,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},l=new Re({"Content-Type":"application/json"});return console.log("LocalAI \uC694\uC57D \uC694\uCCAD:",{summaryType:e,summaryLength:n,textLength:t.length}),this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,o,{headers:l}).pipe(tt(f=>{if(console.log("LocalAI \uC694\uC57D \uC751\uB2F5:",f),f.response&&f.response.trim())return{originalText:t,translatedText:f.response.trim(),targetLanguage:"korean",success:!0};throw new Error("\uC694\uC57D \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),nt(f=>{console.error("LocalAI \uC694\uC57D \uC624\uB958:",f);let _="\uB85C\uCEEC AI \uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return f.status===0?_="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":f.status===404?_=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:f.error?.error?_=f.error.error:f.message&&(_=f.message),Oe(()=>({originalText:t,translatedText:"",targetLanguage:"korean",success:!1,error:_}))}))}getAvailableModels(){return S(this,null,function*(){try{return(yield this.http.get(`${this.OLLAMA_BASE_URL}/api/tags`).toPromise())?.models.map(e=>e.name)||[]}catch(t){return console.error("\uBAA8\uB378 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328:",t),[]}})}static \u0275fac=function(e){return new(e||r)(Le(gt))};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};function Ro(r,t){r&1&&(a(0,"span",27),g(1,"(\uD655\uC778 \uC911...)"),s())}function $o(r,t){r&1&&(a(0,"span",28),g(1,"(\uC0AC\uC6A9 \uBD88\uAC00)"),s())}function No(r,t){r&1&&(a(0,"span",29),g(1,"(gemma3:1b)"),s())}function jo(r,t){r&1&&(a(0,"div",30)(1,"small"),g(2,"\uB85C\uCEEC Ollama\uC758 gemma3:1b \uBAA8\uB378\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4."),s()())}function Go(r,t){r&1&&(a(0,"div",30)(1,"small"),g(2,"LocalAI\uB97C \uC0AC\uC6A9\uD558\uB824\uBA74 Ollama\uC640 gemma3:1b \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694."),s()())}function Ho(r,t){if(r&1&&(a(0,"div",3)(1,"div",4),g(2,"PDF \uBCF8\uBB38 \uB0B4\uC6A9"),s(),a(3,"div",31),g(4),s(),a(5,"div",32),g(6),s()()),r&2){let e=d();c(4),j(" ",e.pdfContent.length>500?e.pdfContent.substring(0,500)+"...":e.pdfContent," "),c(2),j(" \uCD1D \uAE00\uC790 \uC218: ",e.pdfContent.length," ")}}function Wo(r,t){if(r&1&&(a(0,"option",33),g(1),s()),r&2){let e=t.$implicit;p("value",e.value),c(),j(" ",e.label," ")}}function Uo(r,t){r&1&&(a(0,"span"),g(1,"Gemini AI \uBC88\uC5ED\uD558\uAE30"),s())}function Yo(r,t){r&1&&(a(0,"span"),g(1,"LocalAI \uBC88\uC5ED\uD558\uAE30"),s())}function Ko(r,t){r&1&&(a(0,"span"),g(1,"\uBC88\uC5ED \uC911..."),s())}function qo(r,t){if(r&1&&(a(0,"div",34)(1,"div",35),C(2,"div",36),s(),a(3,"div",37),g(4),s()()),r&2){let e=d();c(2),J("width",e.translationProgress,"%"),c(2),j("\uBC88\uC5ED \uC9C4\uD589 \uC911... ",e.translationProgress,"%")}}function Xo(r,t){if(r&1&&(a(0,"div",43)(1,"div",44),g(2),s()()),r&2){let e=d().$implicit;c(2),F(e.translatedText)}}function Jo(r,t){if(r&1&&(a(0,"div",45),g(1),s()),r&2){let e=d().$implicit;c(),j(" \uBC88\uC5ED \uC2E4\uD328: ",e.error," ")}}function Qo(r,t){if(r&1&&(a(0,"div"),b(1,Xo,3,1,"div",41)(2,Jo,2,1,"div",42),s()),r&2){let e=t.$implicit;c(),p("ngIf",e.success),c(),p("ngIf",!e.success)}}function Zo(r,t){if(r&1&&(a(0,"div",3)(1,"div",4),g(2,"\uBC88\uC5ED \uACB0\uACFC"),s(),a(3,"div",38),b(4,Qo,3,2,"div",39),s(),a(5,"div",40),g(6),s()()),r&2){let e=d();c(4),p("ngForOf",e.translations),c(2),lt(" \uC131\uACF5: ",e.getSuccessfulTranslationCount()," / ",e.translations.length," ")}}var wt=class r{constructor(t,e,n){this.geminiTranslationService=t;this.localAiTranslationService=e;this.pdfTextStreamService=n}isVisible=!1;pdfTextStreamData=null;close=new O;translationCompleted=new O;selectedLanguage="english";isTranslating=!1;translationProgress=0;translations=[];showHighlight=!1;pdfContent="";showPdfContent=!1;isLocalAIAvailable=!1;isCheckingLocalAI=!0;selectedTranslationMethod="gemini";languages=[{value:"english",label:"\uC601\uC5B4"},{value:"korean",label:"\uD55C\uAD6D\uC5B4"},{value:"japanese",label:"\uC77C\uBCF8\uC5B4"},{value:"chinese",label:"\uC911\uAD6D\uC5B4"},{value:"spanish",label:"\uC2A4\uD398\uC778\uC5B4"},{value:"french",label:"\uD504\uB791\uC2A4\uC5B4"},{value:"german",label:"\uB3C5\uC77C\uC5B4"}];ngOnInit(){console.log("AI \uBC88\uC5ED \uD328\uB110 \uCD08\uAE30\uD654"),console.log("PDF \uB370\uC774\uD130 \uC874\uC7AC:",!!this.pdfTextStreamData),this.checkLocalAIAvailability(),this.pdfTextStreamData&&this.extractAndDisplayPdfContent()}ngOnChanges(){console.log("AI \uBC88\uC5ED \uD328\uB110 \uB370\uC774\uD130 \uBCC0\uACBD\uB428"),console.log("PDF \uB370\uC774\uD130 \uC874\uC7AC:",!!this.pdfTextStreamData),this.pdfTextStreamData&&this.extractAndDisplayPdfContent()}checkLocalAIAvailability(){return S(this,null,function*(){this.isCheckingLocalAI=!0;try{this.isLocalAIAvailable=yield this.localAiTranslationService.checkOllamaAvailability(),console.log("LocalAI \uAC00\uC6A9\uC131:",this.isLocalAIAvailable),this.isLocalAIAvailable?console.log("LocalAI\uAC00 \uC0AC\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4. gemma2:1b \uBAA8\uB378\uC774 \uC900\uBE44\uB418\uC5C8\uC2B5\uB2C8\uB2E4."):console.log("LocalAI\uAC00 \uC0AC\uC6A9 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4. Ollama\uAC00 \uC124\uCE58\uB418\uC9C0 \uC54A\uC558\uAC70\uB098 gemma2:1b \uBAA8\uB378\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("LocalAI \uAC00\uC6A9\uC131 \uD655\uC778 \uC911 \uC624\uB958:",t),this.isLocalAIAvailable=!1}finally{this.isCheckingLocalAI=!1}})}onTranslationMethodChange(t){this.selectedTranslationMethod=t,console.log("\uBC88\uC5ED \uBC29\uBC95 \uBCC0\uACBD:",t)}extractAndDisplayPdfContent(){let t=this.extractTextFromPdf();this.pdfContent=t.join(`
`).replace(/\n+/g,`
`).trim(),this.showPdfContent=!0,console.log("\uCD1D \uCD94\uCD9C\uB41C \uD14D\uC2A4\uD2B8 \uC904 \uC218:",t.length),console.log("\uCD5C\uC885 PDF \uB0B4\uC6A9 \uAE38\uC774:",this.pdfContent.length),console.log(`\uCD5C\uC885 PDF \uB0B4\uC6A9:
`,this.pdfContent)}onClose(){this.close.emit()}onLanguageChange(t){this.selectedLanguage=t,console.log("Language changed to:",t)}onStartTranslation(){return S(this,null,function*(){if(!this.pdfTextStreamData||!this.pdfContent){console.error("PDF \uD14D\uC2A4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),alert("PDF\uB97C \uBA3C\uC800 \uB85C\uB4DC\uD574\uC8FC\uC138\uC694.");return}this.isTranslating=!0,this.translationProgress=0,this.translations=[];let t=this.selectedTranslationMethod==="localai"?"LocalAI":"Gemini AI";console.log(`${t} \uBC88\uC5ED \uC2DC\uC791:`,this.selectedLanguage),console.log("\uBC88\uC5ED\uD560 \uC804\uCCB4 \uB0B4\uC6A9:",this.pdfContent);try{this.translationProgress=25,this.selectedTranslationMethod==="localai"?this.localAiTranslationService.translateText(this.pdfContent,this.selectedLanguage).subscribe({next:e=>{this.translationProgress=100;let n={originalText:e.originalText,translatedText:e.translatedText,targetLanguage:e.targetLanguage,success:e.success,error:e.error};this.translations=[n],console.log("LocalAI \uBC88\uC5ED \uC644\uB8CC:",e),e.success?(console.log("LocalAI \uBC88\uC5ED\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),console.log("\uBC88\uC5ED\uB41C \uB0B4\uC6A9:",e.translatedText),this.translationCompleted.emit([n])):(console.error("LocalAI \uBC88\uC5ED\uC774 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4:",e.error),alert(`LocalAI \uBC88\uC5ED \uC2E4\uD328: ${e.error}`)),this.isTranslating=!1},error:e=>{console.error("LocalAI \uBC88\uC5ED \uC624\uB958:",e),alert(`LocalAI \uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e.error||e.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`),this.isTranslating=!1}}):this.geminiTranslationService.translateText(this.pdfContent,this.selectedLanguage).subscribe({next:e=>{this.translationProgress=100,this.translations=[e],console.log("Gemini \uBC88\uC5ED \uC644\uB8CC:",e),e.success?(console.log("Gemini \uBC88\uC5ED\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),console.log("\uBC88\uC5ED\uB41C \uB0B4\uC6A9:",e.translatedText),this.translationCompleted.emit([e])):(console.error("Gemini \uBC88\uC5ED\uC774 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4:",e.error),alert(`Gemini \uBC88\uC5ED \uC2E4\uD328: ${e.error}`)),this.isTranslating=!1},error:e=>{console.error("Gemini \uBC88\uC5ED \uC624\uB958:",e),alert(`Gemini \uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e.error||e.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`),this.isTranslating=!1}})}catch(e){console.error("\uBC88\uC5ED \uC2DC\uC791 \uC624\uB958:",e),alert("\uBC88\uC5ED\uC744 \uC2DC\uC791\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.isTranslating=!1}})}extractTextFromPdf(){let t=[];if(!this.pdfTextStreamData?.pages)return console.log("PDF \uD398\uC774\uC9C0 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),t;console.log("PDF \uD398\uC774\uC9C0 \uC218:",this.pdfTextStreamData.pages.length);for(let e=0;e<this.pdfTextStreamData.pages.length;e++){let n=this.pdfTextStreamData.pages[e];if(console.log(`\uD398\uC774\uC9C0 ${e+1} \uCC98\uB9AC \uC911...`),n.sentences&&n.sentences.length>0){console.log(`\uD398\uC774\uC9C0 ${e+1}\uC758 \uBB38\uC7A5 \uC218:`,n.sentences.length);for(let i=0;i<n.sentences.length;i++){let o=n.sentences[i];if(o.text&&o.text.trim().length>0){let l=o.text.trim();t.push(l),console.log(`\uBB38\uC7A5 ${i+1}: ${l}`)}}}else if(n.textItems&&n.textItems.length>0){console.log(`\uD398\uC774\uC9C0 ${e+1}\uC758 \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C \uC218:`,n.textItems.length);let i=n.textItems.filter(x=>x.text&&x.text.trim().length>0).map(x=>({text:x.text.trim(),x:x.position.x,y:x.position.y,width:x.position.width,height:x.position.height})).sort((x,P)=>{let M=P.y-x.y;return Math.abs(M)>15?M:x.x-P.x});console.log("\uC815\uB82C\uB41C \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C\uB4E4:"),i.forEach((x,P)=>{console.log(`${P}: (${x.x.toFixed(1)}, ${x.y.toFixed(1)}) "${x.text}"`)});let o=[],l="",f=i.length>0?i[0].y:0,_=i.length>0?i[0].x:0;for(let x of i)Math.abs(x.y-f)>15?(l.trim()&&(o.push(l.trim()),console.log(`\uC644\uC131\uB41C \uC904: "${l.trim()}"`)),l=x.text,f=x.y,_=x.x):(x.x-(_+50)>20?l+=" "+x.text:l+=x.text,_=x.x);l.trim()&&(o.push(l.trim()),console.log(`\uB9C8\uC9C0\uB9C9 \uC904: "${l.trim()}"`)),t.push(...o)}else console.log(`\uD398\uC774\uC9C0 ${e+1}\uC5D0 \uD14D\uC2A4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`)}return console.log("\uCD5C\uC885 \uC815\uB82C\uB41C \uD14D\uC2A4\uD2B8:"),t.forEach((e,n)=>{console.log(`${n+1}: ${e}`)}),t}onToggleHighlight(){this.showHighlight=!this.showHighlight,console.log("Translation highlight:",this.showHighlight)}getTranslationPreview(){if(this.translations.length===0)return"\uBC88\uC5ED \uACB0\uACFC\uAC00 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4.";let t=this.translations.filter(e=>e.success);return t.length===0?"\uBC88\uC5ED\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.":t.slice(0,3).map(e=>e.translatedText.substring(0,50)+(e.translatedText.length>50?"...":"")).join(`

`)}getSuccessfulTranslationCount(){return this.translations.filter(t=>t.success).length}static \u0275fac=function(e){return new(e||r)(ee(Fe),ee(Ie),ee(ye))};static \u0275cmp=N({type:r,selectors:[["app-ai-translate-panel"]],inputs:{isVisible:"isVisible",pdfTextStreamData:"pdfTextStreamData"},outputs:{close:"close",translationCompleted:"translationCompleted"},standalone:!1,features:[ne],decls:51,vars:23,consts:[[1,"ai-translate-panel"],[1,"sidebar-header"],["title","\uB2EB\uAE30",1,"close-panel-btn",3,"click"],[1,"panel-section"],[1,"panel-title"],[1,"subtitle"],[1,"divider"],[1,"translation-method-selector"],[1,"selector-label"],[1,"method-options"],[1,"method-option"],["type","radio","name","translationMethod","value","gemini",3,"ngModelChange","change","ngModel"],[1,"method-label"],["type","radio","name","translationMethod","value","localai",3,"ngModelChange","change","disabled","ngModel"],["class","checking",4,"ngIf"],["class","unavailable",4,"ngIf"],["class","available",4,"ngIf"],["class","method-info",4,"ngIf"],["class","panel-section",4,"ngIf"],[1,"language-selector"],[1,"language-dropdown",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"translate-start-btn",3,"click","disabled"],[4,"ngIf"],["class","translation-progress",4,"ngIf"],[1,"panel-section","info-section"],[1,"info-text"],[1,"checking"],[1,"unavailable"],[1,"available"],[1,"method-info"],[1,"pdf-content-preview"],[1,"content-stats"],[3,"value"],[1,"translation-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"translation-full-content"],[4,"ngFor","ngForOf"],[1,"translation-stats"],["class","translation-item",4,"ngIf"],["class","translation-error",4,"ngIf"],[1,"translation-item"],[1,"translation-text"],[1,"translation-error"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return n.onClose()}),g(3," \xD7 "),s()(),a(4,"div",3)(5,"div",4),g(6,"AI \uBC88\uC5ED\uD558\uAE30"),s(),a(7,"div",5),g(8,"\uBC88\uC5ED\uD560 \uC5B8\uC5B4\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694"),s(),C(9,"hr",6),s(),a(10,"div",3)(11,"div",7)(12,"label",8),g(13,"\uBC88\uC5ED \uBC29\uBC95"),s(),a(14,"div",9)(15,"label",10)(16,"input",11),W("ngModelChange",function(o){return H(n.selectedTranslationMethod,o)||(n.selectedTranslationMethod=o),o}),h("change",function(){return n.onTranslationMethodChange("gemini")}),s(),a(17,"span",12),g(18,"Gemini AI"),s()(),a(19,"label",10)(20,"input",13),W("ngModelChange",function(o){return H(n.selectedTranslationMethod,o)||(n.selectedTranslationMethod=o),o}),h("change",function(){return n.onTranslationMethodChange("localai")}),s(),a(21,"span",12),g(22," LocalAI "),b(23,Ro,2,0,"span",14)(24,$o,2,0,"span",15)(25,No,2,0,"span",16),s()()(),b(26,jo,3,0,"div",17)(27,Go,3,0,"div",17),s()(),b(28,Ho,7,2,"div",18),a(29,"div",3)(30,"div",19)(31,"label",8),g(32,"\uBC88\uC5ED\uD560 \uC5B8\uC5B4"),s(),a(33,"select",20),W("ngModelChange",function(o){return H(n.selectedLanguage,o)||(n.selectedLanguage=o),o}),h("change",function(){return n.onLanguageChange(n.selectedLanguage)}),b(34,Wo,2,2,"option",21),s()()(),a(35,"div",3)(36,"button",22),h("click",function(){return n.onStartTranslation()}),b(37,Uo,2,0,"span",23)(38,Yo,2,0,"span",23)(39,Ko,2,0,"span",23),s(),b(40,qo,5,3,"div",24),s(),b(41,Zo,7,3,"div",18),a(42,"div",25)(43,"div",26),g(44," AI\uAC00 \uC0DD\uC131\uD55C \uBC88\uC5ED\uC740 \uC644\uB8CC\uB41C \uC758\uBBF8\uC640 "),C(45,"br"),g(46," \uB2E4\uB974\uAC8C \uD574\uC11D\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. "),C(47,"br"),g(48," \uC911\uC694\uD55C \uB0B4\uC6A9\uC740 \uC6D0\uBB38\uACFC \uD568\uAED8 "),C(49,"br"),g(50," \uB2E4\uC2DC \uD655\uC778\uD574\uC8FC\uC138\uC694. "),s()()()),e&2&&(J("display",n.isVisible?"":"none"),T("closed",!n.isVisible),c(16),G("ngModel",n.selectedTranslationMethod),c(3),T("disabled",!n.isLocalAIAvailable),c(),p("disabled",!n.isLocalAIAvailable),G("ngModel",n.selectedTranslationMethod),c(3),p("ngIf",n.isCheckingLocalAI),c(),p("ngIf",!n.isCheckingLocalAI&&!n.isLocalAIAvailable),c(),p("ngIf",!n.isCheckingLocalAI&&n.isLocalAIAvailable),c(),p("ngIf",n.selectedTranslationMethod==="localai"&&n.isLocalAIAvailable),c(),p("ngIf",!n.isLocalAIAvailable&&!n.isCheckingLocalAI),c(),p("ngIf",n.showPdfContent&&n.pdfContent),c(5),G("ngModel",n.selectedLanguage),c(),p("ngForOf",n.languages),c(2),p("disabled",n.isTranslating||n.selectedTranslationMethod==="localai"&&!n.isLocalAIAvailable),c(),p("ngIf",!n.isTranslating&&n.selectedTranslationMethod==="gemini"),c(),p("ngIf",!n.isTranslating&&n.selectedTranslationMethod==="localai"),c(),p("ngIf",n.isTranslating),c(),p("ngIf",n.isTranslating),c(),p("ngIf",n.translations.length>0))},dependencies:[Q,Y,ve,we,ue,Pe,Ne,fe,he],styles:[`@charset "UTF-8";.ai-translate-panel[_ngcontent-%COMP%]{position:fixed;top:130px;right:0;bottom:0;width:300px;background:#fff;border-left:1px solid #e0e0e0;box-shadow:-2px 0 8px #0000001a;padding:16px;overflow-y:auto;z-index:1000;transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1);transform:translate(0);opacity:1}.ai-translate-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:8px 8px 8px 0}.close-panel-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;cursor:pointer;width:24px;height:24px;line-height:1;display:flex;align-items:center;justify-content:center;color:#888;border-radius:4px;transition:background .15s}.close-panel-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.panel-section[_ngcontent-%COMP%]{margin-bottom:20px}.panel-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:4px;color:#333}.subtitle[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-bottom:12px}.divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #eee;margin:12px 0}.language-selector[_ngcontent-%COMP%], .translation-method-selector[_ngcontent-%COMP%]{margin-bottom:16px}.method-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px}.method-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #e0e0e0;border-radius:6px;cursor:pointer;transition:border-color .15s,background-color .15s}.method-option[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#007aff;background-color:#f8f9ff}.method-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background-color:#f5f5f5}.method-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.method-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.checking[_ngcontent-%COMP%]{color:#666;font-size:12px}.unavailable[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px}.available[_ngcontent-%COMP%]{color:#28a745;font-size:12px}.method-info[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background-color:#f8f9fa;border-radius:4px;border-left:3px solid #007AFF}.method-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:12px}.selector-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#333;margin-bottom:8px}.language-dropdown[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #e0e0e0;border-radius:6px;background:#fff;font-size:14px;color:#333;cursor:pointer;transition:all .15s;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:16px}.language-dropdown[_ngcontent-%COMP%]:hover{border-color:#007aff;background-color:#f8f9ff}.language-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#007aff;box-shadow:0 0 0 3px #007aff1a}.translate-start-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:#007aff;color:#fff;border:none;border-radius:6px;font-size:15px;font-weight:500;cursor:pointer;transition:background .15s}.translate-start-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.translate-start-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.translation-progress[_ngcontent-%COMP%]{margin-top:16px}.progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:#f0f0f0;border-radius:3px;overflow:hidden;margin-bottom:8px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#007aff,#0056b3);border-radius:3px;transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{font-size:12px;color:#666;text-align:center}.translation-preview[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:12px;margin-bottom:8px;font-size:13px;line-height:1.4;color:#555;max-height:120px;overflow-y:auto;white-space:pre-line}.translation-full-content[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:16px;margin-bottom:8px;max-height:400px;overflow-y:auto}.translation-item[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e9ecef}.translation-item[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.translation-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:#333;white-space:pre-wrap;word-break:break-word}.translation-error[_ngcontent-%COMP%]{color:#dc3545;font-size:13px;font-style:italic;padding:8px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;margin-bottom:8px}.translation-stats[_ngcontent-%COMP%]{font-size:12px;color:#888;text-align:center;font-weight:500}.pdf-content-preview[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:12px;margin-bottom:8px;font-size:12px;line-height:1.4;color:#555;max-height:150px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.content-stats[_ngcontent-%COMP%]{font-size:11px;color:#888;text-align:right;margin-bottom:8px}.translate-options[_ngcontent-%COMP%]{margin-top:16px}.option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#333;cursor:pointer}.option-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.info-section[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:#f8f9fa;border-radius:6px}.info-text[_ngcontent-%COMP%]{font-size:12px;color:#666;line-height:1.4;text-align:center}`]})};function tr(r,t){if(r&1&&(a(0,"div",26),g(1),s()),r&2){let e=d();c(),j(" ",e.pdfContent.length>500?e.pdfContent.substring(0,500)+"...":e.pdfContent," ")}}function nr(r,t){if(r&1&&(a(0,"div",27),g(1),s()),r&2){let e=d();c(),j(" \uCD1D \uAE00\uC790 \uC218: ",e.pdfContent.length," ")}}function ir(r,t){r&1&&(a(0,"div",28),g(1," PDF\uB97C \uB85C\uB4DC\uD558\uBA74 \uBCF8\uBB38 \uB0B4\uC6A9\uC774 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4. "),s())}function or(r,t){r&1&&(a(0,"span",29),g(1,"(\uD655\uC778 \uC911...)"),s())}function rr(r,t){r&1&&(a(0,"span",30),g(1,"(\uC0AC\uC6A9 \uBD88\uAC00)"),s())}function ar(r,t){r&1&&(a(0,"span",31),g(1,"(gemma3:1b)"),s())}function sr(r,t){r&1&&(a(0,"div",32)(1,"small"),g(2,"\uB85C\uCEEC Ollama\uC758 gemma3:1b \uBAA8\uB378\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4."),s()())}function lr(r,t){r&1&&(a(0,"div",32)(1,"small"),g(2,"LocalAI\uB97C \uC0AC\uC6A9\uD558\uB824\uBA74 Ollama\uC640 gemma3:1b \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694."),s()())}function cr(r,t){if(r&1&&(a(0,"option",33),g(1),s()),r&2){let e=t.$implicit;p("value",e.value),c(),j(" ",e.label," ")}}function dr(r,t){if(r&1&&(a(0,"option",33),g(1),s()),r&2){let e=t.$implicit;p("value",e.value),c(),j(" ",e.label," ")}}function pr(r,t){r&1&&(a(0,"span"),g(1,"Gemini AI \uC694\uC57D \uC0DD\uC131"),s())}function gr(r,t){r&1&&(a(0,"span"),g(1,"LocalAI \uC694\uC57D \uC0DD\uC131"),s())}function mr(r,t){r&1&&(a(0,"span"),g(1,"\uC0DD\uC131 \uC911..."),s())}function ur(r,t){if(r&1){let e=w();a(0,"div",36)(1,"div",37),g(2),s(),a(3,"div",38)(4,"button",39),h("click",function(){m(e);let i=d(2);return u(i.onCopySummary())}),g(5," \u{1F4CB} \uBCF5\uC0AC "),s(),a(6,"button",40),h("click",function(){m(e);let i=d(2);return u(i.onExportSummary())}),g(7," \u{1F4BE} \uC800\uC7A5 "),s()()()}if(r&2){let e=d(2);c(2),F(e.summaryText)}}function fr(r,t){r&1&&(a(0,"div",41),C(1,"div",42),a(2,"div",43),g(3,"AI\uAC00 \uBB38\uC11C\uB97C \uBD84\uC11D\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."),s()())}function hr(r,t){if(r&1&&(a(0,"div",4)(1,"div",5),g(2,"\uC694\uC57D \uACB0\uACFC"),s(),b(3,ur,8,1,"div",34)(4,fr,4,0,"div",35),s()),r&2){let e=d();c(3),p("ngIf",!e.isLoading),c(),p("ngIf",e.isLoading)}}function _r(r,t){r&1&&(a(0,"div",4)(1,"div",44)(2,"div",45),g(3,"\u{1F916}"),s(),a(4,"div",46)(5,"p")(6,"strong"),g(7,"AI \uC694\uC57D \uAE30\uB2A5"),s()(),a(8,"p"),g(9,"\uBB38\uC11C\uC758 \uD575\uC2EC \uB0B4\uC6A9\uC744 AI\uAC00 \uC790\uB3D9\uC73C\uB85C \uC694\uC57D\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),s(),a(10,"ul")(11,"li"),g(12,"\u2022 \uBE60\uB978 \uBB38\uC11C \uC774\uD574"),s(),a(13,"li"),g(14,"\u2022 \uD575\uC2EC \uD3EC\uC778\uD2B8 \uCD94\uCD9C"),s(),a(15,"li"),g(16,"\u2022 \uB2E4\uC591\uD55C \uC694\uC57D \uC2A4\uD0C0\uC77C"),s()()()()())}var Pt=class r{constructor(t,e,n){this.geminiTranslationService=t;this.localAiTranslationService=e;this.pdfTextStreamService=n}isVisible=!1;pdfTextStreamData=null;close=new O;summaryText="";isLoading=!1;summaryLength="medium";summaryType="general";pdfContent="";showPdfContent=!1;isLocalAIAvailable=!1;isCheckingLocalAI=!0;selectedSummaryMethod="gemini";summaryLengthOptions=[{value:"short",label:"\uC9E7\uAC8C (1-2\uBB38\uB2E8)"},{value:"medium",label:"\uBCF4\uD1B5 (3-4\uBB38\uB2E8)"},{value:"long",label:"\uC790\uC138\uD788 (5-6\uBB38\uB2E8)"}];summaryTypeOptions=[{value:"general",label:"\uC77C\uBC18 \uC694\uC57D"},{value:"bullet",label:"\uD575\uC2EC \uD3EC\uC778\uD2B8"},{value:"qa",label:"Q&A \uD615\uC2DD"},{value:"structure",label:"\uAD6C\uC870\uC801 \uC694\uC57D"}];ngOnInit(){console.log("=== AI \uAE30\uB2A5 \uD328\uB110 \uCD08\uAE30\uD654 ==="),console.log("PDF \uB370\uC774\uD130 \uC874\uC7AC:",!!this.pdfTextStreamData),console.log("PDF \uB370\uC774\uD130:",this.pdfTextStreamData),console.log("\uD604\uC7AC pdfContent:",this.pdfContent),console.log("\uD604\uC7AC showPdfContent:",this.showPdfContent),this.checkLocalAIAvailability(),this.pdfTextStreamData?this.extractAndDisplayPdfContent():console.log("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC5B4\uC11C \uB0B4\uC6A9 \uCD94\uCD9C\uC744 \uAC74\uB108\uB701\uB2C8\uB2E4.")}ngOnChanges(){console.log("=== AI \uAE30\uB2A5 \uD328\uB110 \uB370\uC774\uD130 \uBCC0\uACBD\uB428 ==="),console.log("PDF \uB370\uC774\uD130 \uC874\uC7AC:",!!this.pdfTextStreamData),console.log("PDF \uB370\uC774\uD130:",this.pdfTextStreamData),this.pdfTextStreamData?this.extractAndDisplayPdfContent():console.log("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC5B4\uC11C \uB0B4\uC6A9 \uCD94\uCD9C\uC744 \uAC74\uB108\uB701\uB2C8\uB2E4.")}checkLocalAIAvailability(){return S(this,null,function*(){this.isCheckingLocalAI=!0;try{this.isLocalAIAvailable=yield this.localAiTranslationService.checkOllamaAvailability(),console.log("LocalAI \uAC00\uC6A9\uC131 (\uC694\uC57D):",this.isLocalAIAvailable),this.isLocalAIAvailable?console.log("LocalAI\uAC00 \uC0AC\uC6A9 \uAC00\uB2A5\uD569\uB2C8\uB2E4. gemma3:1b \uBAA8\uB378\uC774 \uC900\uBE44\uB418\uC5C8\uC2B5\uB2C8\uB2E4."):console.log("LocalAI\uAC00 \uC0AC\uC6A9 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4. Ollama\uAC00 \uC124\uCE58\uB418\uC9C0 \uC54A\uC558\uAC70\uB098 gemma3:1b \uBAA8\uB378\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("LocalAI \uAC00\uC6A9\uC131 \uD655\uC778 \uC911 \uC624\uB958:",t),this.isLocalAIAvailable=!1}finally{this.isCheckingLocalAI=!1}})}onSummaryMethodChange(t){this.selectedSummaryMethod=t,console.log("\uC694\uC57D \uBC29\uBC95 \uBCC0\uACBD:",t)}onClose(){this.close.emit()}extractAndDisplayPdfContent(){let t=this.extractTextFromPdf();this.pdfContent=t.join(`
`).replace(/\n+/g,`
`).trim(),this.showPdfContent=!0,console.log("AI \uAE30\uB2A5 \uD328\uB110 - \uCD1D \uCD94\uCD9C\uB41C \uD14D\uC2A4\uD2B8 \uC904 \uC218:",t.length),console.log("AI \uAE30\uB2A5 \uD328\uB110 - \uCD5C\uC885 PDF \uB0B4\uC6A9 \uAE38\uC774:",this.pdfContent.length),console.log(`AI \uAE30\uB2A5 \uD328\uB110 - PDF \uB0B4\uC6A9:
`,this.pdfContent)}extractTextFromPdf(){let t=[];if(!this.pdfTextStreamData?.pages)return console.log("PDF \uD398\uC774\uC9C0 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),t;let e=(n,i,o)=>{let l=n.trim(),f=i<o*.1,_=/\.(pdf|doc|docx|txt|hwp)$/i.test(l),x=/^page\s*\d+$|^\d+\s*$|^\d+\s*\/\s*\d+$|^p\.\s*\d+$/i.test(l),P=/^\d{4}[-\/]\d{1,2}[-\/]\d{1,2}$|^\d{1,2}[-\/]\d{1,2}[-\/]\d{4}$/.test(l),M=f&&l.length<50&&(l.includes(".")||/^[a-zA-Z0-9\s\-_()]+$/.test(l)),v=f&&/AI.*PDF|PDF.*AI|보고서|report|document/i.test(l);return _||x||P||M||v};for(let n=0;n<this.pdfTextStreamData.pages.length;n++){let i=this.pdfTextStreamData.pages[n],o=800;if(i.textItems&&i.textItems.length>0){let l=i.textItems.map(f=>f.position.y);o=Math.max(...l)-Math.min(...l)+100}if(i.sentences&&i.sentences.length>0){for(let l of i.sentences)if(l.text&&l.text.trim().length>0){let f=l.text.trim();e(f,l.position.y,o)||t.push(f)}}}return t}onGenerateSummary(){if(!this.pdfTextStreamData||!this.pdfContent){console.error("PDF \uD14D\uC2A4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),alert("PDF\uB97C \uBA3C\uC800 \uB85C\uB4DC\uD574\uC8FC\uC138\uC694.");return}this.isLoading=!0,this.summaryText="";let t=this.selectedSummaryMethod==="localai"?"LocalAI":"Gemini AI";if(console.log(`${t} \uC694\uC57D \uC2DC\uC791`),console.log("\uC694\uC57D \uAE38\uC774:",this.summaryLength),console.log("\uC694\uC57D \uC720\uD615:",this.summaryType),this.selectedSummaryMethod==="localai")this.localAiTranslationService.summarizeText(this.pdfContent,this.summaryType,this.summaryLength).subscribe({next:e=>{e.success?(this.summaryText=e.translatedText,console.log("LocalAI \uC694\uC57D \uC644\uB8CC:",this.summaryText)):(console.error("LocalAI \uC694\uC57D \uC2E4\uD328:",e.error),alert(`LocalAI \uC694\uC57D \uC2E4\uD328: ${e.error}`)),this.isLoading=!1},error:e=>{console.error("LocalAI \uC694\uC57D \uC624\uB958:",e),alert(`LocalAI \uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e.error||e.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`),this.isLoading=!1}});else{let e=this.generateSummaryPrompt();this.geminiTranslationService.translateText(e,"korean").subscribe({next:n=>{n.success?(this.summaryText=n.translatedText,console.log("Gemini \uC694\uC57D \uC644\uB8CC:",this.summaryText)):(console.error("Gemini \uC694\uC57D \uC2E4\uD328:",n.error),alert(`Gemini \uC694\uC57D \uC2E4\uD328: ${n.error}`)),this.isLoading=!1},error:n=>{console.error("Gemini \uC694\uC57D \uC624\uB958:",n),alert(`Gemini \uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${n.error||n.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`),this.isLoading=!1}})}}generateSummaryPrompt(){let t="";switch(this.summaryType){case"bullet":t="\uB2E4\uC74C \uBB38\uC11C\uC758 \uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638\uAC00 \uB9E4\uACA8\uC9C4 \uBAA9\uB85D\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"qa":t="\uB2E4\uC74C \uBB38\uC11C\uB97C Q&A \uD615\uC2DD\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC8FC\uC694 \uC9C8\uBB38\uACFC \uB2F5\uBCC0\uC73C\uB85C \uAD6C\uC131\uD574\uC8FC\uC138\uC694. ";break;case"structure":t="\uB2E4\uC74C \uBB38\uC11C\uB97C \uAD6C\uC870\uC801\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC81C\uBAA9, \uC8FC\uC694 \uC139\uC158, \uD575\uC2EC \uB0B4\uC6A9\uC744 \uCCB4\uACC4\uC801\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694. ";break;default:t="\uB2E4\uC74C \uBB38\uC11C\uB97C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}switch(this.summaryLength){case"short":t+="\uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"long":t+="\uC790\uC138\uD558\uAC8C 5-6\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;default:t+="\uC801\uC808\uD55C \uAE38\uC774\uB85C 3-4\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}return t+=`\uD55C\uAD6D\uC5B4\uB85C \uC791\uC131\uD574\uC8FC\uC138\uC694.

\uBB38\uC11C \uB0B4\uC6A9:
${this.pdfContent}`,t}onCopySummary(){this.summaryText&&(navigator.clipboard.writeText(this.summaryText),console.log("\uC694\uC57D \uB0B4\uC6A9\uC774 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}onExportSummary(){if(this.summaryText){let t=new Blob([this.summaryText],{type:"text/plain"}),e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="ai-summary.txt",n.click(),URL.revokeObjectURL(e)}}static \u0275fac=function(e){return new(e||r)(ee(Fe),ee(Ie),ee(ye))};static \u0275cmp=N({type:r,selectors:[["app-ai-features-panel"]],inputs:{isVisible:"isVisible",pdfTextStreamData:"pdfTextStreamData"},outputs:{close:"close"},standalone:!1,features:[ne],decls:49,vars:27,consts:[[1,"ai-features-panel"],[1,"sidebar-header"],[1,"panel-main-title"],["title","\uB2EB\uAE30",1,"close-panel-btn",3,"click"],[1,"panel-section"],[1,"panel-title"],["class","pdf-content-preview",4,"ngIf"],["class","content-stats",4,"ngIf"],["class","no-content-message",4,"ngIf"],[1,"setting-group"],[1,"setting-label"],[1,"method-options"],[1,"method-option"],["type","radio","name","summaryMethod","value","gemini",3,"ngModelChange","change","ngModel"],[1,"method-label"],["type","radio","name","summaryMethod","value","localai",3,"ngModelChange","change","disabled","ngModel"],["class","checking",4,"ngIf"],["class","unavailable",4,"ngIf"],["class","available",4,"ngIf"],["class","method-info",4,"ngIf"],[1,"property-input",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"generate-btn",3,"click","disabled"],[4,"ngIf"],[1,"divider"],["class","panel-section",4,"ngIf"],[1,"pdf-content-preview"],[1,"content-stats"],[1,"no-content-message"],[1,"checking"],[1,"unavailable"],[1,"available"],[1,"method-info"],[3,"value"],["class","summary-result",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"summary-result"],[1,"summary-text"],[1,"summary-actions"],["title","\uBCF5\uC0AC",1,"action-btn",3,"click"],["title","\uB0B4\uBCF4\uB0B4\uAE30",1,"action-btn",3,"click"],[1,"loading-state"],[1,"spinner"],[1,"loading-text"],[1,"info-box"],[1,"info-icon"],[1,"info-text"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),g(3,"AI \uC694\uC57D"),s(),a(4,"button",3),h("click",function(){return n.onClose()}),g(5," \xD7 "),s()(),a(6,"div",4)(7,"div",5),g(8,"PDF \uBCF8\uBB38 \uB0B4\uC6A9"),s(),b(9,tr,2,1,"div",6)(10,nr,2,1,"div",7)(11,ir,2,0,"div",8),s(),a(12,"div",4)(13,"div",5),g(14,"\uC694\uC57D \uC124\uC815"),s(),a(15,"div",9)(16,"label",10),g(17,"\uC694\uC57D \uBC29\uBC95"),s(),a(18,"div",11)(19,"label",12)(20,"input",13),W("ngModelChange",function(o){return H(n.selectedSummaryMethod,o)||(n.selectedSummaryMethod=o),o}),h("change",function(){return n.onSummaryMethodChange("gemini")}),s(),a(21,"span",14),g(22,"Gemini AI"),s()(),a(23,"label",12)(24,"input",15),W("ngModelChange",function(o){return H(n.selectedSummaryMethod,o)||(n.selectedSummaryMethod=o),o}),h("change",function(){return n.onSummaryMethodChange("localai")}),s(),a(25,"span",14),g(26," LocalAI "),b(27,or,2,0,"span",16)(28,rr,2,0,"span",17)(29,ar,2,0,"span",18),s()()(),b(30,sr,3,0,"div",19)(31,lr,3,0,"div",19),s(),a(32,"div",9)(33,"label",10),g(34,"\uC694\uC57D \uAE38\uC774"),s(),a(35,"select",20),W("ngModelChange",function(o){return H(n.summaryLength,o)||(n.summaryLength=o),o}),b(36,cr,2,2,"option",21),s()(),a(37,"div",9)(38,"label",10),g(39,"\uC694\uC57D \uC720\uD615"),s(),a(40,"select",20),W("ngModelChange",function(o){return H(n.summaryType,o)||(n.summaryType=o),o}),b(41,dr,2,2,"option",21),s()(),a(42,"button",22),h("click",function(){return n.onGenerateSummary()}),b(43,pr,2,0,"span",23)(44,gr,2,0,"span",23)(45,mr,2,0,"span",23),s(),C(46,"hr",24),s(),b(47,hr,5,2,"div",25)(48,_r,17,0,"div",25),s()),e&2&&(J("display",n.isVisible?"":"none"),T("closed",!n.isVisible),c(9),p("ngIf",n.pdfContent),c(),p("ngIf",n.pdfContent),c(),p("ngIf",!n.pdfContent),c(9),G("ngModel",n.selectedSummaryMethod),c(3),T("disabled",!n.isLocalAIAvailable),c(),p("disabled",!n.isLocalAIAvailable),G("ngModel",n.selectedSummaryMethod),c(3),p("ngIf",n.isCheckingLocalAI),c(),p("ngIf",!n.isCheckingLocalAI&&!n.isLocalAIAvailable),c(),p("ngIf",!n.isCheckingLocalAI&&n.isLocalAIAvailable),c(),p("ngIf",n.selectedSummaryMethod==="localai"&&n.isLocalAIAvailable),c(),p("ngIf",!n.isLocalAIAvailable&&!n.isCheckingLocalAI),c(4),G("ngModel",n.summaryLength),c(),p("ngForOf",n.summaryLengthOptions),c(4),G("ngModel",n.summaryType),c(),p("ngForOf",n.summaryTypeOptions),c(),p("disabled",n.isLoading||n.selectedSummaryMethod==="localai"&&!n.isLocalAIAvailable),c(),p("ngIf",!n.isLoading&&n.selectedSummaryMethod==="gemini"),c(),p("ngIf",!n.isLoading&&n.selectedSummaryMethod==="localai"),c(),p("ngIf",n.isLoading),c(2),p("ngIf",n.summaryText||n.isLoading),c(),p("ngIf",!n.summaryText&&!n.isLoading))},dependencies:[Q,Y,ve,we,ue,Pe,Ne,fe,he],styles:['@charset "UTF-8";.ai-features-panel[_ngcontent-%COMP%]{position:fixed;top:130px;right:0;bottom:0;width:320px;background:#fff;border-left:1px solid #e0e0e0;box-shadow:-2px 0 8px #0000001a;padding:16px;overflow-y:auto;z-index:1000;transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1);transform:translate(0);opacity:1}.ai-features-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 8px 8px 0;margin-bottom:16px}.panel-main-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0}.close-panel-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;cursor:pointer;width:24px;height:24px;line-height:1;display:flex;align-items:center;justify-content:center;color:#888;border-radius:4px;transition:background .15s}.close-panel-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.panel-section[_ngcontent-%COMP%]{margin-bottom:20px}.panel-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:12px;color:#333}.setting-group[_ngcontent-%COMP%]{margin-bottom:12px}.method-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px}.method-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #e0e0e0;border-radius:6px;cursor:pointer;transition:border-color .15s,background-color .15s}.method-option[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#007aff;background-color:#f8f9ff}.method-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background-color:#f5f5f5}.method-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.method-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.checking[_ngcontent-%COMP%]{color:#666;font-size:12px}.unavailable[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px}.available[_ngcontent-%COMP%]{color:#28a745;font-size:12px}.method-info[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background-color:#f8f9fa;border-radius:4px;border-left:3px solid #007AFF}.method-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:12px}.setting-label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#555;margin-bottom:6px;font-weight:500}.property-input[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:6px;font-size:13px;background:#fff;transition:border-color .15s}.property-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007aff;box-shadow:0 0 0 2px #007aff1a}.generate-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#007aff,#5856d6);color:#fff;border:none;padding:12px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-top:8px}.generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #007aff4d}.generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #eee;margin:16px 0}.summary-result[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;border:1px solid #e9ecef}.summary-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:#333;margin-bottom:16px;white-space:pre-wrap}.summary-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.action-btn[_ngcontent-%COMP%]{flex:1;background:#fff;border:1px solid #ddd;padding:8px 12px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .15s}.action-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#bbb}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:24px 16px}.spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #f3f3f3;border-top:3px solid #007AFF;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:13px;color:#666}.info-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-radius:12px;padding:20px;text-align:center;border:1px solid #dee2e6}.info-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}.info-text[_ngcontent-%COMP%]{color:#555}.info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px}.info-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.info-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:12px 0 0;text-align:left}.info-text[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;margin-bottom:4px;color:#666}.content-view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b8,#138496);border:none;color:#fff;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:13px;font-weight:500;width:100%;margin-top:8px;transition:all .2s ease}.content-view-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#138496,#117a8b);transform:translateY(-1px);box-shadow:0 4px 8px #1384964d}.content-view-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #13849633}.pdf-content-preview[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:12px;margin-bottom:8px;font-size:12px;line-height:1.4;color:#555;max-height:150px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.content-stats[_ngcontent-%COMP%]{font-size:11px;color:#888;text-align:right;margin-bottom:8px}.no-content-message[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:20px;text-align:center;color:#6c757d;font-size:13px;font-style:italic}']})};var Qe=class r{fontData=null;constructor(){this.loadKoreanFont()}loadKoreanFont(){return S(this,null,function*(){if(this.fontData)return!0;try{let t=yield fetch("/fonts/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("\uB85C\uCEEC \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("\uB85C\uCEEC \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://github.com/google/fonts/raw/main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("GitHub \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("GitHub \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}try{let t=yield fetch("https://cdn.jsdelivr.net/gh/google/fonts@main/ofl/nanumgothic/NanumGothic-Regular.ttf");if(t.ok)return this.fontData=yield t.arrayBuffer(),console.log("jsdelivr \uB098\uB214\uACE0\uB515 \uD3F0\uD2B8 \uB85C\uB4DC \uC131\uACF5"),!0}catch(t){console.log("jsdelivr \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t)}return!1})}waitForPDFLib(){return S(this,null,function*(){return new Promise((t,e)=>{if(window.PDFLib&&window.fontkit){t(window.PDFLib);return}let n=1e4,i=100,o=0,l=()=>{window.PDFLib&&window.fontkit?t(window.PDFLib):o>=n?e(new Error("PDF-lib \uB610\uB294 fontkit \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB4DC \uC2DC\uAC04 \uCD08\uACFC. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD574\uC8FC\uC138\uC694.")):(o+=i,setTimeout(l,i))};l()})})}overlayBackgroundOnAllText(o,l){return S(this,arguments,function*(t,e,n={r:1,g:1,b:1},i=1){try{console.log("\uBAA8\uB4E0 \uD14D\uC2A4\uD2B8 \uC704\uC5D0 \uBC30\uACBD\uC0C9 \uB808\uC774\uC5B4 \uADF8\uB9AC\uAE30 \uC2DC\uC791...");let f=yield this.waitForPDFLib(),_=yield t.arrayBuffer(),x=yield f.PDFDocument.load(_);console.log("PDF \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC, \uD398\uC774\uC9C0 \uC218:",x.getPageCount());let P=[],M=0;for(let k of e.pages)if(k.textItems.length>0){let Z=k.pageNumber-1;if(Z<x.getPageCount()){let X=x.getPages()[Z];console.log(`\uD398\uC774\uC9C0 ${k.pageNumber}: \uD14D\uC2A4\uD2B8 \uC704\uC5D0 \uBC30\uACBD\uC0C9 \uB808\uC774\uC5B4 \uCD94\uAC00`);for(let U of k.textItems)if(U.text&&U.text.trim().length>0)try{let E=U.position,D=U.transform,B=D[4],$=D[5],L=E.width,te=Math.abs(D[0]),R=te*1.2,K=te*.2;X.drawRectangle({x:B-2,y:$-K,width:L+4,height:R,color:f.rgb(n.r,n.g,n.b),opacity:i*.7,borderColor:f.rgb(1,0,0),borderWidth:.5,borderOpacity:.8}),M++}catch(E){console.warn(`\uD398\uC774\uC9C0 ${k.pageNumber}\uC758 \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC2E4\uD328:`,E)}P.push(k.pageNumber),console.log(`\uD398\uC774\uC9C0 ${k.pageNumber}\uC5D0 \uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774 \uCD94\uAC00 \uC644\uB8CC`)}}if(M===0)return{success:!1,removedCount:0,modifiedPages:[],error:"\uC624\uBC84\uB808\uC774\uD560 \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."};console.log("\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC800\uC7A5 \uC911...");let v=yield x.save();console.log("PDF \uC800\uC7A5 \uC644\uB8CC, \uD06C\uAE30:",v.length);let y=new Blob([v],{type:"application/pdf"}),V=URL.createObjectURL(y);return console.log("\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC900\uBE44 \uC644\uB8CC"),{success:!0,removedCount:M,modifiedPages:P,newPdfBlob:y,newPdfUrl:V}}catch(f){return console.error("\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774 \uC2E4\uD328:",f),{success:!1,removedCount:0,modifiedPages:[],error:f instanceof Error?f.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}}})}groupTextItemsForEditing(t){if(t.length===0)return[];let e=t.filter(f=>f.text&&f.text.trim().length>0).sort((f,_)=>{let x=f.transform[5],P=_.transform[5];return Math.abs(x-P)<5?f.transform[4]-_.transform[4]:P-x}),n=[],i=[],o=null,l=null;for(let f of e){let _=f.transform[5],x=f.transform[4],P=Math.abs(f.transform[0]);if((o===null||Math.abs(_-o)>P*1.5||Math.abs(_-o)<5&&l!==null&&x-l>P*3)&&i.length>0){let v=this.calculateGroupBounds(i);n.push(_e(le({},v),{items:[...i],text:i.map(y=>y.text).join(" ")})),i=[]}i.push(f),o=_,l=x+f.position.width}if(i.length>0){let f=this.calculateGroupBounds(i);n.push(_e(le({},f),{items:[...i],text:i.map(_=>_.text).join(" ")}))}return console.log(`\uD14D\uC2A4\uD2B8 \uADF8\uB8F9\uD654 \uC644\uB8CC: ${t.length}\uAC1C \uD56D\uBAA9 \u2192 ${n.length}\uAC1C \uADF8\uB8F9`),n}calculateGroupBounds(t){if(t.length===0)return{x:0,y:0,width:0,height:0};let e=1/0,n=-1/0,i=1/0,o=-1/0,l=0;for(let x of t){let P=x.transform[4],M=x.transform[5],v=x.position.width,y=Math.abs(x.transform[0]);e=Math.min(e,P),n=Math.max(n,P+v),i=Math.min(i,M),o=Math.max(o,M),l=Math.max(l,y)}let f=l*1.2,_=l*.2;return{x:e-3,y:i-_,width:n-e+6,height:f+(o-i)}}createEditableTextOverlay(t,e){return S(this,null,function*(){try{console.log("\uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC0DD\uC131 \uC2DC\uC791...");let n=yield this.waitForPDFLib(),i=yield t.arrayBuffer(),o=yield n.PDFDocument.load(i);console.log("PDF \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC, \uD398\uC774\uC9C0 \uC218:",o.getPageCount());let l=[],f=0;for(let M of e.pages)if(M.textItems.length>0){let v=M.pageNumber-1;if(v<o.getPageCount()){let y=o.getPages()[v];console.log(`\uD398\uC774\uC9C0 ${M.pageNumber}: \uD3B8\uC9D1 \uC624\uBC84\uB808\uC774 \uC0DD\uC131`);let V=this.groupTextItemsForEditing(M.textItems);console.log(`\uD398\uC774\uC9C0 ${M.pageNumber}: ${V.length}\uAC1C \uD14D\uC2A4\uD2B8 \uADF8\uB8F9 \uC0DD\uC131`);for(let k of V)try{console.log(`\uADF8\uB8F9 \uCC98\uB9AC: "${k.text.substring(0,30)}..." (${k.items.length}\uAC1C \uD14D\uC2A4\uD2B8)`),y.drawRectangle({x:k.x,y:k.y,width:k.width,height:k.height,color:n.rgb(1,1,1),opacity:.8,borderColor:n.rgb(0,0,1),borderWidth:.5,borderOpacity:.9}),y.drawRectangle({x:k.x,y:k.y,width:k.width,height:k.height,color:n.rgb(.95,.95,.95),opacity:.2,borderColor:n.rgb(0,.8,0),borderWidth:1,borderOpacity:.7}),f++}catch(Z){console.warn(`\uD398\uC774\uC9C0 ${M.pageNumber}\uC758 \uADF8\uB8F9 \uC624\uBC84\uB808\uC774 \uC2E4\uD328:`,Z)}l.push(M.pageNumber),console.log(`\uD398\uC774\uC9C0 ${M.pageNumber}\uC5D0 \uD3B8\uC9D1 \uC624\uBC84\uB808\uC774 \uCD94\uAC00 \uC644\uB8CC`)}}if(f===0)return{success:!1,removedCount:0,modifiedPages:[],error:"\uD3B8\uC9D1 \uC624\uBC84\uB808\uC774\uD560 \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."};console.log("\uD3B8\uC9D1 \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC800\uC7A5 \uC911...");let _=yield o.save();console.log("PDF \uC800\uC7A5 \uC644\uB8CC, \uD06C\uAE30:",_.length);let x=new Blob([_],{type:"application/pdf"}),P=URL.createObjectURL(x);return console.log("\uD3B8\uC9D1 \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC900\uBE44 \uC644\uB8CC"),{success:!0,removedCount:f,modifiedPages:l,newPdfBlob:x,newPdfUrl:P}}catch(n){return console.error("\uD3B8\uC9D1 \uC624\uBC84\uB808\uC774 \uC0DD\uC131 \uC2E4\uD328:",n),{success:!1,removedCount:0,modifiedPages:[],error:n instanceof Error?n.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}}})}createSentenceGroupOverlay(t,e){return S(this,null,function*(){try{console.log("\uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774 \uC0DD\uC131 \uC2DC\uC791...");let n=yield this.waitForPDFLib(),i=yield t.arrayBuffer(),o=yield n.PDFDocument.load(i);console.log("PDF \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC, \uD398\uC774\uC9C0 \uC218:",o.getPageCount());let l=[],f=0,_=[],x=e.pages.find(y=>y.pageNumber===1);if(x&&x.textItems.length>0){let y=o.getPages()[0];console.log(`\uD398\uC774\uC9C0 1: \uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774 \uC0DD\uC131 (\uCD1D ${e.pages.length}\uD398\uC774\uC9C0 \uC911 \uCCAB \uD398\uC774\uC9C0\uB9CC \uCC98\uB9AC)`);let V=this.groupTextItemsBySentence(x.textItems);console.log(`\uD398\uC774\uC9C0 1: ${V.length}\uAC1C \uBB38\uC7A5 \uADF8\uB8F9 \uC0DD\uC131`);for(let k of V)try{console.log(`\uBB38\uC7A5 \uADF8\uB8F9 \uCC98\uB9AC: "${k.text.substring(0,50)}..." (${k.items.length}\uAC1C \uD14D\uC2A4\uD2B8)`),f++,_.push({id:f,pageNumber:1,text:k.text,position:{x:k.x,y:k.y,width:k.width,height:k.height},fontSize:k.items.length>0?Math.abs(k.items[0].transform[0]):12,itemCount:k.items.length,items:k.items})}catch(Z){console.error("\uBB38\uC7A5 \uADF8\uB8F9 \uCC98\uB9AC \uC911 \uC624\uB958:",Z)}l.push(1)}else console.log("\uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uC5D0 \uCC98\uB9AC\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");if(f===0)return{success:!1,removedCount:0,modifiedPages:[],error:"\uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uC5D0\uC11C \uBB38\uC7A5 \uC624\uBC84\uB808\uC774\uD560 \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."};console.log("\uBB38\uC7A5 \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC800\uC7A5 \uC911...");let P=yield o.save();console.log("PDF \uC800\uC7A5 \uC644\uB8CC, \uD06C\uAE30:",P.length);let M=new Blob([P],{type:"application/pdf"}),v=URL.createObjectURL(M);return console.log("\uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uC5D0 \uBB38\uC7A5 \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC900\uBE44 \uC644\uB8CC"),console.log("\uC0DD\uC131\uB41C \uD14D\uC2A4\uD2B8 \uADF8\uB8F9 JSON \uB370\uC774\uD130:",JSON.stringify(_,null,2)),{success:!0,removedCount:f,modifiedPages:l,newPdfBlob:M,newPdfUrl:v,textGroups:_}}catch(n){return console.error("\uBB38\uC7A5 \uC624\uBC84\uB808\uC774 \uC0DD\uC131 \uC2E4\uD328:",n),{success:!1,removedCount:0,modifiedPages:[],error:n instanceof Error?n.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}}})}groupTextItemsBySentence(t){if(t.length===0)return[];let e=t.filter(f=>f.text&&f.text.trim().length>0).sort((f,_)=>{let x=f.transform[5],P=_.transform[5];return Math.abs(x-P)<3?f.transform[4]-_.transform[4]:P-x}),n=[],i=[],o=null,l=null;for(let f of e){let _=f.transform[5],x=Math.abs(f.transform[0]);if((o===null||Math.abs(_-o)>x*.8||l!==null&&Math.abs(x-l)>1)&&i.length>0){let M=this.calculateSingleLineBounds(i);n.push(_e(le({},M),{items:[...i],text:i.map(v=>v.text).join(" ")})),i=[]}i.push(f),o=_,l=x}if(i.length>0){let f=this.calculateSingleLineBounds(i);n.push(_e(le({},f),{items:[...i],text:i.map(_=>_.text).join(" ")}))}return console.log(`\uD55C \uC904 \uB2E8\uC704 \uBB38\uC7A5 \uADF8\uB8F9\uD654 \uC644\uB8CC: ${t.length}\uAC1C \uD56D\uBAA9 \u2192 ${n.length}\uAC1C \uBB38\uC7A5 \uADF8\uB8F9`),n}calculateSingleLineBounds(t){if(t.length===0)return{x:0,y:0,width:0,height:0};let e=1/0,n=-1/0,i=0,o=0;o=Math.abs(t[0].transform[0]);for(let _ of t){let x=_.transform[4],P=_.transform[5],M=_.position.width;e=Math.min(e,x),n=Math.max(n,x+M),i+=P}i=i/t.length;let l=o*1.2,f=o*.2;return{x:e-3,y:i-f,width:n-e+6,height:l}}saveTextOverlay(t,e,n=1){return S(this,null,function*(){try{console.log("\uAC1C\uBCC4 \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC2DC\uC791...",e);let i=yield this.waitForPDFLib(),o=yield t.arrayBuffer(),l=yield i.PDFDocument.load(o);console.log("PDF \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC, \uD398\uC774\uC9C0 \uC218:",l.getPageCount());let f=(e.pageNumber||1)-1;if(f>=l.getPageCount()||f<0)throw new Error(`\uC798\uBABB\uB41C \uD398\uC774\uC9C0 \uBC88\uD638: ${e.pageNumber}`);let _=l.getPages()[f],{width:x,height:P}=_.getSize(),M,v,y,V;if(e.pdfCoords)M=e.pdfCoords.x,v=e.pdfCoords.y,y=e.pdfCoords.width,V=e.pdfCoords.height,console.log("\uC6D0\uBCF8 PDF \uC88C\uD45C \uC0AC\uC6A9:",e.pdfCoords);else{let B=x/595.276,$=P/841.89;M=e.x/1.3*B,v=P-e.y/1.3*$-e.height/1.3*$,y=e.width/1.3*B,V=e.height/1.3*$,console.log("\uBDF0\uC5B4 \uC88C\uD45C\uC5D0\uC11C \uBCC0\uD658:",{config:e,converted:{pdfX:M,pdfY:v,pdfWidth:y,pdfHeight:V}})}if(console.log("\uCD5C\uC885 PDF \uC88C\uD45C:",{x:M,y:v,width:y,height:V,page:{width:x,height:P}}),_.drawRectangle({x:M,y:v,width:y,height:V,color:i.rgb(1,1,1),opacity:1}),e.text&&e.text.trim().length>0){let U=e.font?.size||12;if(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(e.text)){console.log("\uD55C\uAE00 \uD14D\uC2A4\uD2B8 \uAC10\uC9C0\uB428. \uD3B8\uC9D1\uB41C \uB0B4\uC6A9\uC744 \uBC30\uACBD\uC73C\uB85C \uD45C\uC2DC\uD569\uB2C8\uB2E4."),_.drawRectangle({x:M,y:v,width:y,height:V,color:i.rgb(1,1,1),opacity:.8});try{let D=v+U*.25,B=!1;if(yield this.loadKoreanFont(),this.fontData)try{l.registerFontkit(window.fontkit);let $=yield l.embedFont(new Uint8Array(this.fontData));_.drawText(e.text,{x:M+2,y:D,size:U,font:$,color:i.rgb(0,0,0),maxWidth:y-4}),B=!0,console.log(`fontkit\uC73C\uB85C \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC131\uACF5: "${e.text}"`)}catch($){console.warn("fontkit \uD55C\uAE00 \uD3F0\uD2B8 \uB80C\uB354\uB9C1 \uC2E4\uD328:",$)}if(!B)try{let $=document.createElement("canvas"),L=$.getContext("2d");if(L){$.width=Math.max(y,200),$.height=Math.max(V,50),L.fillStyle="white",L.fillRect(0,0,$.width,$.height),L.font=`${U}px "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", "Apple SD Gothic Neo", "\uB098\uB214\uACE0\uB515", "NanumGothic", Arial, sans-serif`,L.fillStyle="black",L.textBaseline="middle",L.textAlign="left",L.imageSmoothingEnabled=!0,L.fillText(e.text,5,$.height/2);let R=$.toDataURL("image/jpeg",.95).split(",")[1],K=Uint8Array.from(atob(R),ae=>ae.charCodeAt(0)),ie=yield l.embedJpg(K);_.drawImage(ie,{x:M,y:v,width:y,height:V}),B=!0,console.log(`Canvas\uB85C \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC131\uACF5: "${e.text}"`)}}catch($){console.warn("Canvas \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC2E4\uD328:",$)}if(!B)try{let $=yield l.embedFont(i.StandardFonts.Helvetica),L=`[\uD3B8\uC9D1\uB428] ${e.text.length}\uAE00\uC790`;_.drawText(L,{x:M+2,y:D,size:Math.max(U*.8,10),font:$,color:i.rgb(0,.5,.8),maxWidth:y-4}),console.log(`\uD55C\uAE00 \uB300\uCCB4 \uD45C\uC2DC: "${e.text}" -> "${L}"`)}catch($){console.error("\uB300\uCCB4 \uD14D\uC2A4\uD2B8 \uD45C\uC2DC\uB3C4 \uC2E4\uD328:",$)}}catch(D){console.error("\uB9C8\uCEE4 \uD14D\uC2A4\uD2B8 \uD45C\uC2DC \uC2E4\uD328:",D)}}else try{let D="Helvetica";if(e.font?.name){let L=e.font.name.toLowerCase();L.includes("times")?D="Times-Roman":L.includes("courier")?D="Courier":(L.includes("helvetica")||L.includes("arial"))&&(D="Helvetica")}let B=yield l.embedFont(i.StandardFonts[D]||i.StandardFonts.Helvetica),$=v+V*.2;_.drawText(e.text,{x:M+2,y:$,size:U,font:B,color:i.rgb(0,0,0),maxWidth:y-4}),console.log(`\uC601\uBB38 \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uCD94\uAC00: "${e.text}" at (${M}, ${$})`)}catch(D){console.warn("\uD14D\uC2A4\uD2B8 \uB80C\uB354\uB9C1 \uC2E4\uD328:",D),_.drawRectangle({x:M,y:v,width:y,height:V,color:i.rgb(.9,.9,.9),opacity:.8})}}console.log("\uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC800\uC7A5 \uC911...");let k=yield l.save();console.log("PDF \uC800\uC7A5 \uC644\uB8CC, \uD06C\uAE30:",k.length);let Z=new Blob([k],{type:"application/pdf"}),X=URL.createObjectURL(Z);return console.log("\uAC1C\uBCC4 \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC644\uB8CC"),{success:!0,removedCount:1,modifiedPages:[e.pageNumber||1],newPdfBlob:Z,newPdfUrl:X}}catch(i){return console.error("\uAC1C\uBCC4 \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC2E4\uD328:",i),{success:!1,removedCount:0,modifiedPages:[],error:i instanceof Error?i.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}}})}saveMultipleTextOverlays(t,e,n=1){return S(this,null,function*(){try{console.log("\uC5EC\uB7EC \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC2DC\uC791...",e.length,"\uAC1C");let i=yield this.waitForPDFLib(),o=yield t.arrayBuffer(),l=yield i.PDFDocument.load(o);console.log("PDF \uBB38\uC11C \uB85C\uB4DC \uC644\uB8CC, \uD398\uC774\uC9C0 \uC218:",l.getPageCount());let f=[],_=0;for(let v of e){let y=(v.pageNumber||1)-1;if(y>=l.getPageCount()||y<0){console.warn(`\uC798\uBABB\uB41C \uD398\uC774\uC9C0 \uBC88\uD638: ${v.pageNumber}, \uAC74\uB108\uB700`);continue}let V=l.getPages()[y],{width:k,height:Z}=V.getSize(),X,U,E,D;if(v.pdfCoords)X=v.pdfCoords.x,U=v.pdfCoords.y,E=v.pdfCoords.width,D=v.pdfCoords.height,console.log(`\uC624\uBC84\uB808\uC774 ${_+1}/${e.length} - \uC6D0\uBCF8 PDF \uC88C\uD45C \uC0AC\uC6A9:`,v.pdfCoords);else{let te=k/595.276,R=Z/841.89;X=v.x/1.3*te,U=Z-v.y/1.3*R-v.height/1.3*R,E=v.width/1.3*te,D=v.height/1.3*R,console.log(`\uC624\uBC84\uB808\uC774 ${_+1}/${e.length} - \uBDF0\uC5B4 \uC88C\uD45C\uC5D0\uC11C \uBCC0\uD658:`,{config:v,converted:{pdfX:X,pdfY:U,pdfWidth:E,pdfHeight:D}})}if(console.log(`\uC624\uBC84\uB808\uC774 ${_+1}/${e.length} \uCC98\uB9AC:`,{text:v.text?.substring(0,30)+"...",viewer:{x:v.x,y:v.y,width:v.width,height:v.height},pdf:{x:X,y:U,width:E,height:D}}),V.drawRectangle({x:X,y:U,width:E,height:D,color:i.rgb(1,1,1),opacity:1}),v.text&&v.text.trim().length>0){let B=v.font?.size||12;if(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(v.text)){console.log(`\uD55C\uAE00 \uD14D\uC2A4\uD2B8 \uAC10\uC9C0 (${v.id}): \uD3B8\uC9D1\uB41C \uB0B4\uC6A9\uC744 \uBC30\uACBD\uC73C\uB85C \uD45C\uC2DC\uD569\uB2C8\uB2E4.`),V.drawRectangle({x:X,y:U,width:E,height:D,color:i.rgb(1,1,1),opacity:.8});try{let L=U+B*.25,te=!1;if(yield this.loadKoreanFont(),this.fontData)try{l.registerFontkit(window.fontkit);let R=yield l.embedFont(new Uint8Array(this.fontData));V.drawText(v.text,{x:X+2,y:L,size:B,font:R,color:i.rgb(0,0,0),maxWidth:E-4}),te=!0,console.log(`fontkit\uC73C\uB85C \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC131\uACF5 (${v.id}): "${v.text}"`)}catch(R){console.warn(`fontkit \uD55C\uAE00 \uD3F0\uD2B8 \uB80C\uB354\uB9C1 \uC2E4\uD328 (${v.id}):`,R)}if(!te)try{let R=document.createElement("canvas"),K=R.getContext("2d");if(K){R.width=Math.max(E,200),R.height=Math.max(D,50),K.fillStyle="white",K.fillRect(0,0,R.width,R.height),K.font=`${B}px "\uB9D1\uC740 \uACE0\uB515", "Malgun Gothic", "Apple SD Gothic Neo", "\uB098\uB214\uACE0\uB515", "NanumGothic", Arial, sans-serif`,K.fillStyle="black",K.textBaseline="middle",K.textAlign="left",K.imageSmoothingEnabled=!0,K.fillText(v.text,5,R.height/2);let ae=R.toDataURL("image/jpeg",.95).split(",")[1],oe=Uint8Array.from(atob(ae),ge=>ge.charCodeAt(0)),de=yield l.embedJpg(oe);V.drawImage(de,{x:X,y:U,width:E,height:D}),te=!0,console.log(`Canvas\uB85C \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC131\uACF5 (${v.id}): "${v.text}"`)}}catch(R){console.warn(`Canvas \uD55C\uAE00 \uB80C\uB354\uB9C1 \uC2E4\uD328 (${v.id}):`,R)}if(!te){let R=yield l.embedFont(i.StandardFonts.Helvetica),K=`[\uD3B8\uC9D1: ${v.text}]`;V.drawText(K,{x:X+2,y:L,size:Math.min(B,10),font:R,color:i.rgb(.1,.1,.1),maxWidth:E-4}),console.log(`\uD55C\uAE00 \uB300\uCCB4 \uD14D\uC2A4\uD2B8 \uD45C\uC2DC (${v.id}): "${v.text}" -> "${K}"`)}}catch(L){console.warn(`\uD55C\uAE00 \uD14D\uC2A4\uD2B8 \uB9C8\uCEE4 \uCD94\uAC00 \uC2E4\uD328 (${v.id}):`,L)}}else try{let L="Helvetica";if(v.font?.name){let K=v.font.name.toLowerCase();K.includes("times")?L="Times-Roman":K.includes("courier")?L="Courier":(K.includes("helvetica")||K.includes("arial"))&&(L="Helvetica")}let te=yield l.embedFont(i.StandardFonts[L]||i.StandardFonts.Helvetica),R=U+B*.25;V.drawText(v.text,{x:X+2,y:R,size:B,font:te,color:i.rgb(0,0,0),maxWidth:E-4}),console.log(`\uC601\uBB38 \uD14D\uC2A4\uD2B8 \uB80C\uB354\uB9C1 \uC644\uB8CC (${v.id}): "${v.text}" at (${X+2}, ${R}), \uD3F0\uD2B8: ${L}, \uD06C\uAE30: ${B}`)}catch(L){console.warn(`\uD14D\uC2A4\uD2B8 \uB80C\uB354\uB9C1 \uC2E4\uD328 (${v.id}):`,L),V.drawRectangle({x:X,y:U,width:E,height:D,color:i.rgb(.9,.9,.9),opacity:.8})}}_++,f.includes(v.pageNumber||1)||f.push(v.pageNumber||1)}if(_===0)return{success:!1,removedCount:0,modifiedPages:[],error:"\uCC98\uB9AC\uD560 \uC720\uD6A8\uD55C \uC624\uBC84\uB808\uC774\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."};console.log(`${_}\uAC1C \uC624\uBC84\uB808\uC774\uAC00 \uCD94\uAC00\uB41C PDF \uC800\uC7A5 \uC911...`);let x=yield l.save();console.log("PDF \uC800\uC7A5 \uC644\uB8CC, \uD06C\uAE30:",x.length);let P=new Blob([x],{type:"application/pdf"}),M=URL.createObjectURL(P);return console.log("\uC5EC\uB7EC \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC644\uB8CC"),{success:!0,removedCount:_,modifiedPages:f,newPdfBlob:P,newPdfUrl:M}}catch(i){return console.error("\uC5EC\uB7EC \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC2E4\uD328:",i),{success:!1,removedCount:0,modifiedPages:[],error:i instanceof Error?i.message:"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ze=class r{message="";isVisible=!1;duration=3e3;close=new O;ngOnInit(){this.isVisible&&this.duration>0&&setTimeout(()=>{this.onClose()},this.duration)}ngOnChanges(){this.isVisible&&this.duration>0&&setTimeout(()=>{this.onClose()},this.duration)}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-snackbar"]],inputs:{message:"message",isVisible:"isVisible",duration:"duration"},outputs:{close:"close"},standalone:!1,features:[ne],decls:13,vars:3,consts:[[1,"snackbar"],[1,"snackbar-content"],[1,"snackbar-icon"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","12","r","10","stroke","#ff9800","stroke-width","2"],["x1","12","y1","8","x2","12","y2","12","stroke","#ff9800","stroke-width","2","stroke-linecap","round"],["x1","12","y1","16","x2","12.01","y2","16","stroke","#ff9800","stroke-width","2","stroke-linecap","round"],[1,"snackbar-message"],[1,"snackbar-close",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x1","18","y1","6","x2","6","y2","18","stroke","#666","stroke-width","2","stroke-linecap","round"],["x1","6","y1","6","x2","18","y2","18","stroke","#666","stroke-width","2","stroke-linecap","round"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"span",2),z(),a(3,"svg",3),C(4,"circle",4)(5,"line",5)(6,"line",6),s()(),me(),a(7,"span",7),g(8),s(),a(9,"button",8),h("click",function(){return n.onClose()}),z(),a(10,"svg",9),C(11,"line",10)(12,"line",11),s()()()()),e&2&&(T("visible",n.isVisible),c(8),F(n.message))},styles:[".snackbar[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%) translateY(100px);background:#333;color:#fff;border-radius:8px;box-shadow:0 4px 12px #0000004d;z-index:10000;opacity:0;transition:all .3s ease;max-width:500px;min-width:300px}.snackbar.visible[_ngcontent-%COMP%]{opacity:1;transform:translate(-50%) translateY(0)}.snackbar-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px}.snackbar-icon[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.snackbar-message[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:500;line-height:1.4}.snackbar-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;transition:background .2s;flex-shrink:0}.snackbar-close[_ngcontent-%COMP%]:hover{background:#ffffff1a}"]})};function br(r,t){r&1&&C(0,"div",27)}function vr(r,t){r&1&&C(0,"div",27)}function wr(r,t){r&1&&C(0,"div",27)}function Pr(r,t){r&1&&(a(0,"div",8),g(1," \u26A0\uFE0F \uC6D0\uBCF8 PDF \uD30C\uC77C\uC774 \uD544\uC694\uD569\uB2C8\uB2E4. "),s())}function Mr(r,t){r&1&&(a(0,"div",8),g(1," \u26A0\uFE0F \uC77C\uBD80 \uAE30\uB2A5\uC740 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4. "),s())}function yr(r,t){if(r&1&&(a(0,"div",28),b(1,Pr,2,0,"div",29)(2,Mr,2,0,"div",29),s()),r&2){let e=d(3);c(),p("ngIf",!e.originalFile),c(),p("ngIf",!e.textStreamData)}}function Er(r,t){if(r&1){let e=w();a(0,"div",18)(1,"div",19)(2,"button",20),h("click",function(){m(e);let i=d(2);return u(i.executeOverlayBackground())}),a(3,"span",21),g(4,"\u{1F3A8}"),s(),a(5,"span",22),g(6),s(),b(7,br,1,0,"div",23),s(),a(8,"button",24),h("click",function(){m(e);let i=d(2);return u(i.executeCreateEditableOverlay())}),a(9,"span",21),g(10,"\u{1F4DD}"),s(),a(11,"span",22),g(12),s(),b(13,vr,1,0,"div",23),s(),a(14,"button",25),h("click",function(){m(e);let i=d(2);return u(i.executeCreateSentenceOverlay())}),a(15,"span",21),g(16,"\u{1F4C4}"),s(),a(17,"span",22),g(18),s(),b(19,wr,1,0,"div",23),s()(),b(20,yr,3,2,"div",26),s()}if(r&2){let e=d(2);c(2),p("disabled",e.isOverlayingBackground||!e.textStreamData),c(4),F(e.isOverlayingBackground?"\uC624\uBC84\uB808\uC774 \uC911...":"\uBC30\uACBD\uC0C9\uC73C\uB85C \uD14D\uC2A4\uD2B8 \uAC00\uB9AC\uAE30"),c(),p("ngIf",e.isOverlayingBackground),c(),p("disabled",e.isCreatingEditOverlay||!e.textStreamData),c(4),F(e.isCreatingEditOverlay?"\uC0DD\uC131 \uC911...":"\uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uC624\uBC84\uB808\uC774 \uC0DD\uC131"),c(),p("ngIf",e.isCreatingEditOverlay),c(),p("disabled",e.isCreatingSentenceOverlay||!e.textStreamData),c(4),F(e.isCreatingSentenceOverlay?"\uC0DD\uC131 \uC911...":"\uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774"),c(),p("ngIf",e.isCreatingSentenceOverlay),c(),p("ngIf",!e.originalFile||!e.textStreamData)}}function Or(r,t){if(r&1){let e=w();a(0,"div",5)(1,"div",11),h("click",function(){m(e);let i=d();return u(i.togglePdfProcessing())}),a(2,"span",12),g(3),s(),g(4," PDF \uD14D\uC2A4\uD2B8 \uCC98\uB9AC \uC2E4\uD589 "),s(),b(5,Er,21,10,"div",17),s()}if(r&2){let e=d();c(3),F(e.pdfProcessingExpanded?"\u25BC":"\u25B6"),c(2),p("ngIf",e.pdfProcessingExpanded)}}function Sr(r,t){if(r&1&&(a(0,"div",35)(1,"div",36)(2,"span",37),g(3),s(),a(4,"span",7),g(5),s(),a(6,"span",38),g(7),s(),a(8,"span",39),g(9),s()(),a(10,"div",40),g(11),s(),a(12,"div",41),g(13),s()()),r&2){let e=t.$implicit;c(3),F(e.id),c(2),j("\uD398\uC774\uC9C0 ",e.pageNumber),c(2),j("",e.fontSize.toFixed(1),"pt"),c(2),j("",e.itemCount,"\uAC1C \uD14D\uC2A4\uD2B8"),c(2),F(e.text),c(2),Rt(" \uC704\uCE58: (",e.position.x.toFixed(1),", ",e.position.y.toFixed(1),") \uD06C\uAE30: ",e.position.width.toFixed(1)," \xD7 ",e.position.height.toFixed(1)," ")}}function Tr(r,t){if(r&1){let e=w();a(0,"div",31),b(1,Sr,14,9,"div",32),a(2,"div",33)(3,"button",34),h("click",function(){m(e);let i=d(2);return u(i.exportSentenceGroupsJson())}),g(4," \u{1F4C4} JSON \uB370\uC774\uD130 \uB2E4\uC6B4\uB85C\uB4DC "),s()()()}if(r&2){let e=d(2);c(),p("ngForOf",e.sentenceGroups)}}function kr(r,t){if(r&1){let e=w();a(0,"div",5)(1,"div",11),h("click",function(){m(e);let i=d();return u(i.toggleSentenceGroups())}),a(2,"span",12),g(3),s(),g(4),s(),b(5,Tr,5,1,"div",30),s()}if(r&2){let e=d();c(3),F(e.showSentenceGroups?"\u25BC":"\u25B6"),c(),j(" \uBB38\uC7A5 \uADF8\uB8F9 \uACB0\uACFC (",e.sentenceGroups.length,"\uAC1C) "),c(),p("ngIf",e.showSentenceGroups)}}function Dr(r,t){if(r&1&&(a(0,"div",42)(1,"div",43),g(2),s()()),r&2){let e=d();c(2),j(" ",e.extractedText||"\uC774 \uD398\uC774\uC9C0\uC5D0\uB294 \uCD94\uCD9C \uAC00\uB2A5\uD55C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."," ")}}function zr(r,t){if(r&1&&(a(0,"div",46)(1,"span",47),g(2),s(),a(3,"span",48),g(4),s()()),r&2){let e=t.$implicit;c(2),j("",e.label,":"),c(2),F(e.value)}}function Fr(r,t){if(r&1&&(a(0,"div",44),b(1,zr,5,2,"div",45),s()),r&2){let e=d();c(),p("ngForOf",e.documentMetadata)}}function Ir(r,t){if(r&1){let e=w();a(0,"div",52),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onBookmarkClick(i))}),a(1,"span",53),g(2),s(),a(3,"span",54),g(4),s()()}if(r&2){let e=t.$implicit;J("padding-left",e.level*16,"px"),c(2),F(e.title),c(2),F(e.page)}}function Ar(r,t){r&1&&(a(0,"div",55),g(1," \uC774 \uBB38\uC11C\uC5D0\uB294 \uBAA9\uCC28\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. "),s())}function Vr(r,t){if(r&1&&(a(0,"div",49),b(1,Ir,5,4,"div",50)(2,Ar,2,0,"div",51),s()),r&2){let e=d();c(),p("ngForOf",e.bookmarks),c(),p("ngIf",e.bookmarks.length===0)}}function Br(r,t){if(r&1){let e=w();a(0,"div",58),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onSearchResultClick(i))}),a(1,"div",59),g(2),s(),a(3,"div",60),g(4),s()()}if(r&2){let e=t.$implicit;c(2),j("\uD398\uC774\uC9C0 ",e.page),c(2),F(e.context)}}function Lr(r,t){if(r&1&&(a(0,"div",5)(1,"div",6),g(2,"\uAC80\uC0C9 \uACB0\uACFC"),s(),a(3,"div",56),b(4,Br,5,2,"div",57),s()()),r&2){let e=d();c(4),p("ngForOf",e.searchResults)}}function Rr(r,t){if(r&1){let e=w();a(0,"div",62)(1,"div",63)(2,"button",64),h("click",function(){m(e);let i=d(2);return u(i.copyJsonToClipboard())}),a(3,"span",21),g(4,"\u{1F4CB}"),s(),g(5," \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC "),s(),a(6,"button",64),h("click",function(){m(e);let i=d(2);return u(i.downloadJson())}),a(7,"span",21),g(8,"\u{1F4BE}"),s(),g(9," JSON \uB2E4\uC6B4\uB85C\uB4DC "),s(),a(10,"button",64),h("click",function(){m(e);let i=d(2);return u(i.toggleJsonFormat())}),a(11,"span",21),g(12,"\u{1F500}"),s(),g(13),s()(),a(14,"div",65)(15,"pre",66),g(16),s()()()}if(r&2){let e=d(2);c(13),j(" ",e.isJsonFormatted?"\uC555\uCD95":"\uD3EC\uB9F7"," "),c(3),F(e.getFormattedJson())}}function $r(r,t){if(r&1){let e=w();a(0,"div",5)(1,"div",11),h("click",function(){m(e);let i=d();return u(i.toggleTextStreamJson())}),a(2,"span",12),g(3),s(),g(4," \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC JSON "),s(),b(5,Rr,17,2,"div",61),s()}if(r&2){let e=d();c(3),F(e.textStreamJsonExpanded?"\u25BC":"\u25B6"),c(2),p("ngIf",e.textStreamJsonExpanded)}}var Mt=class r{constructor(t,e){this.pdfTextRemovalService=t;this.pdfTextStreamModifierService=e}isVisible=!1;currentPage=1;totalPages=1;pageSize="A4";extractedText="";searchResults=[];documentMetadata=[];bookmarks=[];textStreamData=null;originalFile=null;close=new O;bookmarkClick=new O;searchResultClick=new O;pdfRefresh=new O;sentenceGroupsChanged=new O;textEditorSave=new O;pdfProcessingExpanded=!1;textContentExpanded=!0;metadataExpanded=!1;bookmarksExpanded=!0;textStreamJsonExpanded=!1;isJsonFormatted=!0;isOverlayingBackground=!1;isCreatingEditOverlay=!1;isCreatingSentenceOverlay=!1;sentenceGroups=[];showSentenceGroups=!1;isCreatingOverlay=!1;isCreatingEditableOverlay=!1;sentenceOverlayListener;saveAllOverlaysListener;downloadAllOverlaysListener;downloadTextStreamListener;showSnackbar=!1;snackbarMessage="";snackbarDuration=2e3;ngOnInit(){this.updateExtractedText(),this.sentenceOverlayListener=()=>{this.executeCreateSentenceOverlay()},document.addEventListener("execute-sentence-overlay",this.sentenceOverlayListener),this.saveAllOverlaysListener=t=>{this.onSaveAllOverlays(t.detail)},document.addEventListener("save-all-overlays",this.saveAllOverlaysListener),this.downloadAllOverlaysListener=t=>{this.onDownloadAllOverlays(t.detail)},document.addEventListener("download-all-overlays",this.downloadAllOverlaysListener),this.downloadTextStreamListener=t=>{this.onDownloadTextStreamModified(t.detail)},document.addEventListener("download-textstream-modified",this.downloadTextStreamListener),document.addEventListener("show-snackbar",t=>{let{message:e,duration:n}=t.detail;this.showSnackbarMessage(e,n)})}ngOnDestroy(){this.sentenceOverlayListener&&document.removeEventListener("execute-sentence-overlay",this.sentenceOverlayListener),this.saveAllOverlaysListener&&document.removeEventListener("save-all-overlays",this.saveAllOverlaysListener),this.downloadAllOverlaysListener&&document.removeEventListener("download-all-overlays",this.downloadAllOverlaysListener),this.downloadTextStreamListener&&document.removeEventListener("download-textstream-modified",this.downloadTextStreamListener)}ngOnChanges(t){t.textStreamData&&t.textStreamData.currentValue&&console.log("\uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC218\uB3D9\uC73C\uB85C \uBB38\uC7A5 \uC624\uBC84\uB808\uC774\uB97C \uC2E4\uD589\uD558\uC138\uC694.")}generateSentenceGroupsFromTextStream(){if(!this.textStreamData||!this.textStreamData.pages)return;this.sentenceGroups=[];let t=1;this.textStreamData.pages.forEach((e,n)=>{if(e.sentences&&e.sentences.length>0)e.sentences.forEach((i,o)=>{let l={id:t++,text:i.text||"",pageNumber:e.pageNumber||n+1,position:{x:i.position?.x||50+o*10,y:i.position?.y||100+o*20,width:i.position?.width||Math.max(200,(i.text||"").length*8),height:i.position?.height||30},fontSize:i.fontSize||12,itemCount:1,items:i.items||[]};this.sentenceGroups.push(l)});else if(e.textItems&&e.textItems.length>0){let i=e.textItems.map(o=>o.text).join(" ");if(i.trim()){let o={id:t++,text:i,pageNumber:e.pageNumber||n+1,position:{x:50,y:100+n*50,width:Math.max(200,i.length*8),height:30},fontSize:12,itemCount:e.textItems.length,items:e.textItems};this.sentenceGroups.push(o)}}}),this.sentenceGroups.length>0&&this.sentenceGroupsChanged.emit(this.sentenceGroups)}onClose(){this.close.emit()}showSnackbarMessage(t,e=2e3){this.snackbarMessage=t,this.snackbarDuration=e,this.showSnackbar=!0}onSnackbarClose(){this.showSnackbar=!1}togglePdfProcessing(){this.pdfProcessingExpanded=!this.pdfProcessingExpanded}toggleTextContent(){this.textContentExpanded=!this.textContentExpanded}toggleMetadata(){this.metadataExpanded=!this.metadataExpanded}toggleBookmarks(){this.bookmarksExpanded=!this.bookmarksExpanded}onBookmarkClick(t){this.bookmarkClick.emit(t)}onSearchResultClick(t){this.searchResultClick.emit(t)}updateExtractedText(){this.extractedText||(this.extractedText=this.getSampleTextForPage(this.currentPage))}getSampleTextForPage(t){let e=[`\uC774 \uBB38\uC11C\uB294 PDF \uBDF0\uC5B4\uC758 \uAE30\uB2A5\uC744 \uC124\uBA85\uD569\uB2C8\uB2E4. \uC0AC\uC6A9\uC790\uB294 \uB2E4\uC591\uD55C \uB3C4\uAD6C\uB97C \uC0AC\uC6A9\uD558\uC5EC PDF \uBB38\uC11C\uB97C \uBCF4\uACE0 \uD3B8\uC9D1\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.

\uC8FC\uC694 \uAE30\uB2A5:
- \uD398\uC774\uC9C0 \uD0D0\uC0C9 \uBC0F \uD655\uB300/\uCD95\uC18C
- \uD14D\uC2A4\uD2B8 \uAC80\uC0C9 \uBC0F \uD558\uC774\uB77C\uC774\uD2B8
- \uC8FC\uC11D \uBC0F \uBA54\uBAA8 \uCD94\uAC00
- AI \uAE30\uBC18 \uD14D\uC2A4\uD2B8 \uBD84\uC11D`,`\uBCF8 \uC7A5\uC5D0\uC11C\uB294 PDF \uBDF0\uC5B4\uC758 \uC8FC\uC694 \uAE30\uB2A5\uB4E4\uC5D0 \uB300\uD574 \uC124\uBA85\uD569\uB2C8\uB2E4.

\uD398\uC774\uC9C0 \uD0D0\uC0C9:
- \uC378\uB124\uC77C\uC744 \uD1B5\uD55C \uBE60\uB978 \uD398\uC774\uC9C0 \uC774\uB3D9
- \uD398\uC774\uC9C0 \uBC88\uD638 \uC785\uB825\uC744 \uD1B5\uD55C \uC9C1\uC811 \uC774\uB3D9
- \uD0A4\uBCF4\uB4DC \uB2E8\uCD95\uD0A4 \uC9C0\uC6D0`,`PDF \uBB38\uC11C\uC758 \uD14D\uC2A4\uD2B8 \uB0B4\uC6A9\uC744 \uCD94\uCD9C\uD558\uACE0 \uBD84\uC11D\uD558\uB294 \uBC29\uBC95\uC5D0 \uB300\uD574 \uC54C\uC544\uBCF4\uACA0\uC2B5\uB2C8\uB2E4.

\uD14D\uC2A4\uD2B8 \uCD94\uCD9C:
- OCR \uAE30\uC220\uC744 \uD65C\uC6A9\uD55C \uC774\uBBF8\uC9C0 \uD14D\uC2A4\uD2B8 \uC778\uC2DD
- \uC120\uD0DD \uAC00\uB2A5\uD55C \uD14D\uC2A4\uD2B8 \uC790\uB3D9 \uAC10\uC9C0
- \uB2E4\uAD6D\uC5B4 \uC9C0\uC6D0`,`\uACE0\uAE09 \uAE30\uB2A5\uC73C\uB85C\uB294 AI \uAE30\uBC18\uC758 \uD14D\uC2A4\uD2B8 \uBD84\uC11D\uACFC \uBC88\uC5ED \uAE30\uB2A5\uC774 \uC788\uC2B5\uB2C8\uB2E4.

AI \uAE30\uB2A5:
- \uBB38\uC11C \uC694\uC57D \uC0DD\uC131
- \uD0A4\uC6CC\uB4DC \uCD94\uCD9C
- \uC790\uB3D9 \uBC88\uC5ED
- \uB0B4\uC6A9 \uBD84\uB958`,`\uB9C8\uC9C0\uB9C9\uC73C\uB85C PDF \uBDF0\uC5B4\uC758 \uC124\uC815\uACFC \uC0AC\uC6A9\uC790 \uC815\uC758 \uC635\uC158\uC5D0 \uB300\uD574 \uC0B4\uD3B4\uBCF4\uACA0\uC2B5\uB2C8\uB2E4.

\uC124\uC815 \uC635\uC158:
- \uD45C\uC2DC \uBAA8\uB4DC \uBCC0\uACBD
- \uB2E8\uCD95\uD0A4 \uC0AC\uC6A9\uC790 \uC815\uC758
- \uD14C\uB9C8 \uC124\uC815
- \uC790\uB3D9 \uC800\uC7A5 \uAE30\uB2A5`];return e[Math.min(t-1,e.length-1)]||"\uC774 \uD398\uC774\uC9C0\uC5D0\uB294 \uCD94\uCD9C \uAC00\uB2A5\uD55C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}updateTextContent(t){this.extractedText=t}updateMetadata(t){this.documentMetadata=t}updateBookmarks(t){this.bookmarks=t}toggleTextStreamJson(){this.textStreamJsonExpanded=!this.textStreamJsonExpanded}toggleJsonFormat(){this.isJsonFormatted=!this.isJsonFormatted}getFormattedJson(){if(!this.textStreamData)return"\uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.";try{return this.isJsonFormatted?JSON.stringify(this.textStreamData,null,2):JSON.stringify(this.textStreamData)}catch(t){return"JSON \uBCC0\uD658 \uC624\uB958: "+t}}copyJsonToClipboard(){return S(this,null,function*(){try{let t=this.getFormattedJson();yield navigator.clipboard.writeText(t),this.showSnackbarMessage("JSON \uB370\uC774\uD130\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uD074\uB9BD\uBCF4\uB4DC \uBCF5\uC0AC \uC2E4\uD328:",t),this.showSnackbarMessage("\uD074\uB9BD\uBCF4\uB4DC \uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}downloadJson(){if(!this.textStreamData){this.showSnackbarMessage("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let t=this.getFormattedJson(),e=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`${this.textStreamData.fileName}_textstream.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),this.showSnackbarMessage("JSON \uD30C\uC77C\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("JSON \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",t),this.showSnackbarMessage("JSON \uB2E4\uC6B4\uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}executeOverlayBackground(){return S(this,null,function*(){if(!this.originalFile||!this.textStreamData){this.showSnackbarMessage("\uC6D0\uBCF8 PDF \uD30C\uC77C \uB610\uB294 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isOverlayingBackground=!0;try{let t=yield this.pdfTextRemovalService.overlayBackgroundOnAllText(this.originalFile,this.textStreamData,{r:1,g:1,b:1},1);t.success&&t.newPdfUrl?(this.showSnackbarMessage(`\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774 \uC644\uB8CC! ${t.removedCount}\uAC1C\uC758 \uD14D\uC2A4\uD2B8\uAC00 \uAC00\uB824\uC84C\uC2B5\uB2C8\uB2E4.`,3e3),this.pdfRefresh.emit(t.newPdfUrl)):this.showSnackbarMessage(`\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774 \uC2E4\uD328: ${t.error}`)}catch(t){console.error("\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774 \uC911 \uC624\uB958:",t),this.showSnackbarMessage("\uBC30\uACBD\uC0C9 \uC624\uBC84\uB808\uC774 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isOverlayingBackground=!1}})}executeCreateEditableOverlay(){return S(this,null,function*(){if(!this.originalFile||!this.textStreamData){this.showSnackbarMessage("\uC6D0\uBCF8 PDF \uD30C\uC77C \uB610\uB294 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isCreatingEditOverlay=!0;try{let t=yield this.pdfTextRemovalService.createEditableTextOverlay(this.originalFile,this.textStreamData);t.success&&t.newPdfUrl?(this.showSnackbarMessage(`\uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uC624\uBC84\uB808\uC774 \uC644\uB8CC! ${t.removedCount}\uAC1C\uC758 \uD3B8\uC9D1 \uC601\uC5ED\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`,3e3),this.pdfRefresh.emit(t.newPdfUrl)):this.showSnackbarMessage(`\uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uC624\uBC84\uB808\uC774 \uC2E4\uD328: ${t.error}`)}catch(t){console.error("\uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uC624\uBC84\uB808\uC774 \uC911 \uC624\uB958:",t),this.showSnackbarMessage("\uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uC624\uBC84\uB808\uC774 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isCreatingEditOverlay=!1}})}executeCreateSentenceOverlay(){return S(this,null,function*(){if(!this.originalFile||!this.textStreamData){this.showSnackbarMessage("\uC6D0\uBCF8 PDF \uD30C\uC77C \uB610\uB294 \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isCreatingSentenceOverlay=!0;try{let t=yield this.pdfTextRemovalService.createSentenceGroupOverlay(this.originalFile,this.textStreamData);t.success&&t.newPdfUrl?(console.log(`\uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774 \uC644\uB8CC! ${t.removedCount}\uAC1C\uC758 \uBB38\uC7A5 \uADF8\uB8F9\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),t.textGroups&&(this.sentenceGroups=t.textGroups,this.showSentenceGroups=!0,console.log("\uBB38\uC7A5 \uADF8\uB8F9 \uB370\uC774\uD130\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4:",this.sentenceGroups),this.sentenceGroupsChanged.emit(this.sentenceGroups)),this.pdfRefresh.emit(t.newPdfUrl)):console.error(`\uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774 \uC2E4\uD328: ${t.error}`)}catch(t){console.error("\uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774 \uC911 \uC624\uB958:",t),console.error("\uBB38\uC7A5 \uB2E8\uC704 \uC624\uBC84\uB808\uC774 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isCreatingSentenceOverlay=!1}})}toggleSentenceGroups(){this.showSentenceGroups=!this.showSentenceGroups}exportSentenceGroupsJson(){if(this.sentenceGroups.length===0){this.showSnackbarMessage("\uB0B4\uBCF4\uB0BC \uBB38\uC7A5 \uADF8\uB8F9 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t={timestamp:new Date().toISOString(),totalGroups:this.sentenceGroups.length,groups:this.sentenceGroups},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`sentence-groups-${new Date().toISOString().slice(0,19)}.json`,i.click(),URL.revokeObjectURL(n),this.showSnackbarMessage("\uBB38\uC7A5 \uADF8\uB8F9 JSON \uD30C\uC77C\uC774 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),console.log("\uBB38\uC7A5 \uADF8\uB8F9 JSON \uB370\uC774\uD130\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD588\uC2B5\uB2C8\uB2E4.")}onSaveAllOverlays(t){return S(this,null,function*(){try{if(console.log("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC2DC\uC791:",t),!t.originalFile){this.showSnackbarMessage("\uC6D0\uBCF8 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(t.editors.length===0){this.showSnackbarMessage("\uC800\uC7A5\uD560 \uD3B8\uC9D1\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let e=t.editors.map(i=>({id:i.id,pageNumber:1,x:i.x,y:i.y,width:i.width,height:i.height,text:i.text,font:i.font,rotation:i.rotation,pdfCoords:i.pdfCoords})),n=yield this.pdfTextRemovalService.saveMultipleTextOverlays(t.originalFile,e,t.viewerScale);if(n.success&&n.newPdfUrl){console.log("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC644\uB8CC"),this.pdfRefresh.emit(n.newPdfUrl);let i=new CustomEvent("clear-text-editors");document.dispatchEvent(i),this.showSnackbarMessage("\uD3B8\uC9D1\uB41C PDF\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",3e3)}else console.error("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC2E4\uD328:",n.error),this.showSnackbarMessage(`\uC800\uC7A5 \uC2E4\uD328: ${n.error||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`)}catch(e){console.error("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uC800\uC7A5 \uC911 \uC624\uB958:",e),this.showSnackbarMessage("\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onDownloadAllOverlays(t){return S(this,null,function*(){try{if(console.log("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uB2E4\uC6B4\uB85C\uB4DC \uC2DC\uC791:",t),!t.originalFile){this.showSnackbarMessage("\uC6D0\uBCF8 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(t.editors.length===0){this.showSnackbarMessage("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uD3B8\uC9D1\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let e=t.editors.map(i=>({id:i.id,pageNumber:1,x:i.x,y:i.y,width:i.width,height:i.height,text:i.text,font:i.font,rotation:i.rotation,pdfCoords:i.pdfCoords})),n=yield this.pdfTextRemovalService.saveMultipleTextOverlays(t.originalFile,e,t.viewerScale);if(n.success&&n.newPdfBlob){console.log("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC");let i=URL.createObjectURL(n.newPdfBlob),o=document.createElement("a");o.href=i,o.download=`edited-${t.originalFile.name}`,o.click(),URL.revokeObjectURL(i),this.showSnackbarMessage("\uD3B8\uC9D1\uB41C PDF\uAC00 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",3e3)}else console.error("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",n.error),this.showSnackbarMessage(`\uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328: ${n.error||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`)}catch(e){console.error("\uC804\uCCB4 \uC624\uBC84\uB808\uC774 \uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958:",e),this.showSnackbarMessage("\uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onDownloadTextStreamModified(t){return S(this,null,function*(){try{if(console.log("\uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uB2E4\uC6B4\uB85C\uB4DC \uC2DC\uC791:",t),!t.originalFile){this.showSnackbarMessage("\uC6D0\uBCF8 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(t.changedTexts.length===0){this.showSnackbarMessage("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}console.log("\uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8 \uC218:",t.changedTexts.length),console.log("\uC6D0\uBCF8 \uD30C\uC77C:",t.originalFile.name,t.originalFile.size,"\uBC14\uC774\uD2B8");let e=t.changedTexts.map((n,i)=>(console.log(`\uBCC0\uACBD ${i+1}:`,{original:n.originalText,modified:n.modifiedText,position:n.position}),{pageIndex:0,originalText:n.originalText,newText:n.modifiedText,x:n.position.x,y:n.position.y,width:n.position.width,height:n.position.height}));console.log("\uCD5C\uC885 \uC218\uC815 \uB370\uC774\uD130:",e),this.showSnackbarMessage(`\uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC911... (${e.length}\uAC1C \uBCC0\uACBD\uC0AC\uD56D)`,1e3),yield this.pdfTextStreamModifierService.modifyAndDownloadPdf(t.originalFile,e),console.log("PDF \uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC"),this.showSnackbarMessage("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815\uC774 \uC644\uB8CC\uB418\uC5B4 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",3e3)}catch(e){console.error("\uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958:",e),this.showSnackbarMessage(`\uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e}`,5e3)}})}static \u0275fac=function(e){return new(e||r)(ee(Qe),ee(ze))};static \u0275cmp=N({type:r,selectors:[["app-pdf-content-panel"]],inputs:{isVisible:"isVisible",currentPage:"currentPage",totalPages:"totalPages",pageSize:"pageSize",extractedText:"extractedText",searchResults:"searchResults",documentMetadata:"documentMetadata",bookmarks:"bookmarks",textStreamData:"textStreamData",originalFile:"originalFile"},outputs:{close:"close",bookmarkClick:"bookmarkClick",searchResultClick:"searchResultClick",pdfRefresh:"pdfRefresh",sentenceGroupsChanged:"sentenceGroupsChanged",textEditorSave:"textEditorSave"},standalone:!1,features:[ne],decls:43,vars:20,consts:[[1,"pdf-content-panel"],[1,"sidebar-header"],[1,"panel-title"],["title","\uB2EB\uAE30",1,"close-panel-btn",3,"click"],["class","panel-section",4,"ngIf"],[1,"panel-section"],[1,"section-title"],[1,"page-info"],[1,"info-item"],[1,"label"],[1,"value"],[1,"section-title","collapsible",3,"click"],[1,"toggle-icon"],["class","text-content",4,"ngIf"],["class","metadata-content",4,"ngIf"],["class","bookmarks-content",4,"ngIf"],[3,"close","message","isVisible","duration"],["class","pdf-processing-content",4,"ngIf"],[1,"pdf-processing-content"],[1,"execution-controls"],[1,"execute-btn","overlay-background-btn",3,"click","disabled"],[1,"icon"],[1,"text"],["class","spinner",4,"ngIf"],[1,"execute-btn","editable-overlay-btn",3,"click","disabled"],[1,"execute-btn","sentence-overlay-btn",3,"click","disabled"],["class","execution-info",4,"ngIf"],[1,"spinner"],[1,"execution-info"],["class","info-item",4,"ngIf"],["class","sentence-groups-content",4,"ngIf"],[1,"sentence-groups-content"],["class","sentence-group-item",4,"ngFor","ngForOf"],[1,"json-export"],[1,"export-btn",3,"click"],[1,"sentence-group-item"],[1,"group-header"],[1,"group-number"],[1,"font-info"],[1,"item-count"],[1,"group-text"],[1,"group-position"],[1,"text-content"],[1,"text-area"],[1,"metadata-content"],["class","metadata-item",4,"ngFor","ngForOf"],[1,"metadata-item"],[1,"metadata-label"],[1,"metadata-value"],[1,"bookmarks-content"],["class","bookmark-item",3,"padding-left","click",4,"ngFor","ngForOf"],["class","no-bookmarks",4,"ngIf"],[1,"bookmark-item",3,"click"],[1,"bookmark-title"],[1,"bookmark-page"],[1,"no-bookmarks"],[1,"search-results"],["class","search-result-item",3,"click",4,"ngFor","ngForOf"],[1,"search-result-item",3,"click"],[1,"result-page"],[1,"result-text"],["class","text-stream-json-content",4,"ngIf"],[1,"text-stream-json-content"],[1,"json-controls"],[1,"json-btn",3,"click"],[1,"json-display"],[1,"json-content"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),g(3,"PDF \uBCF8\uBB38 \uC0C1\uC138"),s(),a(4,"button",3),h("click",function(){return n.onClose()}),g(5," \xD7 "),s()(),b(6,Or,6,2,"div",4)(7,kr,6,3,"div",4),a(8,"div",5)(9,"div",6),g(10,"\uD398\uC774\uC9C0 \uC815\uBCF4"),s(),a(11,"div",7)(12,"div",8)(13,"span",9),g(14,"\uD604\uC7AC \uD398\uC774\uC9C0:"),s(),a(15,"span",10),g(16),s()(),a(17,"div",8)(18,"span",9),g(19,"\uD398\uC774\uC9C0 \uD06C\uAE30:"),s(),a(20,"span",10),g(21),s()()()(),a(22,"div",5)(23,"div",11),h("click",function(){return n.toggleTextContent()}),a(24,"span",12),g(25),s(),g(26," \uD14D\uC2A4\uD2B8 \uB0B4\uC6A9 "),s(),b(27,Dr,3,1,"div",13),s(),a(28,"div",5)(29,"div",11),h("click",function(){return n.toggleMetadata()}),a(30,"span",12),g(31),s(),g(32," \uBB38\uC11C \uC815\uBCF4 "),s(),b(33,Fr,2,1,"div",14),s(),a(34,"div",5)(35,"div",11),h("click",function(){return n.toggleBookmarks()}),a(36,"span",12),g(37),s(),g(38," \uBAA9\uCC28 "),s(),b(39,Vr,3,2,"div",15),s(),b(40,Lr,5,1,"div",4)(41,$r,6,2,"div",4),s(),a(42,"app-snackbar",16),h("close",function(){return n.onSnackbarClose()}),s()),e&2&&(J("display",n.isVisible?"":"none"),T("closed",!n.isVisible),c(6),p("ngIf",n.originalFile),c(),p("ngIf",n.showSentenceGroups&&n.sentenceGroups.length>0),c(9),lt("",n.currentPage," / ",n.totalPages),c(5),F(n.pageSize),c(4),F(n.textContentExpanded?"\u25BC":"\u25B6"),c(2),p("ngIf",n.textContentExpanded),c(4),F(n.metadataExpanded?"\u25BC":"\u25B6"),c(2),p("ngIf",n.metadataExpanded),c(4),F(n.bookmarksExpanded?"\u25BC":"\u25B6"),c(2),p("ngIf",n.bookmarksExpanded),c(),p("ngIf",n.searchResults.length>0),c(),p("ngIf",n.textStreamData),c(),p("message",n.snackbarMessage)("isVisible",n.showSnackbar)("duration",n.snackbarDuration))},dependencies:[Q,Y,Ze],styles:['@charset "UTF-8";.pdf-content-panel[_ngcontent-%COMP%]{width:320px;background:#fff;border-left:1px solid #e0e0e0;overflow-y:auto;margin-right:40px;transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1);transform:translate(0);opacity:1;height:100%;max-height:100vh;position:absolute;top:0;right:0;z-index:100}.pdf-content-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0;background:#f8f9fa}.panel-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0}.close-panel-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;width:28px;height:28px;line-height:1;display:flex;align-items:center;justify-content:center;color:#888;border-radius:4px;transition:background .15s,color .15s}.close-panel-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.panel-section[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0}.section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;padding:16px;background:#fafbfc;border-bottom:1px solid #e8eaed;margin:0}.section-title.collapsible[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .15s}.section-title.collapsible[_ngcontent-%COMP%]:hover{background:#f0f2f5}.toggle-icon[_ngcontent-%COMP%]{font-size:12px;color:#666;width:12px;display:inline-block}.page-info[_ngcontent-%COMP%]{padding:16px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px}.info-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.label[_ngcontent-%COMP%]{color:#666;font-weight:500}.value[_ngcontent-%COMP%]{color:#333;font-weight:600}.text-content[_ngcontent-%COMP%]{padding:16px}.text-area[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e0e0e0;border-radius:6px;padding:12px;font-size:13px;line-height:1.5;color:#333;max-height:200px;overflow-y:auto;white-space:pre-wrap;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.metadata-content[_ngcontent-%COMP%]{padding:16px}.metadata-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:12px;font-size:13px}.metadata-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.metadata-label[_ngcontent-%COMP%]{color:#666;font-weight:500;margin-bottom:2px}.metadata-value[_ngcontent-%COMP%]{color:#333;padding-left:8px}.bookmarks-content[_ngcontent-%COMP%]{padding:8px 0}.bookmark-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;cursor:pointer;font-size:13px;transition:background .15s}.bookmark-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.bookmark-title[_ngcontent-%COMP%]{color:#333;flex:1;margin-right:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.bookmark-page[_ngcontent-%COMP%]{color:#666;font-size:12px;font-weight:500}.no-bookmarks[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#888;font-size:13px;font-style:italic}.search-results[_ngcontent-%COMP%]{padding:8px 0}.search-result-item[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;border-bottom:1px solid #f0f0f0;transition:background .15s}.search-result-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.search-result-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.result-page[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:500;margin-bottom:4px}.result-text[_ngcontent-%COMP%]{font-size:13px;color:#333;line-height:1.4;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.pdf-content-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .text-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.pdf-content-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track, .text-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.pdf-content-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .text-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.pdf-content-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .text-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 1200px){.pdf-content-panel[_ngcontent-%COMP%]{width:280px}}@media (max-width: 768px){.pdf-content-panel[_ngcontent-%COMP%]{width:100%;position:fixed;top:0;right:0;z-index:1000;border-left:none;box-shadow:-2px 0 8px #0000001a;margin-right:0}}.text-stream-json-content[_ngcontent-%COMP%]{padding:16px}.json-controls[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}.json-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 12px;background:#f8f9fa;border:1px solid #dee2e6;border-radius:4px;font-size:12px;color:#495057;cursor:pointer;transition:all .15s}.json-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#adb5bd}.json-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:14px}.json-display[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e0e0e0;border-radius:6px;max-height:400px;overflow:auto}.json-content[_ngcontent-%COMP%]{margin:0;padding:12px;font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:11px;line-height:1.4;color:#333;white-space:pre-wrap;word-wrap:break-word;background:transparent;border:none;outline:none}.json-content[_ngcontent-%COMP%]{color:#333}.json-display[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.json-display[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.json-display[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.json-display[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.pdf-processing-content[_ngcontent-%COMP%]{margin-top:12px}.execution-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:12px}.execute-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;color:#333;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;position:relative;min-height:44px}.execute-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#007bff;background:#f8f9ff;color:#007bff;transform:translateY(-1px);box-shadow:0 2px 4px #007bff1a}.execute-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 2px #007bff1a}.execute-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.execute-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px;flex-shrink:0}.execute-btn[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1;text-align:left}.execute-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #f3f3f3;border-top:2px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;flex-shrink:0}.section-divider[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:600;margin:16px 0 8px;padding:8px 0;border-top:1px solid #e0e0e0;text-align:center}.remove-ai-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#dc3545;background:#fff5f5;color:#dc3545;box-shadow:0 2px 4px #dc35451a}.remove-ai-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#dc3545}.replace-ai-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#28a745;background:#f8fff9;color:#28a745;box-shadow:0 2px 4px #28a7451a}.replace-ai-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#28a745}.replace-stream-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#ffc107;background:#fffef5;color:#856404;box-shadow:0 2px 4px #ffc1071a}.replace-stream-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#ffc107}.draw-rectangle-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#6f42c1;background:#faf8ff;color:#6f42c1;box-shadow:0 2px 4px #6f42c11a}.draw-rectangle-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#6f42c1}.overlay-background-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#17a2b8;background:#f0fcff;color:#17a2b8;box-shadow:0 2px 4px #17a2b81a}.overlay-background-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#17a2b8}.editable-overlay-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#fd7e14;background:#fff8f0;color:#fd7e14;box-shadow:0 2px 4px #fd7e141a}.editable-overlay-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#fd7e14}.sentence-overlay-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#e83e8c;background:#fff0f6;color:#e83e8c;box-shadow:0 2px 4px #e83e8c1a}.sentence-overlay-btn[_ngcontent-%COMP%]:disabled   .spinner[_ngcontent-%COMP%]{border-top-color:#e83e8c}.execution-info[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background:#fff3cd;border:1px solid #ffeaa7;border-radius:6px}.execution-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{font-size:12px;color:#856404;margin-bottom:4px}.execution-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.sentence-groups-content[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;padding:8px 0}.sentence-group-item[_ngcontent-%COMP%]{margin-bottom:12px;padding:12px;border:1px solid #e0e0e0;border-radius:6px;background:#fafafa}.sentence-group-item[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-color:#ccc}.group-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;font-size:12px;color:#666}.group-header[_ngcontent-%COMP%]   .group-number[_ngcontent-%COMP%]{background:#e83e8c;color:#fff;padding:2px 6px;border-radius:4px;font-weight:700;min-width:20px;text-align:center}.group-header[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:2px 6px;border-radius:4px}.group-header[_ngcontent-%COMP%]   .font-info[_ngcontent-%COMP%]{background:#28a745;color:#fff;padding:2px 6px;border-radius:4px}.group-header[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{background:#ffc107;color:#000;padding:2px 6px;border-radius:4px}.group-text[_ngcontent-%COMP%]{font-size:13px;line-height:1.4;color:#333;margin-bottom:6px;word-break:break-word}.group-position[_ngcontent-%COMP%]{font-size:11px;color:#888;font-family:monospace}.json-export[_ngcontent-%COMP%]{margin-top:16px;padding-top:12px;border-top:1px solid #e0e0e0;text-align:center}.export-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:1px solid #6c757d;border-radius:4px;background:#fff;color:#6c757d;font-size:12px;cursor:pointer;transition:all .2s ease}.export-btn[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff;transform:translateY(-1px);box-shadow:0 2px 4px #6c757d33}']})};function jr(r,t){if(r&1&&C(0,"img",12),r&2){let e=d().$implicit;p("src",e.thumbnail,Se)("alt","\uD398\uC774\uC9C0 "+e.pageNumber+" \uC378\uB124\uC77C")}}function Gr(r,t){if(r&1&&(a(0,"div",13)(1,"div",14),g(2),s()()),r&2){let e=d().$implicit;c(2),F(e.pageNumber)}}function Hr(r,t){if(r&1){let e=w();a(0,"div",6),h("dragstart",function(i){let o=m(e).index,l=d();return u(l.onDragStart(i,o))})("dragover",function(i){m(e);let o=d();return u(o.onDragOver(i))})("drop",function(i){let o=m(e).index,l=d();return u(l.onDrop(i,o))})("dragend",function(){m(e);let i=d();return u(i.onDragEnd())})("click",function(){let i=m(e).$implicit,o=d();return u(o.togglePageSelection(i.pageNumber))}),a(1,"div",7)(2,"div",8),b(3,jr,1,2,"img",9)(4,Gr,3,1,"div",10),s()(),a(5,"div",11),g(6),s()()}if(r&2){let e=t.$implicit,n=t.index,i=d();T("selected",i.isPageSelected(e.pageNumber))("dragging",i.draggedIndex===n),c(3),p("ngIf",e.thumbnail),c(),p("ngIf",!e.thumbnail),c(2),F(e.pageNumber)}}var yt=class r{isVisible=!1;pages=[];currentPageCount=0;pdfSrc=null;close=new O;pageOrderChanged=new O;deletePages=new O;confirmDelete=new O;pageList=[];selectedPage=null;draggedIndex=null;dragOverIndex=null;ngOnInit(){this.initializePages()}ngOnChanges(t){this.initializePages(),t.pdfSrc&&t.pdfSrc.currentValue&&this.pageList.length>0&&this.generateThumbnails()}initializePages(){this.currentPageCount>0?(this.pageList=Array.from({length:this.currentPageCount},(t,e)=>({pageNumber:e+1,title:`\uD398\uC774\uC9C0 ${e+1}`})),this.pdfSrc&&this.generateThumbnails()):this.pages.length>0&&(this.pageList=[...this.pages])}trackByPageNumber(t,e){return e.pageNumber}onDragStart(t,e){this.draggedIndex=e,t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",""))}onDragOver(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}onDrop(t,e){if(t.preventDefault(),this.draggedIndex!==null&&this.draggedIndex!==e){let n=this.pageList[this.draggedIndex];this.pageList.splice(this.draggedIndex,1),this.pageList.splice(e,0,n),this.pageList.forEach((i,o)=>{i.pageNumber=o+1}),this.pageOrderChanged.emit([...this.pageList]),console.log("\uD398\uC774\uC9C0 \uC21C\uC11C \uBCC0\uACBD:",this.pageList)}this.draggedIndex=null,this.dragOverIndex=null}onDragEnd(){this.draggedIndex=null,this.dragOverIndex=null}togglePageSelection(t){this.selectedPage===t?this.selectedPage=null:this.selectedPage=t}isPageSelected(t){return this.selectedPage===t}onDeleteSelected(){if(console.log("onDeleteSelected called, selectedPage:",this.selectedPage),this.selectedPage===null){alert("\uC0AD\uC81C\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}console.log("Emitting confirmDelete event"),this.confirmDelete.emit({pages:[this.selectedPage],callback:()=>{console.log("Delete callback executed");let t=[this.selectedPage];this.deletePages.emit(t),this.pageList=this.pageList.filter(e=>e.pageNumber!==this.selectedPage),this.pageList.forEach((e,n)=>{e.pageNumber=n+1}),this.selectedPage=null,this.pageOrderChanged.emit([...this.pageList])}})}generateThumbnails(){return S(this,null,function*(){if(!this.pdfSrc||!pdfjsLib){console.warn("PDF URL \uB610\uB294 PDF.js\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}try{let e=yield pdfjsLib.getDocument(this.pdfSrc).promise;for(let n=0;n<this.pageList.length;n++){let i=yield e.getPage(n+1),o=yield this.generatePageThumbnail(i,n+1),l=this.pageList.findIndex(f=>f.pageNumber===n+1);l!==-1&&(this.pageList[l].thumbnail=o)}console.log("\uC378\uB124\uC77C \uC0DD\uC131 \uC644\uB8CC")}catch(t){console.error("\uC378\uB124\uC77C \uC0DD\uC131 \uC911 \uC624\uB958 \uBC1C\uC0DD:",t)}})}generatePageThumbnail(t,e){return S(this,null,function*(){let i=t.getViewport({scale:.3}),o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");o.height=i.height,o.width=i.width;let f={canvasContext:l,viewport:i};return yield t.render(f).promise,o.toDataURL("image/png")})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-page-reorder"]],inputs:{isVisible:"isVisible",pages:"pages",currentPageCount:"currentPageCount",pdfSrc:"pdfSrc"},outputs:{close:"close",pageOrderChanged:"pageOrderChanged",deletePages:"deletePages",confirmDelete:"confirmDelete"},standalone:!1,features:[ne],decls:7,vars:7,consts:[[1,"page-reorder-panel"],[1,"page-list-container"],[1,"page-grid"],["class","page-card","draggable","true",3,"selected","dragging","dragstart","dragover","drop","dragend","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"action-buttons"],["title","\uC120\uD0DD\uB41C \uD398\uC774\uC9C0 \uC0AD\uC81C",1,"action-btn","delete-btn",3,"click","disabled"],["draggable","true",1,"page-card",3,"dragstart","dragover","drop","dragend","click"],[1,"page-thumbnail"],[1,"thumbnail-content"],["class","thumbnail-image",3,"src","alt",4,"ngIf"],["class","thumbnail-placeholder",4,"ngIf"],[1,"page-number"],[1,"thumbnail-image",3,"src","alt"],[1,"thumbnail-placeholder"],[1,"page-number-overlay"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),b(3,Hr,7,7,"div",3),s()(),a(4,"div",4)(5,"button",5),h("click",function(){return n.onDeleteSelected()}),g(6," \uC0AD\uC81C "),s()()()),e&2&&(J("display",n.isVisible?"":"none"),T("closed",!n.isVisible),c(3),p("ngForOf",n.pageList)("ngForTrackBy",n.trackByPageNumber),c(2),p("disabled",n.selectedPage===null))},dependencies:[Q,Y],styles:['@charset "UTF-8";.page-reorder-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 150px);background:#fff;display:flex;flex-direction:column;overflow:hidden;position:relative}@media (max-height: 800px){.page-reorder-panel[_ngcontent-%COMP%]{height:calc(100vh - 120px)}}@media (max-height: 600px){.page-reorder-panel[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}.page-reorder-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.page-list-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 40px 40px;background:#f8f9fa;display:flex;justify-content:center;align-items:flex-start;min-height:0}.page-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;max-width:1200px;margin:0 auto;width:100%;justify-items:center;padding-bottom:20px}.page-card[_ngcontent-%COMP%]{position:relative;background:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:16px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #0000001a}.page-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026;border-color:#ccc}.page-card.selected[_ngcontent-%COMP%]{border-color:red;border-width:3px;box-shadow:0 4px 16px #f003}.page-card.dragging[_ngcontent-%COMP%]{opacity:.5;transform:rotate(5deg)}.page-thumbnail[_ngcontent-%COMP%]{width:100%;height:200px;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden;background:#f9f9f9;display:flex;align-items:center;justify-content:center;margin-bottom:12px}.thumbnail-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:4px}.thumbnail-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;background:#f8f9fa;border:2px dashed #dee2e6;border-radius:4px;display:flex;align-items:center;justify-content:center;position:relative}.page-number-overlay[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#6c757d;background:#fffc;padding:8px 16px;border-radius:20px;border:2px solid #dee2e6}.page-preview[_ngcontent-%COMP%]{width:80%;height:80%;background:#fff;border:1px solid #ddd;border-radius:2px;box-shadow:0 2px 4px #0000001a}.page-number[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-weight:500;color:#333}.page-list-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;justify-content:center;align-items:flex-start;padding:40px 20px;background:#f8f9fa}.page-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:20px;max-width:95%;width:100%;justify-content:center;align-items:flex-start;background:#fff;border-radius:12px;box-shadow:0 4px 16px #0000001a;min-height:400px}.page-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;gap:12px;padding:16px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;cursor:pointer;transition:all .2s ease;-webkit-user-select:none;user-select:none;width:160px;min-height:220px}.page-item[_ngcontent-%COMP%]:hover{border-color:#007acc;background:#f8f9ff}.page-item.selected[_ngcontent-%COMP%]{border-color:#007acc;background:#e3f2fd}.page-item.dragging[_ngcontent-%COMP%]{opacity:.7;transform:rotate(3deg) scale(1.05);box-shadow:0 8px 24px #0003;z-index:1000}.drag-handle[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;color:#666;cursor:grab;font-size:16px;line-height:1;position:absolute;top:8px;right:8px;background:#ffffffe6;border-radius:50%;border:1px solid #ddd;transition:all .2s ease}.drag-handle[_ngcontent-%COMP%]:hover{background:#007acc;color:#fff;border-color:#007acc}.drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.page-thumbnail[_ngcontent-%COMP%]{width:90px;height:120px;flex-shrink:0}.thumbnail-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;position:relative}.page-number[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#666}.page-info[_ngcontent-%COMP%]{text-align:center;width:100%}.page-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.page-details[_ngcontent-%COMP%]{font-size:12px;color:#666}.page-checkbox[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.page-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.panel-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e0e0e0;background:#f8f9fa}.page-count[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-bottom:8px}.instructions[_ngcontent-%COMP%]{font-size:12px;color:#666;line-height:1.4}.page-item[draggable=true][_ngcontent-%COMP%]{position:relative}.page-item.drag-over[_ngcontent-%COMP%]{border-color:#007acc;border-style:dashed;background:#e3f2fd}.page-item.drag-target[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-4px;left:0;right:0;height:2px;background:#007acc;border-radius:1px}.action-buttons[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #e0e0e0;background:#f8f9fa;display:flex;justify-content:center;gap:12px}.action-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:80px}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333;transform:translateY(-1px);box-shadow:0 4px 12px #dc35454d}.delete-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;opacity:.6}']})};function Ur(r,t){if(r&1){let e=w();a(0,"div",7),h("click",function(){let i=m(e).$implicit,o=d();return u(o.onOptionSelect(i.id))}),a(1,"div",8),g(2),s(),a(3,"div",9)(4,"h4"),g(5),s(),a(6,"p"),g(7),s(),a(8,"span",10),g(9),s()()()}if(r&2){let e=t.$implicit,n=d();T("selected",n.selectedOption===e.id),c(2),F(e.icon),c(3),F(e.title),c(2),F(e.description),c(2),j(".",e.extension)}}function Yr(r,t){if(r&1){let e=w();a(0,"div",16)(1,"label"),g(2),s(),a(3,"input",31),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.conversionSettings.quality,i)||(o.conversionSettings.quality=i),u(i)}),s(),a(4,"div",32)(5,"span"),g(6,"\uB0AE\uC74C"),s(),a(7,"span"),g(8,"\uB192\uC74C"),s()()()}if(r&2){let e=d(2);c(2),j("\uD488\uC9C8 (",e.conversionSettings.quality,"%)"),c(),G("ngModel",e.conversionSettings.quality)}}function Kr(r,t){if(r&1){let e=w();a(0,"div",33)(1,"input",34),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.conversionSettings.startPage,i)||(o.conversionSettings.startPage=i),u(i)}),s(),a(2,"span"),g(3,"~"),s(),a(4,"input",34),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.conversionSettings.endPage,i)||(o.conversionSettings.endPage=i),u(i)}),s()()}if(r&2){let e=d(2);c(),G("ngModel",e.conversionSettings.startPage),c(3),G("ngModel",e.conversionSettings.endPage)}}function qr(r,t){if(r&1){let e=w();a(0,"div",16)(1,"label"),g(2,"\uD574\uC0C1\uB3C4 (DPI)"),s(),a(3,"select",35),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.conversionSettings.resolution,i)||(o.conversionSettings.resolution=i),u(i)}),a(4,"option",36),g(5,"72 DPI (\uC6F9\uC6A9)"),s(),a(6,"option",37),g(7,"150 DPI (\uC77C\uBC18)"),s(),a(8,"option",38),g(9,"300 DPI (\uACE0\uD654\uC9C8)"),s(),a(10,"option",39),g(11,"600 DPI (\uCD5C\uACE0\uD654\uC9C8)"),s()()()}if(r&2){let e=d(2);c(3),G("ngModel",e.conversionSettings.resolution)}}function Xr(r,t){if(r&1){let e=w();a(0,"div",11),h("click",function(){m(e);let i=d();return u(i.onCloseModal())}),a(1,"div",12),h("click",function(i){return m(e),u(i.stopPropagation())}),a(2,"div",13)(3,"h3"),g(4,"\uBCC0\uD658 \uC124\uC815"),s(),a(5,"button",14),h("click",function(){m(e);let i=d();return u(i.onCloseModal())}),g(6,"\u2715"),s()(),a(7,"div",15)(8,"div",16)(9,"label"),g(10,"\uD30C\uC77C\uBA85"),s(),a(11,"input",17),W("ngModelChange",function(i){m(e);let o=d();return H(o.conversionSettings.fileName,i)||(o.conversionSettings.fileName=i),u(i)}),s()(),a(12,"div",16)(13,"label"),g(14,"\uC800\uC7A5 \uC704\uCE58"),s(),a(15,"div",18)(16,"input",19),W("ngModelChange",function(i){m(e);let o=d();return H(o.conversionSettings.savePath,i)||(o.conversionSettings.savePath=i),u(i)}),s(),a(17,"button",20),h("click",function(){m(e);let i=d();return u(i.onBrowsePath())}),g(18,"\uCC3E\uC544\uBCF4\uAE30"),s()()(),b(19,Yr,9,2,"div",21),a(20,"div",16)(21,"label"),g(22,"\uD398\uC774\uC9C0 \uBC94\uC704"),s(),a(23,"div",22)(24,"label",23)(25,"input",24),W("ngModelChange",function(i){m(e);let o=d();return H(o.conversionSettings.pageRange,i)||(o.conversionSettings.pageRange=i),u(i)}),s(),a(26,"span"),g(27,"\uBAA8\uB4E0 \uD398\uC774\uC9C0"),s()(),a(28,"label",23)(29,"input",25),W("ngModelChange",function(i){m(e);let o=d();return H(o.conversionSettings.pageRange,i)||(o.conversionSettings.pageRange=i),u(i)}),s(),a(30,"span"),g(31,"\uD604\uC7AC \uD398\uC774\uC9C0"),s()(),a(32,"label",23)(33,"input",26),W("ngModelChange",function(i){m(e);let o=d();return H(o.conversionSettings.pageRange,i)||(o.conversionSettings.pageRange=i),u(i)}),s(),a(34,"span"),g(35,"\uD398\uC774\uC9C0 \uBC94\uC704"),s()()(),b(36,Kr,5,2,"div",27),s(),b(37,qr,12,1,"div",21),s(),a(38,"div",28)(39,"button",29),h("click",function(){m(e);let i=d();return u(i.onCloseModal())}),g(40,"\uCDE8\uC18C"),s(),a(41,"button",30),h("click",function(){m(e);let i=d();return u(i.onConfirmConversion())}),g(42,"\uBCC0\uD658 \uC2DC\uC791"),s()()()()}if(r&2){let e=d();c(11),G("ngModel",e.conversionSettings.fileName),c(5),G("ngModel",e.conversionSettings.savePath),c(3),p("ngIf",e.selectedOption==="jpg"),c(6),G("ngModel",e.conversionSettings.pageRange),c(4),G("ngModel",e.conversionSettings.pageRange),c(4),G("ngModel",e.conversionSettings.pageRange),c(3),p("ngIf",e.conversionSettings.pageRange==="range"),c(),p("ngIf",e.selectedOption==="jpg")}}var Et=class r{conversionOptions=[{id:"ppt",title:"PowerPoint",description:"PDF\uB97C PPT \uD504\uB808\uC820\uD14C\uC774\uC158\uC73C\uB85C \uBCC0\uD658",icon:"\u{1F4CA}",extension:"pptx"},{id:"doc",title:"Word \uBB38\uC11C",description:"PDF\uB97C Word \uBB38\uC11C\uB85C \uBCC0\uD658",icon:"\u{1F4C4}",extension:"docx"},{id:"xls",title:"Excel \uC2A4\uD504\uB808\uB4DC\uC2DC\uD2B8",description:"PDF\uB97C Excel \uD30C\uC77C\uB85C \uBCC0\uD658",icon:"\u{1F4C8}",extension:"xlsx"},{id:"jpg",title:"\uC774\uBBF8\uC9C0",description:"PDF\uB97C JPG \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658",icon:"\u{1F5BC}\uFE0F",extension:"jpg"}];selectedOption=null;showModal=!1;conversionSettings={fileName:"250612_\uBBF8\uB2C8\uC560\uB2F5_\uCD5C\uC885",savePath:"C:\\Users\\Desktop\\\uC5F0\uAD6C\\PDF\\",quality:70,pageRange:"all",startPage:1,endPage:1,imageFormat:"jpg",resolution:150};onOptionSelect(t){this.selectedOption=t;let e=this.conversionOptions.find(n=>n.id===t);e&&(this.conversionSettings.fileName=`\uBCC0\uD658\uB41C_\uD30C\uC77C.${e.extension}`,this.showModal=!0)}onCloseModal(){this.showModal=!1}onConfirmConversion(){let t=this.conversionOptions.find(e=>e.id===this.selectedOption);t&&(console.log("\uBCC0\uD658 \uC124\uC815:",this.conversionSettings),alert(`${t.title}\uB85C \uBCC0\uD658\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4.`),this.showModal=!1)}onBrowsePath(){alert("\uD30C\uC77C \uD0D0\uC0C9\uAE30\uAC00 \uC5F4\uB9BD\uB2C8\uB2E4.")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-file-conversion"]],standalone:!1,decls:10,vars:2,consts:[[1,"file-conversion-panel"],[1,"panel-content"],[1,"conversion-options"],[1,"description"],[1,"options-grid"],["class","option-card",3,"selected","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"option-card",3,"click"],[1,"option-icon"],[1,"option-content"],[1,"extension"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"setting-group"],["type","text",1,"setting-input",3,"ngModelChange","ngModel"],[1,"path-input-group"],["type","text","readonly","",1,"setting-input","path-input",3,"ngModelChange","ngModel"],[1,"browse-btn",3,"click"],["class","setting-group",4,"ngIf"],[1,"radio-group"],[1,"radio-option"],["type","radio","name","pageRange","value","all",3,"ngModelChange","ngModel"],["type","radio","name","pageRange","value","current",3,"ngModelChange","ngModel"],["type","radio","name","pageRange","value","range",3,"ngModelChange","ngModel"],["class","page-range-inputs",4,"ngIf"],[1,"modal-footer"],[1,"cancel-modal-btn",3,"click"],[1,"confirm-btn",3,"click"],["type","range","min","10","max","100",1,"quality-slider",3,"ngModelChange","ngModel"],[1,"quality-labels"],[1,"page-range-inputs"],["type","number","min","1",1,"page-input",3,"ngModelChange","ngModel"],[1,"setting-select",3,"ngModelChange","ngModel"],["value","72"],["value","150"],["value","300"],["value","600"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),g(4,"\uD30C\uC77C \uBCC0\uD658"),s(),a(5,"p",3),g(6,"PDF \uD30C\uC77C\uC744 \uB2E4\uC591\uD55C \uD615\uC2DD\uC73C\uB85C \uBCC0\uD658\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),s(),a(7,"div",4),b(8,Ur,10,6,"div",5),s()()(),b(9,Xr,43,8,"div",6),s()),e&2&&(c(8),p("ngForOf",n.conversionOptions),c(),p("ngIf",n.showModal))},dependencies:[Q,Y,ve,we,ue,$e,je,Pe,Ne,fe,mt,he],styles:[".file-conversion-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 120px);background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column;overflow:hidden}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin-bottom:8px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#666;margin-bottom:32px;font-size:14px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-bottom:32px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]{border:2px solid #e5e5e5;border-radius:8px;padding:20px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:16px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]:hover{border-color:#ccc;box-shadow:0 2px 8px #0000001a}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card.selected[_ngcontent-%COMP%]{border-color:#f44;background-color:#fff5f5;box-shadow:0 2px 12px #f443}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:32px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;border-radius:8px;flex-shrink:0}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{flex:1}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-bottom:8px;line-height:1.4}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   .extension[_ngcontent-%COMP%]{display:inline-block;background:#e9ecef;color:#495057;padding:2px 8px;border-radius:4px;font-size:12px;font-weight:500}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;padding-top:24px;border-top:1px solid #e5e5e5}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;border:none;transition:all .2s ease}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.convert-btn[_ngcontent-%COMP%]{background:#f44;color:#fff}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.convert-btn[_ngcontent-%COMP%]:hover{background:#e03e3e}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000004d;width:90%;max-width:500px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e5e5}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:#666;padding:4px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]{margin-bottom:20px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#333;margin-bottom:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44;box-shadow:0 0 0 2px #f443}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]{display:flex;gap:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .path-input[_ngcontent-%COMP%]{flex:1}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #ddd;border-radius:6px;padding:10px 16px;font-size:14px;cursor:pointer;white-space:nowrap}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .quality-slider[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .quality-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:#666}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .page-range-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .page-range-inputs[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:center}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .page-range-inputs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;background:#fff}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding:20px 24px;border-top:1px solid #e5e5e5}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;border:none}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.cancel-modal-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.cancel-modal-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.confirm-btn[_ngcontent-%COMP%]{background:#f44;color:#fff}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.confirm-btn[_ngcontent-%COMP%]:hover{background:#e03e3e}@media (max-width: 768px){.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]{padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:24px;width:40px;height:40px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]{flex-direction:column}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:95%;margin:16px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]{flex-direction:column}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{width:100%}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]{padding:8px 0}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{flex-direction:column;padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};var Ot=class r{title="\uAC1C\uBC1C\uC911";description="\uC774 \uAE30\uB2A5\uC740 \uD604\uC7AC \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.";static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-under-development"]],inputs:{title:"title",description:"description"},standalone:!1,decls:12,vars:2,consts:[[1,"under-development-panel"],[1,"panel-content"],[1,"development-message"],[1,"icon"],[1,"progress-info"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"\u{1F6A7}"),s(),a(5,"h3"),g(6),s(),a(7,"p"),g(8),s(),a(9,"div",4)(10,"p"),g(11,"\uBE60\uB978 \uC2DC\uC77C \uB0B4\uC5D0 \uC644\uC131\uB420 \uC608\uC815\uC785\uB2C8\uB2E4."),s()()()()()),e&2&&(c(6),F(n.title),c(2),F(n.description))},styles:[".under-development-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 120px);background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column;overflow:hidden}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]{text-align:center;max-width:400px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:24px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#333;margin-bottom:16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;line-height:1.5;margin-bottom:24px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]{padding:16px 20px;background:#f8f9fa;border-radius:8px;border-left:4px solid #007bff}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#495057;font-size:14px}@media (max-width: 768px){.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:24px 16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:12px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]{padding:12px 16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}"]})};function Zr(r,t){if(r&1){let e=w();a(0,"div",13),h("click",function(){let i=m(e).$implicit,o=d(2);return u(o.onShapeClick(i))}),a(1,"div",14),g(2),s(),a(3,"span",15),g(4),s()()}if(r&2){let e=t.$implicit,n=d(2);T("selected",(n.selectedShape==null?null:n.selectedShape.id)===e.id),p("title",e.name+" \uADF8\uB9AC\uAE30"),c(),J("color",e.color),c(),j(" ",e.icon," "),c(2),F(e.name)}}function ea(r,t){if(r&1&&(a(0,"div",16)(1,"h4"),g(2),s(),a(3,"div",17)(4,"label"),g(5,"\uC120 \uB450\uAED8:"),s(),C(6,"input",18),s(),a(7,"div",17)(8,"label"),g(9,"\uC0C9\uC0C1:"),s(),a(10,"div",19),C(11,"div",20)(12,"div",21)(13,"div",22)(14,"div",23)(15,"div",24)(16,"div",25),s()(),a(17,"div",17)(18,"label"),C(19,"input",26),g(20," \uCC44\uC6B0\uAE30 "),s()()()),r&2){let e=d(2);c(2),j("",e.selectedShape.name," \uC635\uC158")}}function ta(r,t){if(r&1){let e=w();a(0,"div",1),h("click",function(i){m(e);let o=d();return u(o.onBackdropClick(i))}),a(1,"div",2)(2,"div",3)(3,"h3"),g(4,"\uB3C4\uD615 \uADF8\uB9AC\uAE30"),s(),a(5,"button",4),h("click",function(){m(e);let i=d();return u(i.onClose())}),z(),a(6,"svg",5),C(7,"path",6),s()()(),me(),a(8,"div",7)(9,"div",8),b(10,Zr,5,7,"div",9),s(),b(11,ea,21,1,"div",10),s(),a(12,"div",11)(13,"p",12),g(14,"\uC6D0\uD558\uB294 \uB3C4\uD615\uC744 \uC120\uD0DD\uD55C \uD6C4 PDF \uD398\uC774\uC9C0\uC5D0\uC11C \uB4DC\uB798\uADF8\uD558\uC5EC \uADF8\uB9AC\uC138\uC694."),s()()()()}if(r&2){let e=d();c(10),p("ngForOf",e.shapes),c(),p("ngIf",e.selectedShape)}}var St=class r{isVisible=!1;close=new O;shapeSelected=new O;shapes=[{id:"rectangle",type:"rectangle",name:"\uC0AC\uAC01\uD615",icon:"\u25A1",color:"#007acc"},{id:"circle",type:"circle",name:"\uC6D0\uD615",icon:"\u25CB",color:"#28a745"},{id:"triangle",type:"triangle",name:"\uC0BC\uAC01\uD615",icon:"\u25B3",color:"#dc3545"},{id:"line",type:"line",name:"\uC9C1\uC120",icon:"\u2015",color:"#6c757d"},{id:"arrow",type:"arrow",name:"\uD654\uC0B4\uD45C",icon:"\u2192",color:"#fd7e14"},{id:"polygon",type:"polygon",name:"\uB2E4\uAC01\uD615",icon:"\u2B1F",color:"#6f42c1"}];selectedShape=null;onShapeClick(t){this.selectedShape=t,this.shapeSelected.emit(t)}onClose(){this.close.emit()}onBackdropClick(t){t.target===t.currentTarget&&this.onClose()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-geometry-drawing"]],inputs:{isVisible:"isVisible"},outputs:{close:"close",shapeSelected:"shapeSelected"},standalone:!1,decls:1,vars:1,consts:[["class","geometry-drawing-overlay",3,"click",4,"ngIf"],[1,"geometry-drawing-overlay",3,"click"],[1,"geometry-panel"],[1,"panel-header"],["title","\uB2EB\uAE30",1,"close-btn",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"panel-content"],[1,"shapes-grid"],["class","shape-item",3,"selected","title","click",4,"ngFor","ngForOf"],["class","drawing-options",4,"ngIf"],[1,"panel-footer"],[1,"help-text"],[1,"shape-item",3,"click","title"],[1,"shape-icon"],[1,"shape-name"],[1,"drawing-options"],[1,"option-group"],["type","range","min","1","max","10","value","2",1,"thickness-slider"],[1,"color-palette"],[1,"color-option",2,"background-color","#007acc"],[1,"color-option",2,"background-color","#28a745"],[1,"color-option",2,"background-color","#dc3545"],[1,"color-option",2,"background-color","#ffc107"],[1,"color-option",2,"background-color","#6c757d"],[1,"color-option",2,"background-color","#000000"],["type","checkbox","checked",""]],template:function(e,n){e&1&&b(0,ta,15,2,"div",0),e&2&&p("ngIf",n.isVisible)},dependencies:[Q,Y],styles:[".geometry-drawing-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.geometry-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000004d;min-width:400px;max-width:500px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0;background-color:#f8f9fa}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:4px;cursor:pointer;border-radius:4px;color:#666;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{background-color:#e0e0e0;color:#333}.panel-content[_ngcontent-%COMP%]{padding:20px;flex:1;overflow-y:auto}.shapes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:24px}.shape-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px 8px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s ease;background-color:#fff}.shape-item[_ngcontent-%COMP%]:hover{border-color:#007acc;background-color:#f8f9ff;transform:translateY(-2px);box-shadow:0 4px 12px #007acc26}.shape-item.selected[_ngcontent-%COMP%]{border-color:#007acc;background-color:#e7f3ff;box-shadow:0 0 0 2px #007acc33}.shape-icon[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:8px;height:32px;display:flex;align-items:center;justify-content:center}.shape-name[_ngcontent-%COMP%]{font-size:12px;color:#555;text-align:center;font-weight:500}.drawing-options[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:20px}.drawing-options[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#333;font-weight:600}.option-group[_ngcontent-%COMP%]{margin-bottom:16px}.option-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;color:#555;font-weight:500}.thickness-slider[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:#e0e0e0;outline:none;appearance:none}.thickness-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:#007acc;cursor:pointer;border:2px solid white;box-shadow:0 2px 4px #0003}.thickness-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#007acc;cursor:pointer;border:2px solid white;box-shadow:0 2px 4px #0003}.color-palette[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.color-option[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;cursor:pointer;border:2px solid #e0e0e0;transition:all .2s ease}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1);border-color:#007acc}.panel-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #e0e0e0;background-color:#f8f9fa}.help-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666;text-align:center;line-height:1.4}"]})};function ia(r,t){if(r&1){let e=w();a(0,"div",5)(1,"div",6)(2,"h3"),g(3,"\uD14D\uC2A4\uD2B8 \uD3B8\uC9D1 \uBAA8\uB4DC"),s(),a(4,"p"),g(5,"\uB354\uBE14\uD074\uB9AD\uD558\uC5EC \uD14D\uC2A4\uD2B8\uB97C \uCD94\uAC00\uD558\uC138\uC694"),s(),a(6,"button",7),h("click",function(){m(e);let i=d(2);return u(i.close.emit())}),g(7,"\uB2EB\uAE30"),s()()()}}function oa(r,t){if(r&1){let e=w();a(0,"div",15)(1,"div",16),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"nw"))}),s(),a(2,"div",17),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"ne"))}),s(),a(3,"div",18),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"sw"))}),s(),a(4,"div",19),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"se"))}),s(),a(5,"div",20),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"n"))}),s(),a(6,"div",21),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"s"))}),s(),a(7,"div",22),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"w"))}),s(),a(8,"div",23),h("mousedown",function(i){m(e);let o=d().$implicit,l=d(2);return u(l.onResizeStart(i,o,"e"))}),s()()}}function ra(r,t){if(r&1){let e=w();a(0,"div",24),h("click",function(){m(e);let i=d(3);return u(i.close.emit())}),g(1," \xD7 "),s()}}function aa(r,t){if(r&1){let e=w();a(0,"div",25),h("click",function(){m(e);let i=d().$implicit,o=d(2);return u(o.applySingleEditor(i))}),z(),a(1,"svg",26),C(2,"path",27)(3,"circle",28),s()()}}function sa(r,t){if(r&1){let e=w();a(0,"div",8),h("mousedown",function(i){let o=m(e).$implicit,l=d(2);return u(l.onEditorMouseDown(i,o))}),a(1,"div",9),h("mousedown",function(i){let o=m(e).$implicit,l=d(2);return u(l.onDragHandleMouseDown(i,o))}),a(2,"div",10),C(3,"span")(4,"span")(5,"span")(6,"span")(7,"span")(8,"span"),s()(),a(9,"textarea",11),h("input",function(i){let o=m(e).$implicit,l=d(2);return u(l.onTextChange(i,o))})("focus",function(){let i=m(e).$implicit,o=d(2);return u(o.onEditorFocus(i))})("blur",function(){let i=m(e).$implicit,o=d(2);return u(o.onEditorBlur(i))})("mousedown",function(i){return m(e),u(i.stopPropagation())})("click",function(i){return m(e),u(i.stopPropagation())}),g(10,"    "),s(),b(11,oa,9,0,"div",12)(12,ra,2,0,"div",13)(13,aa,4,0,"div",14),s()}if(r&2){let e=t.$implicit,n=d(2);J("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px")("z-index",e.zIndex),T("selected",e.id===n.selectedEditorId),c(9),J("font-size",e.fontSize,"px")("font-family",e.fontFamily)("color",e.color)("font-weight",e.bold?"bold":"normal")("font-style",e.italic?"italic":"normal")("text-decoration",e.underline?"underline":"none")("text-align",e.textAlign),p("value",e.text),c(2),p("ngIf",e.id===n.selectedEditorId),c(),p("ngIf",e.id===n.selectedEditorId),c(),p("ngIf",e.id===n.selectedEditorId)}}function la(r,t){if(r&1){let e=w();a(0,"app-pdf-text-adder-toolbar",29),h("fontSizeChange",function(i){m(e);let o=d(2);return u(o.onToolbarFontSizeChange(i))})("fontFamilyChange",function(i){m(e);let o=d(2);return u(o.onToolbarFontFamilyChange(i))})("boldToggle",function(i){m(e);let o=d(2);return u(o.onToolbarBoldToggle(i))})("italicToggle",function(i){m(e);let o=d(2);return u(o.onToolbarItalicToggle(i))})("underlineToggle",function(i){m(e);let o=d(2);return u(o.onToolbarUnderlineToggle(i))})("textAlignChange",function(i){m(e);let o=d(2);return u(o.onToolbarTextAlignChange(i))})("colorChange",function(i){m(e);let o=d(2);return u(o.onToolbarColorChange(i))}),s()}if(r&2){let e=d(2);p("textEditor",e.selectedEditor)("position",e.toolbarPosition)}}function ca(r,t){if(r&1){let e=w();a(0,"div",1),h("mousedown",function(i){m(e);let o=d();return u(o.onOverlayMouseDown(i))}),b(1,ia,8,0,"div",2)(2,sa,14,30,"div",3)(3,la,1,2,"app-pdf-text-adder-toolbar",4),s()}if(r&2){let e=d();c(),p("ngIf",e.textEditors.length===0),c(),p("ngForOf",e.textEditors)("ngForTrackBy",e.trackByEditorId),c(),p("ngIf",e.selectedEditor)}}var Tt=class r{isVisible=!1;close=new O;editorsChanged=new O;applyTexts=new O;textEditors=[];selectedEditorId=null;selectedEditor=null;toolbarPosition={x:0,y:0};dragState={isDragging:!1,isResizing:!1,resizeDirection:"",startX:0,startY:0,startEditorX:0,startEditorY:0,startEditorWidth:0,startEditorHeight:0,currentEditor:null};nextZIndex=1001;ngOnInit(){document.addEventListener("mousemove",this.onGlobalMouseMove.bind(this)),document.addEventListener("mouseup",this.onGlobalMouseUp.bind(this)),document.addEventListener("dblclick",this.onGlobalDoubleClick.bind(this))}ngOnChanges(t){t.isVisible&&t.isVisible.currentValue===!0&&!t.isVisible.previousValue&&(this.textEditors=[],setTimeout(()=>{this.createNewEditor(window.innerWidth/2-100,window.innerHeight/2-20)},100))}ngOnDestroy(){document.removeEventListener("mousemove",this.onGlobalMouseMove.bind(this)),document.removeEventListener("mouseup",this.onGlobalMouseUp.bind(this)),document.removeEventListener("dblclick",this.onGlobalDoubleClick.bind(this))}trackByEditorId(t,e){return e.id}createNewEditor(t,e){let n={id:this.generateId(),x:t,y:e,width:200,height:40,text:"\uC0C8 \uD14D\uC2A4\uD2B8",fontSize:14,fontFamily:"Arial",color:"#000000",bold:!1,italic:!1,underline:!1,textAlign:"left",zIndex:this.nextZIndex++};this.textEditors.push(n),this.selectEditor(n),this.emitEditorsChanged()}onOverlayMouseDown(t){t.target===t.currentTarget&&this.deselectAllEditors()}onGlobalDoubleClick(t){if(!this.isVisible)return;let e=t.target;if(e&&e.closest(".pdf-text-editor-overlay")&&!e.closest(".text-editor-instance")&&!e.closest(".toolbar")){let n=e.closest(".pdf-text-editor-overlay").getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top;this.createNewEditor(i,o),t.preventDefault(),t.stopPropagation()}}onEditorMouseDown(t,e){let n=t.target;if(n.tagName==="TEXTAREA"||n.classList.contains("text-input-area")){this.selectEditor(e);return}this.selectEditor(e),t.preventDefault(),t.stopPropagation()}onDragHandleMouseDown(t,e){this.selectEditor(e),this.dragState.isDragging=!0,this.dragState.startX=t.clientX,this.dragState.startY=t.clientY,this.dragState.startEditorX=e.x,this.dragState.startEditorY=e.y,this.dragState.currentEditor=e,t.preventDefault(),t.stopPropagation()}onResizeStart(t,e,n){this.dragState.isResizing=!0,this.dragState.resizeDirection=n,this.dragState.startX=t.clientX,this.dragState.startY=t.clientY,this.dragState.startEditorX=e.x,this.dragState.startEditorY=e.y,this.dragState.startEditorWidth=e.width,this.dragState.startEditorHeight=e.height,this.dragState.currentEditor=e,t.preventDefault(),t.stopPropagation()}onGlobalMouseMove(t){if(!this.dragState.currentEditor)return;let e=t.clientX-this.dragState.startX,n=t.clientY-this.dragState.startY;this.dragState.isDragging&&!this.dragState.isResizing?(this.dragState.currentEditor.x=Math.max(0,this.dragState.startEditorX+e),this.dragState.currentEditor.y=Math.max(0,this.dragState.startEditorY+n),this.updateToolbarPosition()):this.dragState.isResizing&&(this.handleResize(e,n),this.updateToolbarPosition())}onGlobalMouseUp(t){(this.dragState.isDragging||this.dragState.isResizing)&&this.emitEditorsChanged(),this.dragState.isDragging=!1,this.dragState.isResizing=!1,this.dragState.currentEditor=null}handleResize(t,e){if(!this.dragState.currentEditor)return;let n=this.dragState.currentEditor,i=this.dragState.resizeDirection,o=50,l=20;switch(i){case"se":n.width=Math.max(o,this.dragState.startEditorWidth+t),n.height=Math.max(l,this.dragState.startEditorHeight+e);break;case"sw":let f=this.dragState.startEditorWidth-t;f>=o&&(n.x=this.dragState.startEditorX+t,n.width=f),n.height=Math.max(l,this.dragState.startEditorHeight+e);break;case"ne":let _=this.dragState.startEditorHeight-e;_>=l&&(n.y=this.dragState.startEditorY+e,n.height=_),n.width=Math.max(o,this.dragState.startEditorWidth+t);break;case"nw":let x=this.dragState.startEditorWidth-t,P=this.dragState.startEditorHeight-e;x>=o&&(n.x=this.dragState.startEditorX+t,n.width=x),P>=l&&(n.y=this.dragState.startEditorY+e,n.height=P);break;case"n":let M=this.dragState.startEditorHeight-e;M>=l&&(n.y=this.dragState.startEditorY+e,n.height=M);break;case"s":n.height=Math.max(l,this.dragState.startEditorHeight+e);break;case"w":let v=this.dragState.startEditorWidth-t;v>=o&&(n.x=this.dragState.startEditorX+t,n.width=v);break;case"e":n.width=Math.max(o,this.dragState.startEditorWidth+t);break}}onEditorFocus(t){this.selectEditor(t)}onEditorBlur(t){}onTextChange(t,e){let n=t.target;e.text=n.value,this.autoResizeTextarea(n,e),this.emitEditorsChanged()}autoResizeTextarea(t,e){t.style.height="auto";let n=t.scrollHeight,i=Math.max(30,Math.min(200,n));e.height=i,t.style.height=i+"px"}selectEditor(t){this.selectedEditorId=t.id,this.selectedEditor=t,t.zIndex=this.nextZIndex++,this.updateToolbarPosition()}deselectAllEditors(){this.selectedEditorId=null,this.selectedEditor=null}deleteEditor(t){this.textEditors=this.textEditors.filter(e=>e.id!==t),this.selectedEditorId===t&&this.deselectAllEditors(),this.emitEditorsChanged()}updateToolbarPosition(){this.selectedEditor&&(this.toolbarPosition.x=this.selectedEditor.x,this.toolbarPosition.y=Math.max(0,this.selectedEditor.y-50))}updateFontSize(t,e){let n=t.target;e.fontSize=parseInt(n.value)||14,this.emitEditorsChanged()}updateFontFamily(t,e){let n=t.target;e.fontFamily=n.value,this.emitEditorsChanged()}updateColor(t,e){let n=t.target;e.color=n.value,this.emitEditorsChanged()}toggleBold(t){t.bold=!t.bold,this.emitEditorsChanged()}toggleItalic(t){t.italic=!t.italic,this.emitEditorsChanged()}toggleUnderline(t){t.underline=!t.underline,this.emitEditorsChanged()}setTextAlign(t,e){t.textAlign=e,this.emitEditorsChanged()}onToolbarFontSizeChange(t){t.editor.fontSize=t.fontSize,this.emitEditorsChanged()}onToolbarFontFamilyChange(t){t.editor.fontFamily=t.fontFamily,this.emitEditorsChanged()}onToolbarBoldToggle(t){t.bold=!t.bold,this.emitEditorsChanged()}onToolbarItalicToggle(t){t.italic=!t.italic,this.emitEditorsChanged()}onToolbarUnderlineToggle(t){t.underline=!t.underline,this.emitEditorsChanged()}onToolbarTextAlignChange(t){t.editor.textAlign=t.align,this.emitEditorsChanged()}onToolbarColorChange(t){t.editor.color=t.color,this.emitEditorsChanged()}generateId(){return"editor_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36)}emitEditorsChanged(){this.editorsChanged.emit([...this.textEditors])}applyToDocument(){this.textEditors.length>0&&(this.applyTexts.emit([...this.textEditors]),this.textEditors=[],this.selectedEditorId=null,this.selectedEditor=null,this.close.emit())}applySingleEditor(t){this.applyTexts.emit([t]),this.deleteEditor(t.id)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-pdf-text-adder"]],inputs:{isVisible:"isVisible"},outputs:{close:"close",editorsChanged:"editorsChanged",applyTexts:"applyTexts"},standalone:!1,features:[ne],decls:1,vars:1,consts:[["class","pdf-text-editor-overlay",3,"mousedown",4,"ngIf"],[1,"pdf-text-editor-overlay",3,"mousedown"],["class","instruction-message",4,"ngIf"],["class","text-editor-instance",3,"left","top","width","height","z-index","selected","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],["cssClass","floating",3,"textEditor","position","fontSizeChange","fontFamilyChange","boldToggle","italicToggle","underlineToggle","textAlignChange","colorChange",4,"ngIf"],[1,"instruction-message"],[1,"instruction-content"],[1,"close-btn",3,"click"],[1,"text-editor-instance",3,"mousedown"],["title","\uB4DC\uB798\uADF8\uD558\uC5EC \uC774\uB3D9",1,"drag-handle",3,"mousedown"],[1,"drag-dots"],["placeholder","\uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uC138\uC694",1,"text-input-area",3,"input","focus","blur","mousedown","click","value"],["class","resize-handles",4,"ngIf"],["class","delete-button","title","\uB2EB\uAE30",3,"click",4,"ngIf"],["class","apply-button","title","PDF\uC5D0 \uC801\uC6A9",3,"click",4,"ngIf"],[1,"resize-handles"],[1,"resize-handle","nw",3,"mousedown"],[1,"resize-handle","ne",3,"mousedown"],[1,"resize-handle","sw",3,"mousedown"],[1,"resize-handle","se",3,"mousedown"],[1,"resize-handle","n",3,"mousedown"],[1,"resize-handle","s",3,"mousedown"],[1,"resize-handle","w",3,"mousedown"],[1,"resize-handle","e",3,"mousedown"],["title","\uB2EB\uAE30",1,"delete-button",3,"click"],["title","PDF\uC5D0 \uC801\uC6A9",1,"apply-button",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["cssClass","floating",3,"fontSizeChange","fontFamilyChange","boldToggle","italicToggle","underlineToggle","textAlignChange","colorChange","textEditor","position"]],template:function(e,n){e&1&&b(0,ca,4,4,"div",0),e&2&&p("ngIf",n.isVisible)},dependencies:[Q,Y,He],styles:['@charset "UTF-8";.pdf-text-editor-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:auto;z-index:1000;background:#0000001a}.instruction-message[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:30px;border-radius:8px;box-shadow:0 4px 12px #0000004d;text-align:center;z-index:1001}.instruction-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333;font-size:20px}.instruction-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#666;font-size:14px}.instruction-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#007acc;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.instruction-content[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#005a9e}.text-editor-instance[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;border:2px solid transparent;min-width:100px;min-height:30px}.text-editor-instance.selected[_ngcontent-%COMP%]{border-color:#007acc;box-shadow:0 0 0 1px #007acc4d}.text-editor-instance[_ngcontent-%COMP%]:hover:not(.selected){border-color:#007acc80}.drag-handle[_ngcontent-%COMP%]{position:absolute;top:0;left:-20px;width:15px;height:100%;background:#007acc;border-radius:8px 0 0 8px;cursor:move;display:flex;align-items:center;justify-content:center;opacity:.8;transition:opacity .2s}.drag-handle[_ngcontent-%COMP%]:hover{opacity:1}.drag-dots[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);gap:2px;width:8px;height:12px}.drag-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:2px;height:2px;background:#fff;border-radius:50%}.text-input-area[_ngcontent-%COMP%]{width:100%;height:100%;padding:4px 8px;background:#ffffffe6;border:none;outline:none;resize:none;overflow:hidden;word-wrap:break-word;cursor:text;margin-left:0;font-family:inherit}.text-input-area[_ngcontent-%COMP%]:focus{background:#fffffff2;outline:1px solid #007acc}.text-input-area[_ngcontent-%COMP%]::placeholder{color:#999;font-style:italic}.resize-handles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.resize-handle[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;background:#007acc;border:1px solid #fff}.resize-handle.nw[_ngcontent-%COMP%], .resize-handle.ne[_ngcontent-%COMP%], .resize-handle.sw[_ngcontent-%COMP%], .resize-handle.se[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.resize-handle.n[_ngcontent-%COMP%], .resize-handle.s[_ngcontent-%COMP%]{width:20px;height:6px;left:50%;transform:translate(-50%)}.resize-handle.w[_ngcontent-%COMP%], .resize-handle.e[_ngcontent-%COMP%]{width:6px;height:20px;top:50%;transform:translateY(-50%)}.resize-handle.nw[_ngcontent-%COMP%]{top:-4px;left:-4px;cursor:nw-resize}.resize-handle.ne[_ngcontent-%COMP%]{top:-4px;right:-4px;cursor:ne-resize}.resize-handle.sw[_ngcontent-%COMP%]{bottom:-4px;left:-4px;cursor:sw-resize}.resize-handle.se[_ngcontent-%COMP%]{bottom:-4px;right:-4px;cursor:se-resize}.resize-handle.n[_ngcontent-%COMP%]{top:-3px;cursor:n-resize}.resize-handle.s[_ngcontent-%COMP%]{bottom:-3px;cursor:s-resize}.resize-handle.w[_ngcontent-%COMP%]{left:-3px;cursor:w-resize}.resize-handle.e[_ngcontent-%COMP%]{right:-3px;cursor:e-resize}.delete-button[_ngcontent-%COMP%]{position:absolute;top:-12px;right:-12px;width:24px;height:24px;background:#f44336;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;font-weight:700;z-index:10}.delete-button[_ngcontent-%COMP%]:hover{background:#d32f2f}.apply-button[_ngcontent-%COMP%]{position:absolute;top:-12px;right:15px;width:24px;height:24px;background:#4caf50;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10}.apply-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.apply-button[_ngcontent-%COMP%]:hover{background:#45a049}.toolbar[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #ddd;border-radius:4px;padding:8px;display:flex;gap:12px;align-items:center;box-shadow:0 2px 8px #00000026;z-index:1001}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:#666;white-space:nowrap}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:50px;padding:2px 4px;border:1px solid #ddd;border-radius:2px;font-size:12px}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #ddd;border-radius:2px;font-size:12px;min-width:80px}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:30px;height:24px;border:1px solid #ddd;border-radius:2px;cursor:pointer}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid #ddd;background:#fff;border-radius:2px;cursor:pointer;font-size:12px;min-width:24px}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#007acc;color:#fff;border-color:#007acc}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][_ngcontent-%COMP%]{position:relative}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\c67c\\cabd][_ngcontent-%COMP%]{text-align:left}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\ac00\\c6b4\\b370][_ngcontent-%COMP%]{text-align:center}.toolbar-group[_ngcontent-%COMP%]   button[title*=\\c815\\b82c][title*=\\c624\\b978\\cabd][_ngcontent-%COMP%]{text-align:right}']})};function pa(r,t){if(r&1){let e=w();a(0,"div",23)(1,"div",14)(2,"label"),g(3,"\uD14D\uC2A4\uD2B8"),s(),a(4,"input",24),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.watermarkConfig.text,i)||(o.watermarkConfig.text=i),u(i)}),s()(),a(5,"div",13)(6,"div",14)(7,"label"),g(8,"\uAE00\uAF34 \uD06C\uAE30"),s(),a(9,"input",25),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.watermarkConfig.fontSize,i)||(o.watermarkConfig.fontSize=i),u(i)}),s(),a(10,"span",16),g(11),s()(),a(12,"div",14)(13,"label"),g(14,"\uC0C9\uC0C1"),s(),a(15,"input",26),W("ngModelChange",function(i){m(e);let o=d(2);return H(o.watermarkConfig.color,i)||(o.watermarkConfig.color=i),u(i)}),s()()()()}if(r&2){let e=d(2);c(4),G("ngModel",e.watermarkConfig.text),c(5),G("ngModel",e.watermarkConfig.fontSize),c(2),j("",e.watermarkConfig.fontSize,"px"),c(4),G("ngModel",e.watermarkConfig.color)}}function ga(r,t){if(r&1){let e=w();a(0,"button",32),h("click",function(){m(e);let i=d(3);return u(i.removeImage())}),g(1," \uC81C\uAC70 "),s()}}function ma(r,t){if(r&1){let e=w();a(0,"div",27)(1,"div",14)(2,"label"),g(3,"\uC774\uBBF8\uC9C0 \uD30C\uC77C"),s(),a(4,"div",28)(5,"input",29),h("change",function(i){m(e);let o=d(2);return u(o.onImageFileSelected(i))}),s(),a(6,"label",30),g(7),s(),b(8,ga,2,0,"button",31),s()()()}if(r&2){let e=d(2);c(7),j(" ",e.watermarkConfig.imageFile?e.watermarkConfig.imageFile.name:"\uC774\uBBF8\uC9C0 \uC120\uD0DD"," "),c(),p("ngIf",e.watermarkConfig.imageFile)}}function ua(r,t){if(r&1&&(a(0,"option",33),g(1),s()),r&2){let e=t.$implicit;p("value",e.value),c(),j(" ",e.label," ")}}function fa(r,t){if(r&1){let e=w();a(0,"div",1),h("click",function(){m(e);let i=d();return u(i.close())}),a(1,"div",2),h("click",function(i){return m(e),u(i.stopPropagation())}),a(2,"div",3)(3,"h3"),g(4,"\uC6CC\uD130\uB9C8\uD06C \uCD94\uAC00"),s(),a(5,"button",4),h("click",function(){m(e);let i=d();return u(i.close())}),C(6,"img",5),s()(),a(7,"div",6)(8,"div",7)(9,"label",8)(10,"input",9),h("change",function(){m(e);let i=d();return u(i.watermarkConfig.isImage=!1)}),s(),a(11,"span"),g(12,"\uD14D\uC2A4\uD2B8 \uC6CC\uD130\uB9C8\uD06C"),s()(),a(13,"label",8)(14,"input",9),h("change",function(){m(e);let i=d();return u(i.watermarkConfig.isImage=!0)}),s(),a(15,"span"),g(16,"\uC774\uBBF8\uC9C0 \uC6CC\uD130\uB9C8\uD06C"),s()()(),b(17,pa,16,4,"div",10)(18,ma,9,2,"div",11),a(19,"div",12)(20,"div",13)(21,"div",14)(22,"label"),g(23,"\uD22C\uBA85\uB3C4"),s(),a(24,"input",15),W("ngModelChange",function(i){m(e);let o=d();return H(o.watermarkConfig.opacity,i)||(o.watermarkConfig.opacity=i),u(i)}),s(),a(25,"span",16),g(26),it(27,"number"),s()(),a(28,"div",14)(29,"label"),g(30,"\uD68C\uC804\uAC01\uB3C4"),s(),a(31,"input",17),W("ngModelChange",function(i){m(e);let o=d();return H(o.watermarkConfig.rotation,i)||(o.watermarkConfig.rotation=i),u(i)}),s(),a(32,"span",16),g(33),s()()(),a(34,"div",14)(35,"label"),g(36,"\uC704\uCE58"),s(),a(37,"select",18),W("ngModelChange",function(i){m(e);let o=d();return H(o.watermarkConfig.position,i)||(o.watermarkConfig.position=i),u(i)}),b(38,ua,2,2,"option",19),s()()()(),a(39,"div",20)(40,"button",21),h("click",function(){m(e);let i=d();return u(i.close())}),g(41,"\uCDE8\uC18C"),s(),a(42,"button",22),h("click",function(){m(e);let i=d();return u(i.applyWatermark())}),g(43,"\uC801\uC6A9"),s()()()()}if(r&2){let e=d();c(10),p("checked",!e.watermarkConfig.isImage),c(4),p("checked",e.watermarkConfig.isImage),c(3),p("ngIf",!e.watermarkConfig.isImage),c(),p("ngIf",e.watermarkConfig.isImage),c(6),G("ngModel",e.watermarkConfig.opacity),c(2),j("",jt(27,10,e.watermarkConfig.opacity*100,"1.0-0"),"%"),c(5),G("ngModel",e.watermarkConfig.rotation),c(2),j("",e.watermarkConfig.rotation,"\xB0"),c(4),G("ngModel",e.watermarkConfig.position),c(),p("ngForOf",e.positionOptions)}}var kt=class r{visible=!1;visibleChange=new O;watermarkApplied=new O;watermarkConfig={text:"\uC6CC\uD130\uB9C8\uD06C",fontSize:48,opacity:.5,rotation:45,color:"#808080",position:"center",isImage:!1};positionOptions=[{value:"center",label:"\uC911\uC559"},{value:"top-left",label:"\uC88C\uC0C1\uB2E8"},{value:"top-right",label:"\uC6B0\uC0C1\uB2E8"},{value:"bottom-left",label:"\uC88C\uD558\uB2E8"},{value:"bottom-right",label:"\uC6B0\uD558\uB2E8"}];close(){this.visible=!1,this.visibleChange.emit(!1)}onImageFileSelected(t){let e=t.target.files[0];e&&e.type.startsWith("image/")&&(this.watermarkConfig.imageFile=e,this.watermarkConfig.isImage=!0)}removeImage(){this.watermarkConfig.imageFile=void 0,this.watermarkConfig.isImage=!1}applyWatermark(){if(!this.watermarkConfig.isImage&&!this.watermarkConfig.text.trim()){alert("\uC6CC\uD130\uB9C8\uD06C \uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uAC70\uB098 \uC774\uBBF8\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}this.watermarkApplied.emit(le({},this.watermarkConfig)),this.close()}toggleWatermarkType(){this.watermarkConfig.isImage=!this.watermarkConfig.isImage,this.watermarkConfig.isImage&&(this.watermarkConfig.imageFile=void 0)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-watermark-adder"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange",watermarkApplied:"watermarkApplied"},standalone:!1,decls:1,vars:1,consts:[["class","watermark-modal",3,"click",4,"ngIf"],[1,"watermark-modal",3,"click"],[1,"watermark-content",3,"click"],[1,"watermark-header"],[1,"close-btn",3,"click"],["src","./images/ico-close@3x.png","alt","\uB2EB\uAE30","width","16","height","16"],[1,"watermark-body"],[1,"watermark-type"],[1,"radio-item"],["type","radio","name","watermarkType",3,"change","checked"],["class","text-watermark",4,"ngIf"],["class","image-watermark",4,"ngIf"],[1,"common-settings"],[1,"form-row"],[1,"form-group"],["type","range","min","0.1","max","1","step","0.1",1,"range-input",3,"ngModelChange","ngModel"],[1,"range-value"],["type","range","min","-90","max","90",1,"range-input",3,"ngModelChange","ngModel"],[1,"select-input",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"watermark-footer"],[1,"cancel-btn",3,"click"],[1,"apply-btn",3,"click"],[1,"text-watermark"],["type","text","placeholder","\uC6CC\uD130\uB9C8\uD06C \uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uC138\uC694",1,"text-input",3,"ngModelChange","ngModel"],["type","range","min","12","max","100",1,"range-input",3,"ngModelChange","ngModel"],["type","color",1,"color-input",3,"ngModelChange","ngModel"],[1,"image-watermark"],[1,"file-input-wrapper"],["type","file","accept","image/*","id","watermark-image",1,"file-input",3,"change"],["for","watermark-image",1,"file-input-label"],["class","remove-btn",3,"click",4,"ngIf"],[1,"remove-btn",3,"click"],[3,"value"]],template:function(e,n){e&1&&b(0,fa,44,13,"div",0),e&2&&p("ngIf",n.visible)},dependencies:[Q,Y,ve,we,ue,je,Pe,fe,he,Wt],styles:[".watermark-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.watermark-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:500px;max-width:90vw;max-height:90vh;overflow-y:auto;box-shadow:0 4px 20px #00000026}.watermark-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0}.watermark-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.watermark-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;border-radius:4px}.watermark-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.watermark-body[_ngcontent-%COMP%]{padding:24px}.watermark-type[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:24px}.watermark-type[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px}.watermark-type[_ngcontent-%COMP%]   .radio-item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:14px;font-weight:500;color:#333}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.text-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.text-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc;box-shadow:0 0 0 2px #007acc33}.help-text[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:12px;color:#666;font-style:italic}.range-input[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.range-value[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:500}.color-input[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #ddd;border-radius:4px;cursor:pointer}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:2px}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:2px}.file-input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.file-input-wrapper[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.file-input-wrapper[_ngcontent-%COMP%]   .file-input-label[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:4px;background-color:#f9f9f9;cursor:pointer;font-size:14px;color:#666;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.file-input-wrapper[_ngcontent-%COMP%]   .file-input-label[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.file-input-wrapper[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{padding:8px 12px;background-color:#f44;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px}.file-input-wrapper[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background-color:#c33}.select-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;background-color:#fff}.select-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc;box-shadow:0 0 0 2px #007acc33}.watermark-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid #e0e0e0}.watermark-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s}.watermark-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#666}.watermark-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.watermark-footer[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{background-color:#007acc;color:#fff}.watermark-footer[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{background-color:#005a9f}"]})};var _a=["tabBar"],xa=()=>[];function Ca(r,t){if(r&1){let e=w();a(0,"app-vertical-menu",20),h("menuAction",function(i){m(e);let o=d();return u(o.onMenuAction(i))}),s()}if(r&2){let e=d();p("sidebarVisible",e.sidebarVisible)("propertiesVisible",e.propertiesVisible)("aiTranslateVisible",e.aiTranslateVisible)("aiFeaturesVisible",e.aiFeaturesVisible)}}function ba(r,t){if(r&1){let e=w();a(0,"div",24)(1,"app-viewer",25),h("viewerInfoChange",function(i){m(e);let o=d(2);return u(o.updatePdfViewerInfo(i.scale,i.offsetX,i.offsetY))})("viewerScroll",function(i){m(e);let o=d(2);return u(o.onPdfViewerScroll(i))})("sentenceEditorsChange",function(i){m(e);let o=d(2);return u(o.onSentenceEditorsChange(i))}),s(),a(2,"app-pen-drawing",26),h("drawingModeChange",function(){m(e);let i=d(2);return u(i.penDrawingVisible=!1)})("drawingApplied",function(){m(e);let i=d(2);return u(i.onPenDrawingApplied())})("strokeCompleted",function(i){m(e);let o=d(2);return u(o.onStrokeCompleted(i))}),s()()}if(r&2){let e=d(2);c(),p("currentPage",e.currentPage)("zoomLevel",e.zoomLevel)("pdfSrc",e.pdfSrc)("fileName",e.currentFileName)("sentenceGroups",e.sentenceGroups),c(),p("visible",!0)("isDrawingMode",e.penDrawingVisible)("pdfSrc",e.pdfSrc)}}function va(r,t){if(r&1){let e=w();a(0,"app-page-reorder",27),h("close",function(){m(e);let i=d(2);return u(i.closePageReorderPanel())})("pageOrderChanged",function(i){m(e);let o=d(2);return u(o.onPageReorderComplete(i))})("deletePages",function(i){m(e);let o=d(2);return u(o.onDeletePages(i))})("confirmDelete",function(i){m(e);let o=d(2);return u(o.onConfirmDelete(i))}),s()}if(r&2){let e=d(2);p("isVisible",e.pageReorderVisible)("currentPageCount",e.totalPages)("pdfSrc",e.pdfSrc)}}function wa(r,t){r&1&&C(0,"app-file-conversion")}function Pa(r,t){r&1&&C(0,"app-under-development",28)}function Ma(r,t){if(r&1&&(I(0),b(1,ba,3,8,"div",21)(2,va,1,3,"app-page-reorder",22)(3,wa,1,0,"app-file-conversion",9)(4,Pa,1,0,"app-under-development",23),A()),r&2){let e=d();c(),p("ngIf",!e.pageReorderVisible&&!e.fileConversionVisible&&!e.securityVisible),c(),p("ngIf",e.pageReorderVisible),c(),p("ngIf",e.fileConversionVisible),c(),p("ngIf",e.securityVisible)}}function ya(r,t){if(r&1){let e=w();I(0),a(1,"app-vertical-menu",29),h("menuAction",function(i){m(e);let o=d();return u(o.onMenuAction(i))}),s(),A()}if(r&2){let e=d();c(),p("sidebarVisible",e.sidebarVisible)("propertiesVisible",e.propertiesVisible)("aiTranslateVisible",e.aiTranslateVisible)("aiFeaturesVisible",e.aiFeaturesVisible)("pdfContentVisible",e.pdfContentVisible)}}function Ea(r,t){r&1&&(a(0,"div",46)(1,"div",47),z(),a(2,"svg",48),C(3,"rect",49)(4,"path",41),s(),me(),a(5,"p"),g(6,"PDF \uD30C\uC77C\uC744 \uC5EC\uAE30\uC5D0 \uB4DC\uB86D\uD558\uC138\uC694"),s()()())}function Oa(r,t){if(r&1){let e=w();a(0,"div",30),h("dragover",function(i){m(e);let o=d();return u(o.onDragOver(i))})("dragenter",function(i){m(e);let o=d();return u(o.onDragEnter(i))})("dragleave",function(i){m(e);let o=d();return u(o.onDragLeave(i))})("drop",function(i){m(e);let o=d();return u(o.onDrop(i))}),b(1,Ea,7,0,"div",31),a(2,"div",32)(3,"div",33)(4,"div",34),h("click",function(){m(e);let i=Be(22);return u(i.click())}),z(),a(5,"svg",35),C(6,"path",36),s(),me(),a(7,"h3"),g(8,"PDF \uD30C\uC77C\uC744 \uB4DC\uB798\uADF8\uD558\uAC70\uB098"),C(9,"br"),g(10,"\uD074\uB9AD\uD574\uC11C \uC5C5\uB85C\uB4DC\uD558\uC138\uC694"),s(),a(11,"button",37)(12,"span",38),z(),a(13,"svg",39),C(14,"rect",40)(15,"path",41),s()(),g(16," \uD30C\uC77C \uC5F4\uAE30 "),s(),me(),a(17,"p",42),g(18,"\uC9C0\uC6D0 \uD615\uC2DD: PDF \uD30C\uC77C\uB9CC \uAC00\uB2A5"),s()()(),a(19,"div",43)(20,"app-recent-files",44),h("deleteFile",function(i){m(e);let o=d();return u(o.onDeleteRecentFile(i))})("openFile",function(i){m(e);let o=d();return u(o.onOpenRecentFile(i))}),s()()(),a(21,"input",45,2),h("change",function(i){m(e);let o=d();return u(o.onFileSelected(i))}),s()()}if(r&2){let e=d();T("drag-over",e.isDragOver),c(),p("ngIf",e.isDragOver),c(19),p("files",e.recentFiles)}}function Sa(r,t){if(r&1){let e=w();a(0,"div",50),h("click",function(){m(e);let i=d();return u(i.closeConfirmModal())}),a(1,"div",51),h("click",function(i){return m(e),u(i.stopPropagation())}),a(2,"div",52)(3,"h3"),g(4),s()(),a(5,"div",53)(6,"p"),g(7),s()(),a(8,"div",54)(9,"button",55),h("click",function(){m(e);let i=d();return u(i.closeConfirmModal())}),g(10,"\uCDE8\uC18C"),s(),a(11,"button",56),h("click",function(){m(e);let i=d();return u(i.confirmModalAction())}),g(12,"\uD655\uC778"),s()()()()}if(r&2){let e=d();c(4),F(e.confirmModalTitle),c(3),F(e.confirmModalMessage)}}var Dt=class r{constructor(t,e,n,i,o,l,f,_){this.textEditorService=t;this.pdfTextStreamService=e;this.pdfTextStreamModifierService=n;this.pdfPageDeleterService=i;this.fileManagerService=o;this.pdfModificationService=l;this.watermarkService=f;this.penDrawingService=_}onOpenRecentFile(t){this.onFileSelected(t)}recentFiles=[];ngOnInit(){this.loadRecentFiles(),document.addEventListener("save-textstream-modified",t=>{this.handleTextStreamModifiedSave(t.detail)}),document.addEventListener("clear-text-editors",()=>{this.clearAllTextEditors()}),window.addEventListener("pdf-updated",t=>{let e=t;console.log("\u{1F4C4} PDF \uC5C5\uB370\uC774\uD2B8 \uC774\uBCA4\uD2B8 \uC218\uC2E0:",e.detail.newUrl),this.updatePdfSrc(e.detail.newUrl)}),this.setupGlobalDragAndDrop()}setupGlobalDragAndDrop(){document.addEventListener("dragover",t=>{t.preventDefault()},!1),document.addEventListener("drop",t=>{t.preventDefault()},!1),document.addEventListener("dragenter",t=>{t.preventDefault(),t.dataTransfer?.types.includes("Files")&&!this.pdfSrc&&(this.isDragOver=!0)},!1),document.addEventListener("dragleave",t=>{t.preventDefault(),document.elementFromPoint(t.clientX,t.clientY)||(this.isDragOver=!1)},!1)}loadRecentFiles(){this.fileManagerService.recentFiles$.subscribe(t=>{this.recentFiles=t.map(e=>({name:e.name,lastModified:e.date,size:e.size}))})}tabBarComponent;viewerComponent;title="ezReader";sidebarVisible=!0;propertiesVisible=!1;aiTranslateVisible=!1;aiFeaturesVisible=!1;pdfContentVisible=!1;pageReorderVisible=!1;fileConversionVisible=!1;securityVisible=!1;geometryDrawingVisible=!1;textEditorVisible=!1;imageInserterVisible=!1;watermarkAdderVisible=!1;penDrawingVisible=!1;currentPage=1;totalPages=0;zoomLevel=100;pdfSrc=null;currentFileName="";currentPdfBlob=null;currentActiveMenu="\uD648";currentFile=null;searchQuery="";pdfTextStreamData=null;pageSize="A4";extractedText="";documentMetadata=[];bookmarks=[];isDragOver=!1;dragCounter=0;sentenceGroups=[];sentenceTextEditors=[];textEditorInstances=[];pdfTextEditors=[];pdfViewerScale=1;saveMode="overlay";snackbarVisible=!1;snackbarMessage="";confirmModalVisible=!1;confirmModalTitle="";confirmModalMessage="";confirmModalCallback=null;pdfViewerOffsetX=0;pdfViewerOffsetY=0;pdfScrollLeft=0;pdfScrollTop=0;onTabChanged(t){this.pdfSrc=t.pdfSrc,this.currentFileName=t.fileName}onFileSelected(t){return S(this,null,function*(){let e=null;if(t instanceof File?e=t:t&&t.target&&t.target.files&&t.target.files.length>0&&(e=t.target.files[0]),!!e)try{let n=URL.createObjectURL(e);this.pdfSrc=n,this.currentFileName=e.name,this.currentFile=e,this.currentPdfBlob=e,console.log("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC2DC\uC791...");try{this.pdfTextStreamData=yield this.pdfTextStreamService.extractTextStreamAsJson(e),this.updatePdfInfo(),console.log("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC644\uB8CC")}catch(i){console.warn("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uCD94\uCD9C \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:",i),this.setDefaultPdfInfo(e)}this.fileManagerService.addRecentFile(e.name,n,this.fileManagerService.formatFileSize(e.size)),this.tabBarComponent&&this.tabBarComponent.setActiveTabPdf(e.name,n),console.log("PDF \uD30C\uC77C \uB85C\uB4DC \uC644\uB8CC:",e.name)}catch(n){console.error("PDF \uD30C\uC77C \uB85C\uB4DC \uC2E4\uD328:",n),this.showSnackbar("PDF \uD30C\uC77C\uC744 \uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}onDeleteRecentFile(t){let e={name:t.name,date:t.lastModified,size:t.size,data:""};this.fileManagerService.deleteRecentFile(e)}formatFileSize(t){return this.fileManagerService.formatFileSize(t)}onSearchChange(t){this.searchQuery=t,setTimeout(()=>{let e=document.querySelector("ngx-extended-pdf-viewer");if(e){let n=e.querySelector(".toolbarButton.find");n&&(n.click(),setTimeout(()=>n.click(),10));let i=e.querySelector('input[aria-label="Find"]')||e.querySelector('input[type="search"]')||e.querySelector(".toolbarField:not(.pageNumber)");if(i){i.value=t,i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0}));let o=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",bubbles:!0});i.dispatchEvent(o)}}},200),console.log("Search query changed:",t)}onThumbnailClick(t){this.currentPage=t.pageNumber,this.updateCurrentPageText(),console.log("Page changed to:",this.currentPage)}onSidebarClose(){this.sidebarVisible=!1}onPropertiesClose(){this.propertiesVisible=!1}onAiTranslateClose(){this.aiTranslateVisible=!1}onTranslationCompleted(t){console.log("\uBC88\uC5ED \uC644\uB8CC \uACB0\uACFC:",t);let e=t.filter(n=>n.success).length;console.log(`\uCD1D ${t.length}\uAC1C \uC911 ${e}\uAC1C \uBC88\uC5ED \uC131\uACF5`),e>0?console.log("\uBC88\uC5ED\uC774 \uC131\uACF5\uC801\uC73C\uB85C \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."):console.error("\uBAA8\uB4E0 \uBC88\uC5ED\uC774 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}onAiFeaturesClose(){this.aiFeaturesVisible=!1}onGeometryDrawingClose(){this.geometryDrawingVisible=!1}onShapeSelected(t){console.log("Shape selected:",t),this.geometryDrawingVisible=!1,this.viewerComponent&&this.viewerComponent.setDrawingMode(t),this.showSnackbar(`${t.name}\uC774(\uAC00) \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4. PDF\uC5D0\uC11C \uB4DC\uB798\uADF8\uD558\uC5EC \uADF8\uB9AC\uC138\uC694.`)}onPdfContentClose(){this.pdfContentVisible=!1}onPdfRefresh(t){this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=t,this.tabBarComponent&&this.tabBarComponent.setActiveTabPdf(this.currentFileName,t),console.log("PDF \uBDF0\uC5B4\uAC00 \uC0C8\uB85C\uACE0\uCE68\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}updatePdfSrc(t){console.log("\u{1F4C4} PDF src \uC5C5\uB370\uC774\uD2B8:",t),this.pdfSrc&&this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=t,this.tabBarComponent&&this.tabBarComponent.setActiveTabPdf(this.currentFileName,t),console.log("\u2705 PDF src \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC")}onSaveOverlayedPdf(){this.saveMode==="overlay"?this.saveAsOverlay():this.saveAsTextStreamModified()}onDownloadModifiedPdf(){if(console.log("\uC218\uC815\uB41C PDF \uB2E4\uC6B4\uB85C\uB4DC \uC694\uCCAD"),!this.currentFile){this.showSnackbar("\uB2E4\uC6B4\uB85C\uB4DC\uD560 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.saveMode==="overlay"?this.downloadAsOverlay():this.downloadAsTextStreamModified()}saveAsOverlay(){console.log("\uC624\uBC84\uB808\uC774 \uBC29\uC2DD\uC73C\uB85C PDF \uC800\uC7A5 \uC694\uCCAD"),console.log("\uD604\uC7AC sentenceTextEditors \uC218:",this.sentenceTextEditors.length),this.sentenceTextEditors.forEach((o,l)=>{console.log(`\uC624\uBC84\uB808\uC774 \uC5D0\uB514\uD130 ${l+1}:`,{id:o.id,originalText:o.originalText,currentText:o.text,isModified:o.isModified,isActive:o.isActive,hasOriginalText:o.originalText!==void 0,textChanged:o.originalText!==void 0&&o.text.trim()!==o.originalText.trim()})});let t=this.textEditorService.getAllActiveEditors(),e=this.sentenceTextEditors.filter(o=>{let l=o.originalText!==void 0,f=l&&o.text.trim()!==o.originalText.trim(),_=o.isModified===!0,x=l&&f||_;return console.log(`\uC624\uBC84\uB808\uC774 \uC5D0\uB514\uD130 ${o.id} \uD544\uD130\uB9C1 \uC0C1\uC138:`,{hasOriginalText:l,textChanged:f,isMarkedAsModified:_,isActive:o.isActive,\uACB0\uACFC:x}),x}),n=[...t,...e];if(console.log("\uC218\uC9D1\uB41C \uC5D0\uB514\uD130\uB4E4:",{service:t.length,changedSentence:e.length,totalSentence:this.sentenceTextEditors.length,total:n.length}),n.length===0){this.showSnackbar("\uC800\uC7A5\uD560 \uD3B8\uC9D1\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uBB38\uC7A5 \uB0B4\uC6A9\uC744 \uC218\uC815\uD55C \uD6C4 \uC800\uC7A5\uD574\uC8FC\uC138\uC694.");return}console.log("\uBCC0\uACBD\uB41C \uC5D0\uB514\uD130 \uB0B4\uC6A9:",e.map(o=>({id:o.id,originalText:o.originalText,currentText:o.text,isActive:o.isActive,isModified:o.isModified})));let i=new CustomEvent("save-all-overlays",{detail:{editors:n,originalFile:this.currentFile,viewerScale:this.pdfViewerScale}});document.dispatchEvent(i)}clearAllTextEditors(){console.log("\uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uCD08\uAE30\uD654 \uC2DC\uC791"),this.textEditorService.clearAllTextEditors(),this.sentenceGroups=[],this.sentenceTextEditors=[],this.textEditorInstances=[],this.pdfTextEditors=[],this.textEditorVisible=!1,this.currentActiveMenu==="\uD3B8\uC9D1"&&(this.currentActiveMenu="\uD648",console.log("\uD3B8\uC9D1 \uBAA8\uB4DC\uC5D0\uC11C \uD648 \uBAA8\uB4DC\uB85C \uC790\uB3D9 \uC774\uB3D9")),console.log("\uBAA8\uB4E0 \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uCD08\uAE30\uD654 \uC644\uB8CC")}downloadAsOverlay(){console.log("\uC624\uBC84\uB808\uC774 \uBC29\uC2DD\uC73C\uB85C PDF \uB2E4\uC6B4\uB85C\uB4DC \uC694\uCCAD"),console.log("\uD604\uC7AC sentenceTextEditors \uC218:",this.sentenceTextEditors.length),this.sentenceTextEditors.forEach((o,l)=>{console.log(`\uC624\uBC84\uB808\uC774 \uC5D0\uB514\uD130 ${l+1}:`,{id:o.id,originalText:o.originalText,currentText:o.text,isModified:o.isModified,hasOriginalText:o.originalText!==void 0,textChanged:o.originalText!==void 0&&o.text.trim()!==o.originalText.trim()})});let t=this.textEditorService.getAllActiveEditors(),e=this.sentenceTextEditors.filter(o=>{let l=o.originalText!==void 0,f=l&&o.text.trim()!==o.originalText.trim(),_=o.isModified===!0,x=l&&f||_;return console.log(`\uC624\uBC84\uB808\uC774 \uC5D0\uB514\uD130 ${o.id} \uD544\uD130\uB9C1 \uC0C1\uC138:`,{hasOriginalText:l,textChanged:f,isMarkedAsModified:_,isActive:o.isActive,\uACB0\uACFC:x}),x}),n=[...t,...e];if(console.log("\uC218\uC9D1\uB41C \uC5D0\uB514\uD130\uB4E4:",{service:t.length,changedSentence:e.length,totalSentence:this.sentenceTextEditors.length,total:n.length}),n.length===0){console.log("\uD3B8\uC9D1\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC73C\uBBC0\uB85C \uC6D0\uBCF8 PDF\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4."),this.downloadOriginalPdf();return}console.log("\uBCC0\uACBD\uB41C \uC5D0\uB514\uD130 \uB0B4\uC6A9:",e.map(o=>({id:o.id,originalText:o.originalText,currentText:o.text,isActive:o.isActive,isModified:o.isModified})));let i=new CustomEvent("download-all-overlays",{detail:{editors:n,originalFile:this.currentFile,viewerScale:this.pdfViewerScale}});document.dispatchEvent(i)}downloadAsTextStreamModified(){console.log("\uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uBC29\uC2DD\uC73C\uB85C PDF \uB2E4\uC6B4\uB85C\uB4DC \uC694\uCCAD"),console.log("\uD604\uC7AC sentenceTextEditors \uC218:",this.sentenceTextEditors.length),this.sentenceTextEditors.forEach((n,i)=>{console.log(`\uC5D0\uB514\uD130 ${i+1}:`,{id:n.id,originalText:n.originalText,currentText:n.text,isModified:n.isModified,hasOriginalText:n.originalText!==void 0,textChanged:n.originalText!==void 0&&n.text.trim()!==n.originalText.trim()})}),console.log("=== \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uBCC0\uACBD \uB2E4\uC6B4\uB85C\uB4DC \uB514\uBC84\uAE45 \uC2DC\uC791 ==="),console.log("\uC804\uCCB4 sentenceTextEditors \uC218:",this.sentenceTextEditors.length);let t=this.sentenceTextEditors.filter(n=>{let i=n.originalText!==void 0,o=i&&n.text.trim()!==n.originalText.trim(),l=n.isModified===!0;return console.log(`\uB2E4\uC6B4\uB85C\uB4DC \uD544\uD130\uB9C1 - ${n.id}:`,{hasOriginalText:i,textChanged:o,isMarkedAsModified:l,\uACB0\uACFC:i&&o||l}),i&&o||l}).map(n=>({originalText:n.originalText,modifiedText:n.text,position:{x:n.x,y:n.y,width:n.width,height:n.height}}));if(console.log("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8\uB4E4:",t),t.length===0){console.log("\uD3B8\uC9D1\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC73C\uBBC0\uB85C \uC6D0\uBCF8 PDF\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4."),this.downloadOriginalPdf(),console.log("=== \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uBCC0\uACBD \uB2E4\uC6B4\uB85C\uB4DC \uB514\uBC84\uAE45 \uC885\uB8CC ===");return}let e=new CustomEvent("download-textstream-modified",{detail:{changedTexts:t,originalFile:this.currentFile,pdfTextStreamData:this.pdfTextStreamData}});document.dispatchEvent(e),console.log("=== \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uBCC0\uACBD \uB2E4\uC6B4\uB85C\uB4DC \uB514\uBC84\uAE45 \uC885\uB8CC ===")}downloadOriginalPdf(){if(console.log("\uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC2DC\uC791"),!this.currentFile){this.showSnackbar("\uB2E4\uC6B4\uB85C\uB4DC\uD560 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pdfSrc&&this.pdfSrc.startsWith("blob:")?(console.log("\uC218\uC815\uB41C PDF\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4."),this.downloadBlobPdf(this.pdfSrc,this.currentFile.name)):(console.log("\uC6D0\uBCF8 PDF\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4."),this.downloadFilePdf(this.currentFile))}downloadBlobPdf(t,e){let n=document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),this.showSnackbar("PDF\uAC00 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",3e3),console.log("Blob PDF \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC:",e)}downloadFilePdf(t){let e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download=t.name,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(e),this.showSnackbar("PDF\uAC00 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.",3e3),console.log("\uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC:",t.name)}saveAsTextStreamModified(){console.log("\uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uBC29\uC2DD\uC73C\uB85C PDF \uC800\uC7A5 \uC694\uCCAD"),console.log("\uD604\uC7AC sentenceTextEditors \uC218:",this.sentenceTextEditors.length),this.sentenceTextEditors.forEach((n,i)=>{console.log(`\uC5D0\uB514\uD130 ${i+1}:`,{id:n.id,originalText:n.originalText,currentText:n.text,isModified:n.isModified,hasOriginalText:n.originalText!==void 0,textChanged:n.originalText!==void 0&&n.text.trim()!==n.originalText.trim()})}),console.log("=== \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uBCC0\uACBD \uB514\uBC84\uAE45 \uC2DC\uC791 ==="),console.log("\uC804\uCCB4 sentenceTextEditors \uC218:",this.sentenceTextEditors.length),this.sentenceTextEditors.forEach((n,i)=>{console.log(`\uC5D0\uB514\uD130 ${i+1} (${n.id}):`,{originalText:n.originalText,currentText:n.text,hasOriginalText:n.originalText!==void 0,textChanged:n.originalText!==void 0&&n.text.trim()!==n.originalText.trim(),isActive:n.isActive,isModified:n.isModified})});let t=this.sentenceTextEditors.filter(n=>{let i=n.originalText!==void 0,o=i&&n.text.trim()!==n.originalText.trim(),l=n.isModified===!0,f=i&&o||l;return console.log(`\uC5D0\uB514\uD130 ${n.id} \uD544\uD130\uB9C1 \uC0C1\uC138:`,{hasOriginalText:i,originalText:n.originalText,currentText:n.text,originalTextTrimmed:n.originalText?n.originalText.trim():"N/A",currentTextTrimmed:n.text.trim(),textChanged:o,isMarkedAsModified:l,isActive:n.isActive,\uACB0\uACFC:f}),f}).map(n=>({id:n.id,originalText:n.originalText,modifiedText:n.text,position:{x:n.x,y:n.y,width:n.width,height:n.height}}));if(console.log("\uD544\uD130\uB9C1 \uD6C4 \uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8 \uC218:",t.length),console.log("=== \uC6D0\uBCF8 \uD14D\uC2A4\uD2B8 \uBCC0\uACBD \uB514\uBC84\uAE45 \uB05D ==="),t.length===0){this.dispatchSnackbarEvent(`\uC800\uC7A5\uD560 \uD3B8\uC9D1\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.
\uBB38\uC7A5 \uB0B4\uC6A9\uC744 \uC218\uC815\uD55C \uD6C4 \uC800\uC7A5\uD574\uC8FC\uC138\uC694.`,3e3);return}console.log("\uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8 \uB0B4\uC6A9:",t);let e=new CustomEvent("save-textstream-modified",{detail:{changedTexts:t,originalFile:this.currentFile,pdfTextStreamData:this.pdfTextStreamData}});document.dispatchEvent(e)}handleTextStreamModifiedSave(t){return S(this,null,function*(){try{console.log("=== \uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uC800\uC7A5 \uCC98\uB9AC \uC2DC\uC791 ==="),console.log("\uC804\uB2EC\uBC1B\uC740 \uC0C1\uC138 \uC815\uBCF4:",t);let{changedTexts:e,originalFile:n,pdfTextStreamData:i}=t;if(!n){console.error("\uC6D0\uBCF8 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."),this.dispatchSnackbarEvent("\uC6D0\uBCF8 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(!e||e.length===0){console.error("\uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.dispatchSnackbarEvent("\uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}console.log("\uBCC0\uACBD\uB41C \uD14D\uC2A4\uD2B8 \uC218:",e.length),console.log("\uC6D0\uBCF8 \uD30C\uC77C:",n.name,n.size,"\uBC14\uC774\uD2B8");let o=e.map((f,_)=>(console.log(`\uBCC0\uACBD ${_+1}:`,{original:f.originalText,modified:f.modifiedText,position:f.position}),{pageIndex:0,originalText:f.originalText,newText:f.modifiedText,x:f.position.x,y:f.position.y,width:f.position.width,height:f.position.height}));console.log("\uCD5C\uC885 \uC218\uC815 \uB370\uC774\uD130:",o),this.dispatchSnackbarEvent(`\uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815 \uC911... (${o.length}\uAC1C \uBCC0\uACBD\uC0AC\uD56D)`,1e3);let l=yield this.pdfTextStreamModifierService.modifyPdfTextStreamAndGetUrl(n,o);l.success&&l.newPdfUrl?(console.log("PDF \uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uC800\uC7A5 \uC644\uB8CC"),this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=l.newPdfUrl,this.tabBarComponent&&this.tabBarComponent.setActiveTabPdf(this.currentFileName,l.newPdfUrl),this.dispatchSnackbarEvent("PDF \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC218\uC815\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",3e3),this.clearAllTextEditors()):(console.error("PDF \uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uC800\uC7A5 \uC2E4\uD328:",l.error),this.dispatchSnackbarEvent(`PDF \uC800\uC7A5 \uC2E4\uD328: ${l.error||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`,5e3))}catch(e){console.error("=== \uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uBCC0\uACBD \uC800\uC7A5 \uC911 \uC624\uB958 ==="),console.error("\uC624\uB958 \uB0B4\uC6A9:",e),console.error("\uC624\uB958 \uC2A4\uD0DD:",e instanceof Error?e.stack:"No stack trace"),this.dispatchSnackbarEvent(`PDF \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e}`,5e3)}})}dispatchSnackbarEvent(t,e=2e3){let n=new CustomEvent("show-snackbar",{detail:{message:t,duration:e}});document.dispatchEvent(n)}onSentenceEditorsChange(t){this.sentenceTextEditors=t,console.log("\uBB38\uC7A5 \uC5D0\uB514\uD130 \uC0C1\uD0DC \uC5C5\uB370\uC774\uD2B8:",t.length,"\uAC1C"),t.forEach((e,n)=>{console.log(`\uC5C5\uB370\uC774\uD2B8\uB41C \uC5D0\uB514\uD130 ${n+1}:`,{id:e.id,text:e.text?.substring(0,50)+(e.text&&e.text.length>50?"...":""),originalText:e.originalText?.substring(0,50)+(e.originalText&&e.originalText.length>50?"...":""),isModified:e.isModified})})}onBookmarkClick(t){this.currentPage=t.page,this.updateCurrentPageText(),console.log("Navigate to page:",t.page,"from bookmark:",t.title)}onMenuAction(t){switch(t){case"toggle-sidebar":this.viewerComponent&&(this.viewerComponent.toggleSidebar(),this.sidebarVisible=this.viewerComponent.isSidebarOpen);break;case"toggle-properties":this.aiTranslateVisible=!1,this.aiFeaturesVisible=!1,this.pdfContentVisible=!1,this.propertiesVisible=!this.propertiesVisible;break;case"zoom-in":this.zoomLevel=Math.min(300,this.zoomLevel+25),console.log("Zoom in:",this.zoomLevel+"%");break;case"zoom-out":this.zoomLevel=Math.max(25,this.zoomLevel-25),console.log("Zoom out:",this.zoomLevel+"%");break;case"ai-features":this.propertiesVisible=!1,this.aiTranslateVisible=!1,this.pdfContentVisible=!1,this.aiFeaturesVisible=!this.aiFeaturesVisible,console.log("AI features panel toggled");break;case"translate":this.propertiesVisible=!1,this.aiFeaturesVisible=!1,this.pdfContentVisible=!1,this.aiTranslateVisible=!this.aiTranslateVisible,console.log("AI Translation panel toggled");break;case"toggle-pdf-content":this.propertiesVisible=!1,this.aiFeaturesVisible=!1,this.aiTranslateVisible=!1,this.pdfContentVisible=!this.pdfContentVisible,console.log("PDF Content panel toggled");break;case"edit-mode":console.log("Edit mode activated");break}}onHeaderAction(t){switch(t){case"zoom-in":this.zoomLevel=Math.min(300,this.zoomLevel+25),console.log("Header Zoom in:",this.zoomLevel+"%");break;case"zoom-out":this.zoomLevel=Math.max(25,this.zoomLevel-25),console.log("Header Zoom out:",this.zoomLevel+"%");break;case"highlight":this.viewerComponent&&(this.viewerComponent.isHighlightMode=!this.viewerComponent.isHighlightMode,console.log("Highlight mode toggled:",this.viewerComponent.isHighlightMode));break;case"draw-shape":this.geometryDrawingVisible=!this.geometryDrawingVisible,console.log("Geometry drawing panel toggled:",this.geometryDrawingVisible);break;case"pen-drawing":console.log("\u{1F58A}\uFE0F App: Received pen-drawing action"),console.log("\u{1F58A}\uFE0F App: Current penDrawingVisible state:",this.penDrawingVisible),this.penDrawingVisible=!this.penDrawingVisible,console.log("\u{1F58A}\uFE0F App: New penDrawingVisible state (drawing mode):",this.penDrawingVisible);break;case"add-text":this.textEditorVisible=!this.textEditorVisible,console.log("Text editor panel toggled:",this.textEditorVisible);break;case"add-image":this.imageInserterVisible=!this.imageInserterVisible,console.log("Image inserter modal toggled:",this.imageInserterVisible);break;case"watermark":this.watermarkAdderVisible=!this.watermarkAdderVisible,console.log("Watermark adder modal toggled:",this.watermarkAdderVisible);break;case"add-page":console.log("Add page action"),this.showSnackbar("\uD398\uC774\uC9C0 \uCD94\uAC00 \uAE30\uB2A5\uC740 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.");break;case"delete-page":console.log("Delete page action"),this.showSnackbar("\uD398\uC774\uC9C0 \uC0AD\uC81C \uAE30\uB2A5\uC740 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.");break;case"rotate-page":console.log("Rotate page action"),this.showSnackbar("\uD398\uC774\uC9C0 \uD68C\uC804 \uAE30\uB2A5\uC740 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.");break;case"merge-pdf":console.log("Merge PDF action"),this.showSnackbar("PDF \uBCD1\uD569 \uAE30\uB2A5\uC740 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.");break;case"export-pdf":console.log("Export PDF action"),this.showSnackbar("PDF \uB0B4\uBCF4\uB0B4\uAE30 \uAE30\uB2A5\uC740 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.");break;default:console.log("Header action:",t);break}}onMenuChanged(t){if(["\uD3B8\uC9D1","\uD30C\uC77C\uBCC0\uD658","\uAD6C\uC131","\uBCF4\uC548"].includes(t)&&!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}let n=this.currentActiveMenu;this.currentActiveMenu=t,console.log("Active menu changed to:",t),n==="\uD3B8\uC9D1"&&t!=="\uD3B8\uC9D1"&&(this.textEditorService.clearAllTextEditors(),this.sentenceGroups=[],this.sentenceTextEditors=[],this.textEditorInstances=[],console.log("\uD3B8\uC9D1 \uC0C1\uD0DC \uCD08\uAE30\uD654 \uC644\uB8CC")),this.pageReorderVisible=t==="\uAD6C\uC131",this.fileConversionVisible=t==="\uD30C\uC77C\uBCC0\uD658",this.securityVisible=t==="\uBCF4\uC548",console.log("Panel visibility updated:",{pageReorderVisible:this.pageReorderVisible,fileConversionVisible:this.fileConversionVisible,securityVisible:this.securityVisible})}ngOnDestroy(){this.pdfSrc&&this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc)}onCreateTextEditor(){this.pdfSrc&&this.textEditorService.createTextEditor(150,150)}onCreateSentenceOverlay(){!this.pdfSrc||!this.pdfTextStreamData||!this.currentFile||this.triggerSentenceOverlay()}triggerSentenceOverlay(){let t=new CustomEvent("execute-sentence-overlay");document.dispatchEvent(t)}updatePdfInfo(){if(this.pdfTextStreamData){if(this.totalPages=this.pdfTextStreamData.pageCount,this.pdfTextStreamData.pages.length>0){let t=this.pdfTextStreamData.pages[0],e=Math.round(t.width),n=Math.round(t.height);this.pageSize=`${e} x ${n}`}if(this.documentMetadata=[{label:"\uD30C\uC77C\uBA85",value:this.pdfTextStreamData.fileName},{label:"\uD30C\uC77C \uD06C\uAE30",value:this.formatFileSize(this.pdfTextStreamData.fileSize)},{label:"\uCD1D \uD398\uC774\uC9C0",value:this.pdfTextStreamData.pageCount.toString()},{label:"\uCD1D \uD14D\uC2A4\uD2B8 \uD56D\uBAA9",value:this.pdfTextStreamData.metadata.totalTextItems.toString()},{label:"\uCD1D \uB2E8\uC5B4 \uC218",value:this.pdfTextStreamData.metadata.totalWords.toString()},{label:"\uCD1D \uBB38\uC790 \uC218",value:this.pdfTextStreamData.metadata.totalCharacters.toString()},{label:"\uACE0\uC720 \uD3F0\uD2B8 \uC218",value:this.pdfTextStreamData.metadata.uniqueFonts.length.toString()},{label:"\uCD94\uCD9C \uC2DC\uAC04",value:new Date(this.pdfTextStreamData.extractionTimestamp).toLocaleString()}],this.pdfTextStreamData.metadata.languageDetection){let t=this.pdfTextStreamData.metadata.languageDetection;this.documentMetadata.push({label:"\uD55C\uAD6D\uC5B4 \uBE44\uC728",value:`${t.korean.toFixed(1)}%`},{label:"\uC601\uC5B4 \uBE44\uC728",value:`${t.english.toFixed(1)}%`},{label:"\uD63C\uD569 \uD14D\uC2A4\uD2B8",value:`${t.mixed.toFixed(1)}%`})}this.generateBookmarks(),this.updateCurrentPageText()}}updateCurrentPageText(){if(!this.pdfTextStreamData||!this.pdfTextStreamData.pages){this.extractedText="";return}let t=this.pdfTextStreamData.pages.find(e=>e.pageNumber===this.currentPage);if(t){let e=[...t.textItems].sort((o,l)=>Math.abs(o.position.y-l.position.y)<5?o.position.x-l.position.x:l.position.y-o.position.y),n="",i=-1;e.forEach(o=>{i!==-1&&Math.abs(o.position.y-i)>10&&(n+=`
`),n+=o.text+" ",i=o.position.y}),this.extractedText=n.trim()}else this.extractedText="\uC774 \uD398\uC774\uC9C0\uC5D0\uB294 \uCD94\uCD9C \uAC00\uB2A5\uD55C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}generateBookmarks(){this.bookmarks=[{title:"\uBB38\uC11C \uAC1C\uC694",page:1,level:0},{title:"\uC8FC\uC694 \uB0B4\uC6A9",page:Math.ceil(this.totalPages*.2),level:0},{title:"\uC0C1\uC138 \uBD84\uC11D",page:Math.ceil(this.totalPages*.5),level:1},{title:"\uACB0\uB860",page:Math.ceil(this.totalPages*.8),level:0}]}setDefaultPdfInfo(t){this.totalPages=1,this.pageSize="A4",this.extractedText="PDF \uD14D\uC2A4\uD2B8\uB97C \uCD94\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",this.documentMetadata=[{label:"\uD30C\uC77C\uBA85",value:t.name},{label:"\uD30C\uC77C \uD06C\uAE30",value:this.formatFileSize(t.size)},{label:"\uC0C1\uD0DC",value:"\uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC2E4\uD328"}],this.bookmarks=[]}onSentenceGroupsChanged(t){this.sentenceGroups=t,console.log("\uC571 \uCEF4\uD3EC\uB10C\uD2B8\uC5D0\uC11C \uBC1B\uC740 \uBB38\uC7A5 \uADF8\uB8F9 \uB370\uC774\uD130:",t),this.createTextEditorInstances()}createTextEditorInstances(){this.textEditorInstances=this.sentenceGroups.map((t,e)=>{let n=this.convertPdfToHtmlCoordinates(t);return{id:`sentence-editor-${e}`,x:n.x,y:n.y,width:n.width,height:n.height,rotation:0,text:t.text,originalText:t.text}}),console.log("\uC0DD\uC131\uB41C \uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uC778\uC2A4\uD134\uC2A4\uB4E4:",this.textEditorInstances)}convertPdfToHtmlCoordinates(t){let l=1*(this.zoomLevel/100),f=841.89-t.position.y-t.position.height,_=l*(96/72);return{x:t.position.x*_+this.pdfViewerOffsetX-this.pdfScrollLeft,y:f*_+this.pdfViewerOffsetY-this.pdfScrollTop,width:t.position.width*_,height:t.position.height*_}}updatePdfViewerInfo(t,e=0,n=0){this.pdfViewerScale=t,this.pdfViewerOffsetX=e,this.pdfViewerOffsetY=n,this.sentenceGroups.length>0&&this.createTextEditorInstances()}onPdfViewerScroll(t){this.pdfScrollLeft=t.scrollLeft,this.pdfScrollTop=t.scrollTop,this.sentenceGroups.length>0&&this.createTextEditorInstances()}togglePageReorderPanel(){this.propertiesVisible=!1,this.aiTranslateVisible=!1,this.aiFeaturesVisible=!1,this.pageReorderVisible=!this.pageReorderVisible}closePageReorderPanel(){this.pageReorderVisible=!1}performPageDeletion(t){return S(this,null,function*(){try{this.showSnackbar("PDF \uD398\uC774\uC9C0\uB97C \uC0AD\uC81C\uD558\uB294 \uC911\uC785\uB2C8\uB2E4...",2e3);let e=yield this.pdfPageDeleterService.deletePages(this.pdfSrc,t);this.pdfSrc&&this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=e,this.totalPages=yield this.pdfPageDeleterService.getPageCount(e),this.viewerComponent&&(this.viewerComponent.pdfSrc=e),this.showSnackbar(`\u2705 ${t.length}\uAC1C\uC758 \uD398\uC774\uC9C0\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (\uB0A8\uC740 \uD398\uC774\uC9C0: ${this.totalPages})`,5e3)}catch(e){console.error("\uD398\uC774\uC9C0 \uC0AD\uC81C \uC911 \uC624\uB958 \uBC1C\uC0DD:",e),this.showSnackbar(`\u274C \uD398\uC774\uC9C0 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e.message}`,7e3)}})}onSaveModeChanged(t){this.saveMode=t,console.log("PDF \uC800\uC7A5 \uBAA8\uB4DC\uAC00 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4:",t)}showSnackbar(t,e=4e3){this.snackbarMessage=t,this.snackbarVisible=!0,setTimeout(()=>{this.closeSnackbar()},e)}closeSnackbar(){this.snackbarVisible=!1,this.snackbarMessage=""}showConfirmModal(t,e,n){console.log("showConfirmModal called with:",{title:t,message:e,callback:!!n}),console.log("Setting modal properties..."),this.confirmModalTitle=t,this.confirmModalMessage=e,this.confirmModalCallback=n,this.confirmModalVisible=!0,console.log("Modal should now be visible:",this.confirmModalVisible)}closeConfirmModal(){this.confirmModalVisible=!1,this.confirmModalTitle="",this.confirmModalMessage="",this.confirmModalCallback=null}confirmModalAction(){if(console.log("confirmModalAction called"),console.log("confirmModalCallback exists:",!!this.confirmModalCallback),console.log("confirmModalCallback type:",typeof this.confirmModalCallback),this.confirmModalCallback){console.log("Executing callback...");try{this.confirmModalCallback(),console.log("Callback executed successfully")}catch(t){console.error("Callback execution error:",t)}}else console.warn("No callback to execute");this.closeConfirmModal()}onConfirmDelete(t){console.log("onConfirmDelete called with data:",t),console.log("Pages to delete:",t.pages),console.log("Callback function:",typeof t.callback),this.showConfirmModal("\uD398\uC774\uC9C0 \uC0AD\uC81C \uD655\uC778",`\uC120\uD0DD\uD55C ${t.pages.length}\uAC1C\uC758 \uD398\uC774\uC9C0\uB97C \uC815\uB9D0 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,()=>S(this,null,function*(){console.log("Delete confirmation callback executed"),yield this.performPageDeletion(t.pages),t.callback()}))}onDeletePages(t){console.log("onDeletePages called with pages:",t),this.showSnackbar(`${t.length}\uAC1C\uC758 \uD398\uC774\uC9C0\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onPageReorderComplete(t){return S(this,null,function*(){console.log("onPageReorderComplete called with new order:",t);try{this.showSnackbar("\uD398\uC774\uC9C0 \uC21C\uC11C\uB97C \uBCC0\uACBD\uD558\uB294 \uC911\uC785\uB2C8\uB2E4...",2e3),this.showSnackbar("\uD398\uC774\uC9C0 \uC21C\uC11C\uAC00 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(e){console.error("\uD398\uC774\uC9C0 \uC21C\uC11C \uBCC0\uACBD \uC2E4\uD328:",e),this.showSnackbar("\uD398\uC774\uC9C0 \uC21C\uC11C \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onDragOver(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer?.types.includes("Files")&&(t.dataTransfer.dropEffect="copy")}onDragEnter(t){t.preventDefault(),t.stopPropagation(),this.dragCounter++,t.dataTransfer?.types.includes("Files")&&(this.isDragOver=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dragCounter--,this.dragCounter<=0&&(this.isDragOver=!1,this.dragCounter=0)}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1,this.dragCounter=0;let e=t.dataTransfer?.files;if(e&&e.length>0){let n=e[0];n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf")?(console.log("\uB4DC\uB798\uADF8 \uC564 \uB4DC\uB86D\uC73C\uB85C PDF \uD30C\uC77C \uC120\uD0DD:",n.name),this.onFileSelected(n)):this.showSnackbar("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}}onTextEditorsChanged(t){this.pdfTextEditors=t,console.log("\uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130 \uC0C1\uD0DC \uBCC0\uACBD\uB428:",t)}onTextEditorClose(){this.textEditorVisible=!1}onApplyTextsToDocument(t){if(console.log("Applying texts to document:",t),t.length===0){this.showSnackbar("\uC801\uC6A9\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.drawTextsOnPdfDocument(t),this.textEditorVisible=!1}drawTextsOnPdfDocument(t){return S(this,null,function*(){try{if(!this.currentPdfBlob){console.warn("\uD604\uC7AC PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.showSnackbar("PDF \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}console.log("PDF\uC5D0 \uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC2DC\uC791..."),console.log("\uD14D\uC2A4\uD2B8 \uC5D0\uB514\uD130\uB4E4:",t);let e=this.getViewerInfo();console.log("\uBDF0\uC5B4 \uC815\uBCF4:",e);let n=t.map(l=>{let f=l.x-e.offsetX,_=l.y-e.offsetY;return console.log(`\uC5D0\uB514\uD130 "${l.text}": \uD654\uBA74\uC88C\uD45C(${l.x}, ${l.y}) \u2192 PDF\uC88C\uD45C(${f}, ${_})`),console.log(`- \uBDF0\uC5B4 \uC624\uD504\uC14B: (${e.offsetX}, ${e.offsetY})`),console.log(`- \uC2A4\uCF00\uC77C: ${e.scale}`),_e(le({},l),{x:Math.max(0,f/e.scale),y:Math.max(0,_/e.scale),width:l.width,height:l.height,fontSize:l.fontSize})}),i=yield this.pdfModificationService.addTextToPdf(this.currentPdfBlob,n);this.currentPdfBlob=i,this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc);let o=URL.createObjectURL(i);this.pdfSrc=null,setTimeout(()=>{this.pdfSrc=o,this.viewerComponent&&this.viewerComponent.ngOnChanges({pdfSrc:{currentValue:o,previousValue:null,firstChange:!1,isFirstChange:()=>!1}}),console.log("PDF \uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC644\uB8CC - \uBB38\uC11C \uC7AC\uB85C\uB529"),this.showSnackbar(`${t.length}\uAC1C\uC758 \uD14D\uC2A4\uD2B8\uAC00 PDF\uC5D0 \uC601\uAD6C\uC801\uC73C\uB85C \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)},100)}catch(e){console.error("PDF \uD14D\uC2A4\uD2B8 \uADF8\uB9AC\uAE30 \uC2E4\uD328:",e),this.showSnackbar("PDF \uD14D\uC2A4\uD2B8 \uCD94\uAC00\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}getViewerInfo(){let t=1,e=0,n=0;try{if(this.viewerComponent){t=this.zoomLevel/100;let i=document.querySelector("ngx-extended-pdf-viewer"),o=document.querySelector(".page");if(i&&o){let l=i.getBoundingClientRect(),f=o.getBoundingClientRect();e=f.left,n=f.top,console.log("\uBDF0\uC5B4 \uC815\uBCF4 \uC0C1\uC138:"),console.log("- \uC90C \uB808\uBCA8:",this.zoomLevel,"% \u2192 \uC2A4\uCF00\uC77C:",t),console.log("- \uBDF0\uC5B4 \uC704\uCE58:",l),console.log("- \uD398\uC774\uC9C0 \uC704\uCE58:",f),console.log("- \uACC4\uC0B0\uB41C \uC624\uD504\uC14B:",{offsetX:e,offsetY:n})}else console.warn("PDF \uBDF0\uC5B4 \uB610\uB294 \uD398\uC774\uC9C0 \uC694\uC18C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C")}}catch(i){console.warn("\uBDF0\uC5B4 \uC815\uBCF4 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:",i)}return{scale:t,offsetX:e,offsetY:n}}addTextOverlayToPdf(t){if(!this.viewerComponent){console.warn("Viewer component not found");return}let e=(t.x-this.pdfViewerOffsetX)/this.pdfViewerScale,n=(t.y-this.pdfViewerOffsetY)/this.pdfViewerScale,i={id:t.id,x:e,y:n,width:t.width/this.pdfViewerScale,height:t.height/this.pdfViewerScale,rotation:0,text:t.text,isActive:!1,isModified:!0,font:{name:t.fontFamily,size:t.fontSize,color:t.color,weight:t.bold?"bold":"normal",style:t.italic?"italic":"normal"},pdfCoords:{x:e,y:n,width:t.width/this.pdfViewerScale,height:t.height/this.pdfViewerScale}};this.textEditorService.addTextEditor(i),console.log("Added text overlay to PDF via service:",i)}toggleImageInserter(){this.imageInserterVisible=!this.imageInserterVisible,console.log("Image inserter toggled:",this.imageInserterVisible)}closeImageInserter(){this.imageInserterVisible=!1}closeWatermarkAdder(){this.watermarkAdderVisible=!1}onPenDrawingApplied(){return S(this,null,function*(){this.showSnackbar("\uD39C \uADF8\uB9AC\uAE30\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.closePenDrawing()})}closePenDrawing(){this.penDrawingVisible=!1}onStrokeCompleted(t){return S(this,null,function*(){console.log("\u{1F58A}\uFE0F App: onStrokeCompleted called"),console.log("\u{1F58A}\uFE0F App: Stroke details:",{pointsCount:t.points.length,color:t.config.color,lineWidth:t.config.lineWidth,opacity:t.config.opacity});try{if(!this.currentPdfBlob){console.error("\u{1F58A}\uFE0F App: No PDF blob available");return}console.log("\u{1F58A}\uFE0F App: Current PDF blob size:",this.currentPdfBlob.size),console.log("\u{1F58A}\uFE0F App: Current page:",this.currentPage);let e=yield this.currentPdfBlob.arrayBuffer(),n=new Uint8Array(e);console.log("\u{1F58A}\uFE0F App: PDF bytes length:",n.length);let i=document.querySelector(".drawing-canvas");console.log("\u{1F58A}\uFE0F App: Canvas element found:",!!i);let o=i?{width:i.width,height:i.height}:void 0;console.log("\u{1F58A}\uFE0F App: Canvas size:",o);let l=this.currentPage-1;console.log("\u{1F58A}\uFE0F App: Applying to page index:",l),console.log("\u{1F58A}\uFE0F App: Calling penDrawingService.applyDrawingToPdf");let f=yield this.penDrawingService.applyDrawingToPdf(n,[t],l,o);console.log("\u{1F58A}\uFE0F App: Modified PDF bytes length:",f.length);let _=new Blob([f],{type:"application/pdf"});console.log("\u{1F58A}\uFE0F App: New PDF blob size:",_.size);let x=URL.createObjectURL(_);console.log("\u{1F58A}\uFE0F App: New PDF URL created:",x),this.currentPdfBlob=_,this.pdfSrc&&(console.log("\u{1F58A}\uFE0F App: Revoking old PDF URL:",this.pdfSrc),URL.revokeObjectURL(this.pdfSrc)),this.pdfSrc=x,console.log("\u{1F58A}\uFE0F App: PDF source updated to:",this.pdfSrc),console.log("\u2705 App: Individual stroke applied successfully to PDF")}catch(e){console.error("\u274C App: Error applying individual stroke to PDF:",e),e instanceof Error&&console.error("\u274C App: Error stack:",e.stack)}})}onWatermarkApplied(t){return S(this,null,function*(){try{if(!this.currentPdfBlob){this.showSnackbar("PDF \uD30C\uC77C\uC774 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}this.showSnackbar("\uC6CC\uD130\uB9C8\uD06C\uB97C \uC801\uC6A9\uD558\uB294 \uC911\uC785\uB2C8\uB2E4...");let e=yield this.currentPdfBlob.arrayBuffer(),n=new Uint8Array(e),i=yield this.watermarkService.applyWatermarkToPdf(n,t),o=new Blob([i],{type:"application/pdf"}),l=URL.createObjectURL(o);this.currentPdfBlob=o,this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=l,this.showSnackbar("\uC6CC\uD130\uB9C8\uD06C\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.closeWatermarkAdder()}catch(e){console.error("\uC6CC\uD130\uB9C8\uD06C \uC801\uC6A9 \uC911 \uC624\uB958 \uBC1C\uC0DD:",e),this.showSnackbar("\uC6CC\uD130\uB9C8\uD06C \uC801\uC6A9 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onImageInserted(t){this.viewerComponent&&this.viewerComponent.onImageInserted(t),this.closeImageInserter(),console.log("\uC774\uBBF8\uC9C0\uAC00 \uC0BD\uC785\uB418\uC5C8\uC2B5\uB2C8\uB2E4:",t)}printPdf(){try{if(!this.pdfSrc){this.showSnackbar("\uC778\uC1C4\uD560 PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(window.PDFViewerApplication){let e=window.PDFViewerApplication;if(e.print){e.print(),console.log("PDF.js viewer \uC778\uC1C4 \uAE30\uB2A5 \uC2E4\uD589");return}}let t=window.open(this.pdfSrc,"_blank");t?(t.onload=()=>{t.print()},console.log("\uC0C8 \uCC3D\uC5D0\uC11C PDF \uC778\uC1C4 \uC2E4\uD589")):this.showSnackbar("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5B4 \uC778\uC1C4\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800 \uC124\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.")}catch(t){console.error("PDF \uC778\uC1C4 \uC911 \uC624\uB958 \uBC1C\uC0DD:",t),this.showSnackbar("PDF \uC778\uC1C4 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}static \u0275fac=function(e){return new(e||r)(ee(Me),ee(ye),ee(ze),ee(Ue),ee(Ye),ee(Ke),ee(qe),ee(ft))};static \u0275cmp=N({type:r,selectors:[["ez-reader-main"]],viewQuery:function(e,n){if(e&1&&(xe(_a,5),xe(We,5)),e&2){let i;Ce(i=be())&&(n.tabBarComponent=i.first),Ce(i=be())&&(n.viewerComponent=i.first)}},standalone:!1,decls:20,vars:34,consts:[["tabBar",""],["fileSelect",""],["fileInput",""],[3,"tabChanged","currentFileName"],[3,"searchChange","fileSelected","createTextEditor","createSentenceOverlay","saveOverlayedPdf","downloadModifiedPdf","printPdf","saveModeChanged","menuChanged","saveMode","currentActiveMenu","pdfSrc"],[3,"headerAction","showSnackbar","activeMenu","pdfSrc"],[1,"main-container"],["position","left",3,"sidebarVisible","propertiesVisible","aiTranslateVisible","aiFeaturesVisible","menuAction",4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"close","isVisible"],[3,"close","translationCompleted","isVisible","pdfTextStreamData"],[3,"close","isVisible","pdfTextStreamData"],[3,"close","shapeSelected","isVisible"],[3,"close","editorsChanged","applyTexts","isVisible"],[3,"close","bookmarkClick","pdfRefresh","sentenceGroupsChanged","isVisible","currentPage","totalPages","pageSize","extractedText","documentMetadata","bookmarks","textStreamData","originalFile","searchResults"],[3,"close","message","isVisible","duration"],["class","confirm-modal-overlay",3,"click",4,"ngIf"],[3,"imageInserted","closed","isVisible"],[3,"visibleChange","watermarkApplied","visible"],["position","left",3,"menuAction","sidebarVisible","propertiesVisible","aiTranslateVisible","aiFeaturesVisible"],["class","viewer-container",4,"ngIf"],[3,"isVisible","currentPageCount","pdfSrc","close","pageOrderChanged","deletePages","confirmDelete",4,"ngIf"],["title","\uBCF4\uC548","description","PDF \uBCF4\uC548 \uAE30\uB2A5\uC744 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.",4,"ngIf"],[1,"viewer-container"],[3,"viewerInfoChange","viewerScroll","sentenceEditorsChange","currentPage","zoomLevel","pdfSrc","fileName","sentenceGroups"],[3,"drawingModeChange","drawingApplied","strokeCompleted","visible","isDrawingMode","pdfSrc"],[3,"close","pageOrderChanged","deletePages","confirmDelete","isVisible","currentPageCount","pdfSrc"],["title","\uBCF4\uC548","description","PDF \uBCF4\uC548 \uAE30\uB2A5\uC744 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4."],["position","right",3,"menuAction","sidebarVisible","propertiesVisible","aiTranslateVisible","aiFeaturesVisible","pdfContentVisible"],[1,"file-select-guide",3,"dragover","dragenter","dragleave","drop"],["class","drag-overlay",4,"ngIf"],[1,"main-content-area"],[1,"file-upload-area"],[1,"upload-zone",3,"click"],["width","36","height","36","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z","fill","#007acc"],["type","button",1,"file-open-btn"],[1,"file-icon"],["width","18","height","18","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","3","fill","#F44336"],["d","M8 12h8M12 8v8","stroke","#fff","stroke-width","2","stroke-linecap","round"],[1,"upload-hint"],[1,"recent-files-wrap"],[3,"deleteFile","openFile","files"],["type","file","accept","application/pdf",2,"display","none",3,"change"],[1,"drag-overlay"],[1,"drag-message"],["width","64","height","64","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","3","fill","#007acc"],[1,"confirm-modal-overlay",3,"click"],[1,"confirm-modal-content",3,"click"],[1,"confirm-modal-header"],[1,"confirm-modal-body"],[1,"confirm-modal-footer"],[1,"confirm-modal-btn","cancel",3,"click"],[1,"confirm-modal-btn","confirm",3,"click"]],template:function(e,n){if(e&1){let i=w();a(0,"app-tab-bar",3,0),h("tabChanged",function(l){return m(i),u(n.onTabChanged(l))}),s(),a(2,"app-top-menu-bar",4),h("searchChange",function(l){return m(i),u(n.onSearchChange(l))})("fileSelected",function(l){return m(i),u(n.onFileSelected(l))})("createTextEditor",function(){return m(i),u(n.onCreateTextEditor())})("createSentenceOverlay",function(){return m(i),u(n.onCreateSentenceOverlay())})("saveOverlayedPdf",function(){return m(i),u(n.onSaveOverlayedPdf())})("downloadModifiedPdf",function(){return m(i),u(n.onDownloadModifiedPdf())})("printPdf",function(){return m(i),u(n.printPdf())})("saveModeChanged",function(l){return m(i),u(n.onSaveModeChanged(l))})("menuChanged",function(l){return m(i),u(n.onMenuChanged(l))}),s(),a(3,"app-header",5),h("headerAction",function(l){return m(i),u(n.onHeaderAction(l))})("showSnackbar",function(l){return m(i),u(n.showSnackbar(l))}),s(),a(4,"div",6),b(5,Ca,1,4,"app-vertical-menu",7)(6,Ma,5,4,"ng-container",8)(7,ya,2,5,"ng-container",9)(8,Oa,23,4,"ng-template",null,1,ct),a(10,"app-properties-panel",10),h("close",function(){return m(i),u(n.onPropertiesClose())}),s(),a(11,"app-ai-translate-panel",11),h("close",function(){return m(i),u(n.onAiTranslateClose())})("translationCompleted",function(l){return m(i),u(n.onTranslationCompleted(l))}),s(),a(12,"app-ai-features-panel",12),h("close",function(){return m(i),u(n.onAiFeaturesClose())}),s(),a(13,"app-geometry-drawing",13),h("close",function(){return m(i),u(n.onGeometryDrawingClose())})("shapeSelected",function(l){return m(i),u(n.onShapeSelected(l))}),s(),a(14,"app-pdf-text-adder",14),h("close",function(){return m(i),u(n.onTextEditorClose())})("editorsChanged",function(l){return m(i),u(n.onTextEditorsChanged(l))})("applyTexts",function(l){return m(i),u(n.onApplyTextsToDocument(l))}),s(),a(15,"app-pdf-content-panel",15),h("close",function(){return m(i),u(n.onPdfContentClose())})("bookmarkClick",function(l){return m(i),u(n.onBookmarkClick(l))})("pdfRefresh",function(l){return m(i),u(n.onPdfRefresh(l))})("sentenceGroupsChanged",function(l){return m(i),u(n.onSentenceGroupsChanged(l))}),s()(),a(16,"app-snackbar",16),h("close",function(){return m(i),u(n.closeSnackbar())}),s(),b(17,Sa,13,2,"div",17),a(18,"app-image-inserter",18),h("imageInserted",function(l){return m(i),u(n.onImageInserted(l))})("closed",function(){return m(i),u(n.closeImageInserter())}),s(),a(19,"app-watermark-adder",19),h("visibleChange",function(l){return m(i),u(n.watermarkAdderVisible=l)})("watermarkApplied",function(l){return m(i),u(n.onWatermarkApplied(l))}),s()}if(e&2){let i=Be(9);p("currentFileName",n.currentFileName),c(2),p("saveMode",n.saveMode)("currentActiveMenu",n.currentActiveMenu)("pdfSrc",n.pdfSrc),c(),p("activeMenu",n.currentActiveMenu)("pdfSrc",n.pdfSrc),c(2),p("ngIf",n.pdfSrc&&!n.pageReorderVisible&&!n.fileConversionVisible&&!n.securityVisible),c(),p("ngIf",n.pdfSrc)("ngIfElse",i),c(),p("ngIf",n.pdfSrc&&!n.pageReorderVisible&&!n.fileConversionVisible&&!n.securityVisible),c(3),p("isVisible",n.propertiesVisible),c(),p("isVisible",n.aiTranslateVisible)("pdfTextStreamData",n.pdfTextStreamData),c(),p("isVisible",n.aiFeaturesVisible)("pdfTextStreamData",n.pdfTextStreamData),c(),p("isVisible",n.geometryDrawingVisible),c(),p("isVisible",n.textEditorVisible),c(),p("isVisible",n.pdfContentVisible)("currentPage",n.currentPage)("totalPages",n.totalPages)("pageSize",n.pageSize)("extractedText",n.extractedText)("documentMetadata",n.documentMetadata)("bookmarks",n.bookmarks)("textStreamData",n.pdfTextStreamData)("originalFile",n.currentFile)("searchResults",$t(33,xa)),c(),p("message",n.snackbarMessage)("isVisible",n.snackbarVisible)("duration",4e3),c(),p("ngIf",n.confirmModalVisible),c(),p("isVisible",n.imageInserterVisible),c(),p("visible",n.watermarkAdderVisible)}},dependencies:[Y,Xe,ke,Je,_t,xt,Ct,We,bt,vt,wt,Pt,Mt,yt,Et,Ot,Ze,St,Tt,kt],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden;margin:0;padding:0}app-tab-bar[_ngcontent-%COMP%]{height:38px;flex-shrink:0}app-top-menu-bar[_ngcontent-%COMP%]{height:48px;flex-shrink:0}app-header[_ngcontent-%COMP%]{height:44px;flex-shrink:0}.main-container[_ngcontent-%COMP%]{display:flex;flex:1;height:calc(100vh - 130px);position:relative;overflow:hidden;min-height:0}app-page-reorder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.sidebar[_ngcontent-%COMP%], .properties-panel[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1)}.sidebar[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.sidebar.closed[_ngcontent-%COMP%]{transform:translate(-100%);opacity:0;pointer-events:none}.properties-panel[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.properties-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.text-editors-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1000}.text-editors-overlay[_ngcontent-%COMP%]   app-text-editor[_ngcontent-%COMP%]{pointer-events:auto;position:absolute}.file-select-guide.drag-over[_ngcontent-%COMP%]{border:3px dashed #007acc;background:#007acc0d;position:relative}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acc1a;display:flex;align-items:center;justify-content:center;border-radius:12px;z-index:1000;pointer-events:none}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#007acc;pointer-events:none}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;display:block;margin-left:auto;margin-right:auto}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0}.confirm-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.confirm-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;min-width:300px;max-width:500px;margin:20px}.confirm-modal-header[_ngcontent-%COMP%]{padding:20px 20px 10px}.confirm-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.confirm-modal-body[_ngcontent-%COMP%]{padding:10px 20px}.confirm-modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.5;color:#666}.confirm-modal-footer[_ngcontent-%COMP%]{padding:15px 20px 20px;display:flex;justify-content:flex-end;gap:10px}.confirm-modal-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.confirm-modal-btn.cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.confirm-modal-btn.cancel[_ngcontent-%COMP%]:hover{background:#5a6268}.confirm-modal-btn.confirm[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.confirm-modal-btn.confirm[_ngcontent-%COMP%]:hover{background:#c82333}.viewer-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}','.file-select-guide[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;background:#f8f8f8;min-height:100%;padding:40px 20px;position:relative}.main-content-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%;max-width:1200px;height:calc(100vh - 200px);min-height:500px}.file-upload-area[_ngcontent-%COMP%]{flex:0 0 auto;width:100%}.upload-zone[_ngcontent-%COMP%]{border:2px dashed #007acc;border-radius:12px;padding:30px 20px;text-align:center;background:#fff;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden;height:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.upload-zone[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-radius:12px;background:linear-gradient(45deg,#007acc,#28a745,#007acc) border-box;animation:_ngcontent-%COMP%_borderGlow 3s ease-in-out infinite;opacity:0;z-index:-1}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{opacity:0}50%{opacity:.6}}.upload-zone[_ngcontent-%COMP%]:hover{border-color:#005a9e;background:#f8f9fa;transform:translateY(-2px);box-shadow:0 8px 25px #007acc26}.upload-zone[_ngcontent-%COMP%]:hover:before{opacity:.8}.upload-zone[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:15px;opacity:.7}.upload-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;color:#333;margin:0 0 15px;font-weight:500;line-height:1.3}.upload-hint[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:10px 0 0}.file-open-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:#fff;border:1.5px solid #e0e0e0;border-radius:8px;font-size:16px;color:#222;font-weight:500;padding:10px 20px;cursor:pointer;box-shadow:0 2px 8px #00000008;transition:background .15s,border .15s}.file-open-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#d0d0d0}.file-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.recent-files-wrap[_ngcontent-%COMP%]{flex:1;width:100%;overflow:visible;min-height:300px}.file-select-guide.drag-over[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]{border-color:#28a745;background:#f8fff9;transform:scale(1.02)}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acce6;display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:12px}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#fff}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;display:block;margin-left:auto;margin-right:auto}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0}@media (max-width: 1024px){.main-content-area[_ngcontent-%COMP%]{gap:15px}.upload-zone[_ngcontent-%COMP%]{height:180px;padding:25px 15px}}@media (max-width: 768px){.file-select-guide[_ngcontent-%COMP%]{padding:20px 15px}.main-content-area[_ngcontent-%COMP%]{gap:15px}.upload-zone[_ngcontent-%COMP%]{padding:20px 15px;height:160px}.upload-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.file-open-btn[_ngcontent-%COMP%]{font-size:14px;padding:8px 16px}.recent-files-wrap[_ngcontent-%COMP%]{min-height:250px}}']})};var Ta=[{path:"",component:Dt}],zt=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=st({type:r});static \u0275inj=at({imports:[ot.forChild(Ta),ot]})};var Ft=class r{getConversionOptions(){return[{id:"image",title:"\uC774\uBBF8\uC9C0 \u2192 PDF",icon:"./images/ico-img@3x.png",acceptTypes:["image/*"]},{id:"excel",title:"\uC5D1\uC140 \u2192 PDF",icon:"./images/btn-gnb-xls@3x.png",acceptTypes:[".xlsx",".xls"]},{id:"powerpoint",title:"\uD30C\uC6CC\uD3EC\uC778\uD2B8 \u2192 PDF",icon:"./images/btn-gnb-ppt@3x.png",acceptTypes:[".pptx",".ppt"]},{id:"word",title:"\uC6CC\uB4DC \u2192 PDF",icon:"./images/btn-gnb-doc@3x.png",acceptTypes:[".docx",".doc"]}]}getUploadOptions(){return[{id:"file",title:"\uD30C\uC77C",icon:"",acceptTypes:[".pdf",".doc",".docx",".txt"]},{id:"photo",title:"\uC0AC\uC9C4",icon:"",acceptTypes:["image/*"]},{id:"pdf",title:"PDF",icon:"",acceptTypes:[".pdf"]}]}convertFiles(t,e,n){return S(this,null,function*(){try{return console.log(`${e} \uBCC0\uD658 \uC2DC\uC791:`,t.length,"\uAC1C \uD30C\uC77C"),console.log("\uBCC0\uD658 \uC124\uC815:",n),yield this.simulateConversion(t.length),console.log("\uBCC0\uD658 \uC644\uB8CC"),!0}catch(i){return console.error("\uBCC0\uD658 \uC2E4\uD328:",i),!1}})}simulateConversion(t){return S(this,null,function*(){return new Promise(e=>{setTimeout(e,1e3+t*500)})})}getDefaultSettings(){return{fileName:"\uBCC0\uD658\uB41C_\uD30C\uC77C",savePath:"/Users/Downloads",quality:80,format:"pdf"}}validateFileType(t,e){let n=t.name.toLowerCase(),i=t.type;return e.some(o=>{if(o.startsWith("."))return n.endsWith(o);if(o.includes("/*")){let l=o.split("/")[0];return i.startsWith(l)}else return i===o})}getSupportedFormatsMessage(t){return`\uC9C0\uC6D0 \uD615\uC2DD: ${t.join(", ")}`}static \u0275fac=function(e){return new(e||r)};static \u0275prov=re({token:r,factory:r.\u0275fac,providedIn:"root"})};var an=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=st({type:r});static \u0275inj=at({providers:[Qe,ye,Me,Fe,Ie,ze,Ue,Ye,Ft,Ke,qe,ft],imports:[Te,Ge,ot,qt,zt,Xe,Jt,Xt,ke,Je]})};export{an as EzReaderModule};
