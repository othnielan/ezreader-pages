import{q as i,r as L}from"./chunk-HIDJ2X2I.js";import{B as h,Z as d,ba as f,d as g,o as l,r as u}from"./chunk-UBSBWSUK.js";var A=class m{constructor(e){this.http=e}OLLAMA_BASE_URL="http://localhost:11434";TARGET_MODEL="gemma3:1b";checkOllamaAvailability(){return g(this,null,function*(){try{console.log("Ollama \uC11C\uBC84 \uC0C1\uD0DC \uD655\uC778 \uC911...");let e=yield this.http.get(`${this.OLLAMA_BASE_URL}/api/tags`,{headers:new i({"Content-Type":"application/json"})}).toPromise();console.log("Ollama \uC11C\uBC84 \uC751\uB2F5:",e);let a=e.models.some(o=>o.name.includes("gemma3:1b")||o.name.includes("gemma3")||o.name.includes("gemma"));return console.log("\uC0AC\uC6A9 \uAC00\uB2A5\uD55C \uBAA8\uB378\uB4E4:",e.models.map(o=>o.name)),console.log(`${this.TARGET_MODEL} \uBAA8\uB378 \uC874\uC7AC:`,a),a}catch(e){return console.log("Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",e),!1}})}translateText(e,a){if(!e.trim())return l(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let s={english:"\uC601\uC5B4",korean:"\uD55C\uAD6D\uC5B4",japanese:"\uC77C\uBCF8\uC5B4",chinese:"\uC911\uAD6D\uC5B4",spanish:"\uC2A4\uD398\uC778\uC5B4",french:"\uD504\uB791\uC2A4\uC5B4",german:"\uB3C5\uC77C\uC5B4"}[a]||a,c=`\uB2E4\uC74C \uD14D\uC2A4\uD2B8\uB97C ${s}\uB85C \uBC88\uC5ED\uD574\uC8FC\uC138\uC694. \uBC88\uC5ED\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uD14D\uC2A4\uD2B8:
${e}

\uBC88\uC5ED:`,p={model:this.TARGET_MODEL,prompt:c,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},r=new i({"Content-Type":"application/json"});return console.log("LocalAI \uBC88\uC5ED \uC694\uCCAD:",{targetLanguage:s,textLength:e.length}),this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,p,{headers:r}).pipe(u(t=>{if(console.log("LocalAI \uBC88\uC5ED \uC751\uB2F5:",t),t.response&&t.response.trim())return{originalText:e,translatedText:t.response.trim(),targetLanguage:a,success:!0};throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),h(t=>{console.error("LocalAI \uBC88\uC5ED \uC624\uB958:",t);let n="\uB85C\uCEEC AI \uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return t.status===0?n="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":t.status===404?n=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:t.error?.error?n=t.error.error:t.message&&(n=t.message),l(()=>({originalText:e,translatedText:"",targetLanguage:a,success:!1,error:n}))}))}summarizeText(e,a="general",o="medium"){if(!e.trim())return l(()=>new Error("\uC694\uC57D\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let s="";switch(a){case"bullet":s="\uB2E4\uC74C \uBB38\uC11C\uC758 \uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638\uAC00 \uB9E4\uACA8\uC9C4 \uBAA9\uB85D\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"qa":s="\uB2E4\uC74C \uBB38\uC11C\uB97C Q&A \uD615\uC2DD\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC8FC\uC694 \uC9C8\uBB38\uACFC \uB2F5\uBCC0\uC73C\uB85C \uAD6C\uC131\uD574\uC8FC\uC138\uC694. ";break;case"structure":s="\uB2E4\uC74C \uBB38\uC11C\uB97C \uAD6C\uC870\uC801\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC81C\uBAA9, \uC8FC\uC694 \uC139\uC158, \uD575\uC2EC \uB0B4\uC6A9\uC744 \uCCB4\uACC4\uC801\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694. ";break;default:s="\uB2E4\uC74C \uBB38\uC11C\uB97C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}switch(o){case"short":s+="\uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"long":s+="\uC790\uC138\uD558\uAC8C 5-6\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;default:s+="\uC801\uC808\uD55C \uAE38\uC774\uB85C 3-4\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}s+=`\uD55C\uAD6D\uC5B4\uB85C \uC791\uC131\uD574\uC8FC\uC138\uC694. \uC694\uC57D\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uBB38\uC11C \uB0B4\uC6A9:
${e}`;let c={model:this.TARGET_MODEL,prompt:s,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},p=new i({"Content-Type":"application/json"});return console.log("LocalAI \uC694\uC57D \uC694\uCCAD:",{summaryType:a,summaryLength:o,textLength:e.length}),this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,c,{headers:p}).pipe(u(r=>{if(console.log("LocalAI \uC694\uC57D \uC751\uB2F5:",r),r.response&&r.response.trim())return{originalText:e,translatedText:r.response.trim(),targetLanguage:"korean",success:!0};throw new Error("\uC694\uC57D \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),h(r=>{console.error("LocalAI \uC694\uC57D \uC624\uB958:",r);let t="\uB85C\uCEEC AI \uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return r.status===0?t="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":r.status===404?t=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:r.error?.error?t=r.error.error:r.message&&(t=r.message),l(()=>({originalText:e,translatedText:"",targetLanguage:"korean",success:!1,error:t}))}))}getAvailableModels(){return g(this,null,function*(){try{return(yield this.http.get(`${this.OLLAMA_BASE_URL}/api/tags`).toPromise())?.models.map(a=>a.name)||[]}catch(e){return console.error("\uBAA8\uB378 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328:",e),[]}})}static \u0275fac=function(a){return new(a||m)(f(L))};static \u0275prov=d({token:m,factory:m.\u0275fac,providedIn:"root"})};export{A as a};
