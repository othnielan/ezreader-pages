import{a as z,b as N}from"./chunk-IENQUHTT.js";import{R as y,d as B,e as G,l as h}from"./chunk-VFXAHBRT.js";import{$b as V,Fb as E,Gb as n,Hb as a,Ib as p,Mb as _,Qb as x,Rb as b,Wa as g,Z as v,_ as T,a as P,bc as L,d as D,dc as l,ec as S,gb as k,ha as d,hb as A,ia as u,ja as f,k as m,ka as C,lb as O,nb as w,tc as R}from"./chunk-UBSBWSUK.js";var M=class i{isLoggedInSubject=new m(!1);isGuestModeSubject=new m(!1);isLoggedIn$=this.isLoggedInSubject.asObservable();isGuestMode$=this.isGuestModeSubject.asObservable();constructor(){let t=localStorage.getItem("isLoggedIn"),e=localStorage.getItem("guestMode");t==="true"?this.isLoggedInSubject.next(!0):e==="true"&&this.isGuestModeSubject.next(!0)}get isLoggedIn(){return this.isLoggedInSubject.value||this.isGuestModeSubject.value}login(){this.isLoggedInSubject.next(!0),this.isGuestModeSubject.next(!1),localStorage.setItem("isLoggedIn","true"),localStorage.removeItem("guestMode")}socialLogin(t){return D(this,null,function*(){try{return console.log(`${t} \uC18C\uC15C \uB85C\uADF8\uC778 \uCC98\uB9AC`),yield new Promise(e=>setTimeout(e,1e3)),this.isLoggedInSubject.next(!0),this.isGuestModeSubject.next(!1),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("loginProvider",t),localStorage.removeItem("guestMode"),!0}catch(e){return console.error("\uC18C\uC15C \uB85C\uADF8\uC778 \uC2E4\uD328:",e),!1}})}setGuestMode(t){t?(this.isGuestModeSubject.next(!0),this.isLoggedInSubject.next(!1),localStorage.setItem("guestMode","true"),localStorage.removeItem("isLoggedIn")):(this.isGuestModeSubject.next(!1),localStorage.removeItem("guestMode"))}isGuest(){return this.isGuestModeSubject.value}getLoginProvider(){return localStorage.getItem("loginProvider")}logout(){this.isLoggedInSubject.next(!1),this.isGuestModeSubject.next(!1),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("guestMode"),localStorage.removeItem("loginProvider")}static \u0275fac=function(e){return new(e||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};var F=class i{textEditorsSubject=new m([]);activeEditorIdSubject=new m(null);textEditors$=this.textEditorsSubject.asObservable();activeEditorId$=this.activeEditorIdSubject.asObservable();idCounter=0;constructor(){}createTextEditor(t=100,e=100,o=1){let r=`text-editor-${++this.idCounter}`,s={id:r,x:t,y:e,width:200,height:100,rotation:0,text:"",pageNumber:o,fontSize:14,fontFamily:"Arial",color:"#000000",bold:!1,italic:!1,underline:!1,opacity:1,isModified:!1,originalText:"",font:{name:"Arial",size:14,color:"#000000",weight:"normal",style:"normal"},isActive:!1},c=this.textEditorsSubject.value;return this.textEditorsSubject.next([...c,s]),this.setActiveEditor(r),r}addTextEditor(t){let e=this.textEditorsSubject.value;this.textEditorsSubject.next([...e,t])}updateTextEditor(t,e){let r=this.textEditorsSubject.value.map(s=>s.id===t?P(P({},s),e):s);this.textEditorsSubject.next(r)}deleteTextEditor(t){let o=this.textEditorsSubject.value.filter(r=>r.id!==t);this.textEditorsSubject.next(o),this.activeEditorIdSubject.value===t&&this.setActiveEditor(null)}setActiveEditor(t){this.activeEditorIdSubject.next(t)}getActiveEditor(){return this.activeEditorIdSubject.value}getTextEditor(t){return this.textEditorsSubject.value.find(e=>e.id===t)}getAllTextEditors(){return this.textEditorsSubject.value}getAllActiveEditors(){return this.textEditorsSubject.value}clearAllTextEditors(){this.textEditorsSubject.next([]),this.setActiveEditor(null)}exportTextEditors(){return JSON.stringify(this.textEditorsSubject.value,null,2)}importTextEditors(t){try{let e=JSON.parse(t);return Array.isArray(e)?(this.textEditorsSubject.next(e),this.setActiveEditor(null),!0):!1}catch(e){return console.error("Failed to import text editors:",e),!1}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};function $(i,t){i&1&&(n(0,"div",5)(1,"div",6),f(),n(2,"svg",7),p(3,"rect",8),n(4,"text",9),l(5,"PDF"),a()(),C(),n(6,"p"),l(7,"PDF \uD30C\uC77C\uC744 \uC5EC\uAE30\uC5D0 \uB4DC\uB86D\uD558\uC138\uC694"),a()()())}function U(i,t){if(i&1){let e=_();n(0,"tr")(1,"td")(2,"span",18)(3,"span",19),f(),n(4,"svg",20),p(5,"rect",21),n(6,"text",22),l(7,"PDF"),a()()(),C(),n(8,"span",23),x("click",function(){let r=d(e).$implicit,s=b(2);return u(s.onFileNameClick(r))}),l(9),a()()(),n(10,"td"),l(11),a(),n(12,"td"),l(13),a(),n(14,"td")(15,"button",24),x("click",function(){let r=d(e).$implicit,s=b(2);return u(s.deleteFile.emit(r))}),f(),n(16,"svg",25),p(17,"path",26),a()()()()}if(i&2){let e=t.$implicit;g(9),S(e.name),g(2),S(e.lastModified),g(2),S(e.size)}}function J(i,t){if(i&1){let e=_();n(0,"div",10)(1,"table",11)(2,"thead")(3,"tr")(4,"th",12),l(5,"\uC774\uB984"),a(),n(6,"th",13),l(7,"\uB9C8\uC9C0\uB9C9 \uC218\uC815\uC2DC\uAC04"),a(),n(8,"th",14),l(9,"\uD06C\uAE30"),a(),p(10,"th",15),a()(),n(11,"tbody"),O(12,U,18,3,"tr",16),a()(),n(13,"input",17),x("change",function(r){d(e);let s=b();return u(s.onRecentFileInputChange(r))}),a()()}if(i&2){let e=b();g(12),E("ngForOf",e.files)}}function W(i,t){i&1&&(n(0,"div",27),f(),n(1,"svg",28),p(2,"path",29),a(),C(),n(3,"p"),l(4,"\uCD5C\uADFC \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),a(),n(5,"span"),l(6,"PDF \uD30C\uC77C\uC744 \uC5F4\uBA74 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),a()())}var I=class i{files=[];deleteFile=new w;openFile=new w;showSnackbar=new w;selectedRecentFile=null;isDragOver=!1;dragCounter=0;onFileNameClick(t){this.selectedRecentFile=t;let e=document.getElementById("recent-file-input");e&&(e.value="",e.click())}onRecentFileInputChange(t){let e=t.target;if(e.files&&e.files.length>0){let o=e.files[0];this.openFile.emit(o)}this.selectedRecentFile=null}onDragOver(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer?.types.includes("Files")&&(t.dataTransfer.dropEffect="copy")}onDragEnter(t){t.preventDefault(),t.stopPropagation(),this.dragCounter++,t.dataTransfer?.types.includes("Files")&&(this.isDragOver=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dragCounter--,this.dragCounter<=0&&(this.isDragOver=!1,this.dragCounter=0)}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1,this.dragCounter=0;let e=t.dataTransfer?.files;if(e&&e.length>0){let o=e[0];o.type==="application/pdf"||o.name.toLowerCase().endsWith(".pdf")?(console.log("\uCD5C\uADFC\uD30C\uC77C \uC601\uC5ED\uC5D0\uC11C \uB4DC\uB798\uADF8 \uC564 \uB4DC\uB86D\uC73C\uB85C PDF \uD30C\uC77C \uC120\uD0DD:",o.name),this.openFile.emit(o)):this.showSnackbar.emit("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=k({type:i,selectors:[["app-recent-files"]],inputs:{files:"files"},outputs:{deleteFile:"deleteFile",openFile:"openFile",showSnackbar:"showSnackbar"},decls:7,vars:5,consts:[["noFiles",""],[1,"recent-files-panel",3,"dragover","dragenter","dragleave","drop"],[1,"recent-title"],["class","drag-overlay",4,"ngIf"],["class","recent-table-wrap",4,"ngIf","ngIfElse"],[1,"drag-overlay"],[1,"drag-message"],["width","48","height","48","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","3","fill","#007acc"],["x","12","y","17","text-anchor","middle","fill","white","font-size","8","font-family","Arial","font-weight","bold"],[1,"recent-table-wrap"],[1,"recent-files-table"],[2,"width","50%"],[2,"width","30%"],[2,"width","15%"],[2,"width","5%"],[4,"ngFor","ngForOf"],["id","recent-file-input","type","file","accept","application/pdf",2,"display","none",3,"change"],[1,"file-name-cell"],[1,"pdf-svg"],["width","22","height","22","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","18","height","18","rx","3","fill","#F44336"],["x","12","y","17","text-anchor","middle","fill","white","font-size","10","font-family","Arial","font-weight","bold"],[1,"file-name-text",2,"cursor","pointer","color","#1976d2",3,"click"],["title","\uC0AD\uC81C",1,"delete-btn",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6 7h12M9 7V5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2m2 0v12a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V7h12z","stroke","#888","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"no-files-message"],["width","64","height","64","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z","fill","#ddd"]],template:function(e,o){if(e&1){let r=_();n(0,"div",1),x("dragover",function(c){return d(r),u(o.onDragOver(c))})("dragenter",function(c){return d(r),u(o.onDragEnter(c))})("dragleave",function(c){return d(r),u(o.onDragLeave(c))})("drop",function(c){return d(r),u(o.onDrop(c))}),n(1,"div",2),l(2,"\uCD5C\uADFC\uD30C\uC77C"),a(),O(3,$,8,0,"div",3)(4,J,14,1,"div",4)(5,W,7,0,"ng-template",null,0,R),a()}if(e&2){let r=V(6);L("drag-over",o.isDragOver),g(3),E("ngIf",o.isDragOver),g(),E("ngIf",o.files.length>0)("ngIfElse",r)}},dependencies:[h,B,G],styles:['@charset "UTF-8";.recent-files-panel[_ngcontent-%COMP%]{padding:32px 24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000008;height:100%;display:flex;flex-direction:column;border:2px dashed #ddd;transition:all .3s ease}.recent-files-panel.drag-over[_ngcontent-%COMP%]{border-color:#007acc;background:#007acc0d}.recent-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#222;margin-bottom:18px;flex-shrink:0}.recent-table-wrap[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;min-height:0;max-height:calc(100vh - 400px)}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 768px){.recent-table-wrap[_ngcontent-%COMP%]{max-height:calc(100vh - 350px)}}@media (max-width: 480px){.recent-table-wrap[_ngcontent-%COMP%]{max-height:calc(100vh - 300px)}}.recent-files-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;background:#fff}.recent-files-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#888;font-weight:500;font-size:15px;background:#fafafa;border-bottom:2px solid #f0f0f0;padding:12px 8px;text-align:left}.recent-files-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#222;font-size:15px;padding:12px 8px;border-bottom:1px solid #f5f5f5;vertical-align:middle}.file-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center}.pdf-svg[_ngcontent-%COMP%]{margin-right:10px;display:flex;align-items:center}.file-name-text[_ngcontent-%COMP%]{font-weight:500;color:#222}.delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:2px;border-radius:4px;transition:background .15s}.delete-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.no-files-message[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;color:#666;padding:40px 20px}.no-files-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;opacity:.5}.no-files-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 8px;color:#333}.no-files-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.recent-files-panel.drag-over[_ngcontent-%COMP%]{border:2px dashed #007acc;background:#007acc0d;position:relative}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acc1a;display:flex;align-items:center;justify-content:center;border-radius:12px;z-index:1000}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#007acc}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:12px}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0}']})};var H=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=A({type:i});static \u0275inj=T({providers:[M,F],imports:[h,y,I,z,N,h,y]})};export{M as a,F as b,H as c};
